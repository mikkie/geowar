(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var _statesBootJs = require("./states/Boot.js");

var _statesBootJs2 = _interopRequireDefault(_statesBootJs);

var _statesPreloadJs = require("./states/Preload.js");

var _statesPreloadJs2 = _interopRequireDefault(_statesPreloadJs);

var _statesStartScreenJs = require("./states/StartScreen.js");

var _statesStartScreenJs2 = _interopRequireDefault(_statesStartScreenJs);

var _statesGameJs = require("./states/Game.js");

var _statesGameJs2 = _interopRequireDefault(_statesGameJs);

var game;

window.onload = function () {
                       game = new Phaser.Game(window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight, Phaser.AUTO, 'game');
                       game.state.add('boot', _statesBootJs2["default"]);
                       game.state.add('preload', _statesPreloadJs2["default"]);
                       game.state.add('startScreen', _statesStartScreenJs2["default"]);
                       game.state.add('game', _statesGameJs2["default"]);
                       game.state.start('boot');
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9hcHAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs0QkFFaUIsa0JBQWtCOzs7OytCQUNmLHFCQUFxQjs7OzttQ0FDakIseUJBQXlCOzs7OzRCQUNoQyxrQkFBa0I7Ozs7QUFMbkMsSUFBSSxJQUFJLENBQUM7O0FBT1QsTUFBTSxDQUFDLE1BQU0sR0FBRyxZQUFZO0FBQzFCLDJCQUFJLEdBQUcsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLElBQUksUUFBUSxDQUFDLGVBQWUsQ0FBQyxXQUFXLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQ3RGLE1BQU0sQ0FBQyxXQUFXLElBQUksUUFBUSxDQUFDLGVBQWUsQ0FBQyxZQUFZLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQ3pGLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDNUMsMkJBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sNEJBQU0sQ0FBQztBQUM1QiwyQkFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsU0FBUywrQkFBUyxDQUFDO0FBQ2xDLDJCQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxhQUFhLG1DQUFhLENBQUM7QUFDMUMsMkJBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sNEJBQU0sQ0FBQztBQUM1QiwyQkFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7Q0FDMUIsQ0FBQyIsImZpbGUiOiJEOi9hcXVhL2dlb3dhci9zcmMvYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGdhbWU7XG5cbmltcG9ydCBCb290IGZyb20gXCIuL3N0YXRlcy9Cb290LmpzXCI7XG5pbXBvcnQgUHJlbG9hZCBmcm9tIFwiLi9zdGF0ZXMvUHJlbG9hZC5qc1wiO1xuaW1wb3J0IFN0YXJ0U2NyZWVuIGZyb20gXCIuL3N0YXRlcy9TdGFydFNjcmVlbi5qc1wiO1xuaW1wb3J0IEdhbWUgZnJvbSBcIi4vc3RhdGVzL0dhbWUuanNcIjtcblxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSh3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgIFBoYXNlci5BVVRPLCAnZ2FtZScpO1xuICBnYW1lLnN0YXRlLmFkZCgnYm9vdCcsQm9vdCk7XG4gIGdhbWUuc3RhdGUuYWRkKCdwcmVsb2FkJyxQcmVsb2FkKTtcbiAgZ2FtZS5zdGF0ZS5hZGQoJ3N0YXJ0U2NyZWVuJyxTdGFydFNjcmVlbik7XG4gIGdhbWUuc3RhdGUuYWRkKCdnYW1lJyxHYW1lKTtcbiAgZ2FtZS5zdGF0ZS5zdGFydCgnYm9vdCcpO1xufTtcbiJdfQ==
},{"./states/Boot.js":14,"./states/Game.js":15,"./states/Preload.js":16,"./states/StartScreen.js":17}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var _UtilsJs = require('./Utils.js');

var _UtilsJs2 = _interopRequireDefault(_UtilsJs);

var CanvasHelper = (function () {
    function CanvasHelper(canvas, json, colorSet) {
        _classCallCheck(this, CanvasHelper);

        this.canvas = canvas;
        this.texture = json;
        this.colorSet = colorSet;
    }

    _createClass(CanvasHelper, [{
        key: 'drawTexture',
        value: function drawTexture() {
            this.ctx = this.canvas.ctx;
            this.ctx.beginPath();
            for (var key in this.texture) {
                this.updateCtxProp(this.texture[key].ctxProp);
                for (var i in this.texture[key].draw) {
                    var part = this.texture[key].draw[i];
                    var x = this.parseExpress(part.x);
                    var y = this.parseExpress(part.y);
                    if (part.drawType == 'move') {
                        this.ctx.moveTo(x, y);
                    } else if (part.drawType == 'line') {
                        this.ctx.lineTo(x, y);
                    } else if (part.drawType == 'arc') {
                        var radius = this.parseExpress(part.radius);
                        var arc = this.parseExpress(part.arc);
                        this.ctx.arc(x, y, radius, 0, arc, false);
                    }
                }
                this.ctx.closePath();
                if (this.texture[key].style == 'stroke') {
                    this.ctx.strokeStyle = this.getColor(key);
                    this.ctx.stroke();
                } else if (this.texture[key].style == 'fill') {
                    this.ctx.fillStyle = this.getColor(key);
                    this.ctx.fill();
                }
            }
        }
    }, {
        key: 'updateCtxProp',
        value: function updateCtxProp(ctxProp) {
            if (ctxProp) {
                for (var k in ctxProp) {
                    this.ctx[k] = ctxProp[k];
                }
            }
        }
    }, {
        key: 'getColor',
        value: function getColor(key) {
            if (this.colorSet && this.colorSet[key]) {
                return this.colorSet[key];
            }
            return _UtilsJs2['default'].generateRandomColor();
        }
    }, {
        key: 'parseExpress',
        value: function parseExpress(pos) {
            if (isNaN(pos) && /\$\{.*\}/.test(pos)) {
                pos = pos.replace(/canvas.height/gi, this.canvas.height).replace(/canvas.width/gi, this.canvas.width);
                pos = pos.substring(2, pos.length - 1);
                pos = eval(pos);
                return pos;
            }
            return pos;
        }
    }]);

    return CanvasHelper;
})();

exports['default'] = CanvasHelper;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9jb21tb24vQ2FudmFzSGVscGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozt1QkFBa0IsWUFBWTs7OztJQUVULFlBQVk7QUFFbEIsYUFGTSxZQUFZLENBRWpCLE1BQU0sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFOzhCQUZuQixZQUFZOztBQUd6QixZQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUNyQixZQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztBQUNwQixZQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztLQUM1Qjs7aUJBTmdCLFlBQVk7O2VBUWxCLHVCQUFHO0FBQ1YsZ0JBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7QUFDM0IsZ0JBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDckIsaUJBQUssSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtBQUMxQixvQkFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzlDLHFCQUFLLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFO0FBQ2xDLHdCQUFJLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyQyx3QkFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEMsd0JBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xDLHdCQUFJLElBQUksQ0FBQyxRQUFRLElBQUksTUFBTSxFQUFFO0FBQ3pCLDRCQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7cUJBQ3pCLE1BQ0ksSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLE1BQU0sRUFBRTtBQUM5Qiw0QkFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO3FCQUN6QixNQUNJLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxLQUFLLEVBQUU7QUFDN0IsNEJBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzVDLDRCQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN0Qyw0QkFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztxQkFDN0M7aUJBQ0o7QUFDRCxvQkFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUNyQixvQkFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssSUFBSSxRQUFRLEVBQUU7QUFDckMsd0JBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDMUMsd0JBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUM7aUJBQ3JCLE1BQ0ksSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssSUFBSSxNQUFNLEVBQUU7QUFDeEMsd0JBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDeEMsd0JBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7aUJBQ25CO2FBQ0o7U0FDSjs7O2VBR1ksdUJBQUMsT0FBTyxFQUFFO0FBQ25CLGdCQUFJLE9BQU8sRUFBRTtBQUNULHFCQUFLLElBQUksQ0FBQyxJQUFJLE9BQU8sRUFBRTtBQUNuQix3QkFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQzVCO2FBQ0o7U0FDSjs7O2VBSU8sa0JBQUMsR0FBRyxFQUFFO0FBQ1YsZ0JBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0FBQ3JDLHVCQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDN0I7QUFDRCxtQkFBTyxxQkFBTSxtQkFBbUIsRUFBRSxDQUFDO1NBQ3RDOzs7ZUFHVyxzQkFBQyxHQUFHLEVBQUU7QUFDZCxnQkFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUNwQyxtQkFBRyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN0RyxtQkFBRyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDdkMsbUJBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEIsdUJBQU8sR0FBRyxDQUFDO2FBQ2Q7QUFDRCxtQkFBTyxHQUFHLENBQUE7U0FDYjs7O1dBcEVnQixZQUFZOzs7cUJBQVosWUFBWSIsImZpbGUiOiJEOi9hcXVhL2dlb3dhci9zcmMvY29tbW9uL0NhbnZhc0hlbHBlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVdGlscyBmcm9tICcuL1V0aWxzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzSGVscGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKGNhbnZhcywganNvbiwgY29sb3JTZXQpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgICAgIHRoaXMudGV4dHVyZSA9IGpzb247XG4gICAgICAgIHRoaXMuY29sb3JTZXQgPSBjb2xvclNldDtcbiAgICB9XG5cbiAgICBkcmF3VGV4dHVyZSgpIHtcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5jdHg7XG4gICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy50ZXh0dXJlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUN0eFByb3AodGhpcy50ZXh0dXJlW2tleV0uY3R4UHJvcCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMudGV4dHVyZVtrZXldLmRyYXcpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFydCA9IHRoaXMudGV4dHVyZVtrZXldLmRyYXdbaV07XG4gICAgICAgICAgICAgICAgdmFyIHggPSB0aGlzLnBhcnNlRXhwcmVzcyhwYXJ0LngpO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gdGhpcy5wYXJzZUV4cHJlc3MocGFydC55KTtcbiAgICAgICAgICAgICAgICBpZiAocGFydC5kcmF3VHlwZSA9PSAnbW92ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgubW92ZVRvKHgsIHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJ0LmRyYXdUeXBlID09ICdsaW5lJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oeCwgeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnQuZHJhd1R5cGUgPT0gJ2FyYycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhZGl1cyA9IHRoaXMucGFyc2VFeHByZXNzKHBhcnQucmFkaXVzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyYyA9IHRoaXMucGFyc2VFeHByZXNzKHBhcnQuYXJjKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguYXJjKHgsIHksIHJhZGl1cywgMCwgYXJjLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0dXJlW2tleV0uc3R5bGUgPT0gJ3N0cm9rZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuZ2V0Q29sb3Ioa2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMudGV4dHVyZVtrZXldLnN0eWxlID09ICdmaWxsJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMuZ2V0Q29sb3Ioa2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHVwZGF0ZUN0eFByb3AoY3R4UHJvcCkge1xuICAgICAgICBpZiAoY3R4UHJvcCkge1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBjdHhQcm9wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHhba10gPSBjdHhQcm9wW2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIGdldENvbG9yKGtleSkge1xuICAgICAgICBpZiAodGhpcy5jb2xvclNldCAmJiB0aGlzLmNvbG9yU2V0W2tleV0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbG9yU2V0W2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFV0aWxzLmdlbmVyYXRlUmFuZG9tQ29sb3IoKTtcbiAgICB9XG5cblxuICAgIHBhcnNlRXhwcmVzcyhwb3MpIHtcbiAgICAgICAgaWYgKGlzTmFOKHBvcykgJiYgL1xcJFxcey4qXFx9Ly50ZXN0KHBvcykpIHtcbiAgICAgICAgICAgIHBvcyA9IHBvcy5yZXBsYWNlKC9jYW52YXMuaGVpZ2h0L2dpLCB0aGlzLmNhbnZhcy5oZWlnaHQpLnJlcGxhY2UoL2NhbnZhcy53aWR0aC9naSwgdGhpcy5jYW52YXMud2lkdGgpO1xuICAgICAgICAgICAgcG9zID0gcG9zLnN1YnN0cmluZygyLCBwb3MubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBwb3MgPSBldmFsKHBvcyk7XG4gICAgICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb3NcbiAgICB9XG5cbn0iXX0=
},{"./Utils.js":3}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Utils = (function () {
    function Utils() {
        _classCallCheck(this, Utils);
    }

    _createClass(Utils, null, [{
        key: 'generateRandomColor',
        value: function generateRandomColor() {
            var letters = '0123456789ABCDEF';
            var color = '#';
            for (var i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }
    }]);

    return Utils;
})();

exports['default'] = Utils;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9jb21tb24vVXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztJQUFxQixLQUFLO2FBQUwsS0FBSzs4QkFBTCxLQUFLOzs7aUJBQUwsS0FBSzs7ZUFDSSwrQkFBRztBQUN6QixnQkFBSSxPQUFPLEdBQUcsa0JBQWtCLENBQUM7QUFDakMsZ0JBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQztBQUNoQixpQkFBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN4QixxQkFBSyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ3BEO0FBQ0QsbUJBQU8sS0FBSyxDQUFDO1NBQ2hCOzs7V0FSZ0IsS0FBSzs7O3FCQUFMLEtBQUsiLCJmaWxlIjoiRDovYXF1YS9nZW93YXIvc3JjL2NvbW1vbi9VdGlscy5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFV0aWxzIHtcbiAgICBzdGF0aWMgZ2VuZXJhdGVSYW5kb21Db2xvcigpIHtcbiAgICAgICAgdmFyIGxldHRlcnMgPSAnMDEyMzQ1Njc4OUFCQ0RFRic7XG4gICAgICAgIHZhciBjb2xvciA9ICcjJztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICAgICAgICAgIGNvbG9yICs9IGxldHRlcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTYpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgfVxufSJdfQ==
},{}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _PlayerJs = require('./Player.js');

var _PlayerJs2 = _interopRequireDefault(_PlayerJs);

var _commonCanvasHelperJs = require('../../common/CanvasHelper.js');

var _commonCanvasHelperJs2 = _interopRequireDefault(_commonCanvasHelperJs);

var _texturesPlayersCircleplayerJson = require('../../textures/players/circleplayer.json');

var _texturesPlayersCircleplayerJson2 = _interopRequireDefault(_texturesPlayersCircleplayerJson);

var CirclePlayer = (function (_Player) {
    _inherits(CirclePlayer, _Player);

    function CirclePlayer() {
        _classCallCheck(this, CirclePlayer);

        _get(Object.getPrototypeOf(CirclePlayer.prototype), 'constructor', this).apply(this, arguments);
    }

    _createClass(CirclePlayer, [{
        key: 'draw',
        value: function draw() {
            new _commonCanvasHelperJs2['default'](this.canvas, _texturesPlayersCircleplayerJson2['default'], this.colorSet).drawTexture();
        }
    }, {
        key: 'pushState',
        value: function pushState() {
            this.game.geowar.socketHandler.push({ name: "playerMove", id: this.playerId, x: this.x, y: this.y, angle: this.angle, type: "circle", colorSet: this.colorSet });
        }
    }]);

    return CirclePlayer;
})(_PlayerJs2['default']);

exports['default'] = CirclePlayer;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9wcmVmYWJzL3BsYXllcnMvQ2lyY2xlUGxheWVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7d0JBQW1CLGFBQWE7Ozs7b0NBQ1AsOEJBQThCOzs7OytDQUNoQywwQ0FBMEM7Ozs7SUFFNUMsWUFBWTtjQUFaLFlBQVk7O2FBQVosWUFBWTs4QkFBWixZQUFZOzttQ0FBWixZQUFZOzs7aUJBQVosWUFBWTs7ZUFFekIsZ0JBQUc7QUFDSCxrREFBaUIsSUFBSSxDQUFDLE1BQU0sZ0RBQVksSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ3hFOzs7ZUFFUSxxQkFBRztBQUNSLGdCQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUcsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUcsSUFBSSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUcsUUFBUSxFQUFFLFFBQVEsRUFBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztTQUN6Szs7O1dBUmdCLFlBQVk7OztxQkFBWixZQUFZIiwiZmlsZSI6IkQ6L2FxdWEvZ2Vvd2FyL3NyYy9wcmVmYWJzL3BsYXllcnMvQ2lyY2xlUGxheWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBsYXllciBmcm9tICcuL1BsYXllci5qcyc7XG5pbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gJy4uLy4uL2NvbW1vbi9DYW52YXNIZWxwZXIuanMnO1xuaW1wb3J0IHBsYXllckpzb24gZnJvbSAnLi4vLi4vdGV4dHVyZXMvcGxheWVycy9jaXJjbGVwbGF5ZXIuanNvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENpcmNsZVBsYXllciBleHRlbmRzIFBsYXllciB7XG5cbiAgICBkcmF3KCkge1xuICAgICAgICBuZXcgQ2FudmFzSGVscGVyKHRoaXMuY2FudmFzLHBsYXllckpzb24sdGhpcy5jb2xvclNldCkuZHJhd1RleHR1cmUoKTtcbiAgICB9XG5cbiAgICBwdXNoU3RhdGUoKSB7XG4gICAgICAgIHRoaXMuZ2FtZS5nZW93YXIuc29ja2V0SGFuZGxlci5wdXNoKHsgbmFtZTogXCJwbGF5ZXJNb3ZlXCIsIGlkOiB0aGlzLnBsYXllcklkLCB4IDogdGhpcy54LCB5IDogdGhpcy55LCBhbmdsZSA6IHRoaXMuYW5nbGUsIHR5cGUgOiBcImNpcmNsZVwiLCBjb2xvclNldCA6IHRoaXMuY29sb3JTZXQgfSk7XG4gICAgfVxuXG59Il19
},{"../../common/CanvasHelper.js":2,"../../textures/players/circleplayer.json":19,"./Player.js":5}],5:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _commonCanvasHelperJs = require('../../common/CanvasHelper.js');

var _commonCanvasHelperJs2 = _interopRequireDefault(_commonCanvasHelperJs);

var _texturesPlayersPlayerJson = require('../../textures/players/Player.json');

var _texturesPlayersPlayerJson2 = _interopRequireDefault(_texturesPlayersPlayerJson);

var _commonUtilsJs = require('../../common/Utils.js');

var _commonUtilsJs2 = _interopRequireDefault(_commonUtilsJs);

var Player = (function (_Phaser$Sprite) {
    _inherits(Player, _Phaser$Sprite);

    function Player(game, x, y, width, height, weaponFactory, colorSet, needControl) {
        _classCallCheck(this, Player);

        _get(Object.getPrototypeOf(Player.prototype), 'constructor', this).call(this, game, x, y, game.make.bitmapData(width, height));
        this.canvas = this.key;
        this.needControl = needControl;
        if (colorSet) {
            this.colorSet = colorSet;
        } else {
            this.colorSet = {
                head: _commonUtilsJs2['default'].generateRandomColor(),
                body: _commonUtilsJs2['default'].generateRandomColor()
            };
        }

        this.draw();

        this.speed = 300;
        this.angle = -90;
        this.anchor.setTo(0.5, 0.5);
        this.game.physics.enable(this, Phaser.Physics.ARCADE);
        this.body.collideWorldBounds = true;
        this.body.drag.set(60);

        this.weaponFactory = weaponFactory;
        this.createWeapon();
    }

    _createClass(Player, [{
        key: 'draw',
        value: function draw() {
            new _commonCanvasHelperJs2['default'](this.canvas, _texturesPlayersPlayerJson2['default'], this.colorSet).drawTexture();
        }
    }, {
        key: 'update',
        value: function update() {
            if (this.needControl) {
                this.body.velocity.x = 0;
                this.body.velocity.y = 0;
                this.body.angularVelocity = 0;

                if (this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)) {
                    this.body.angularVelocity = -200;
                } else if (this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)) {
                    this.body.angularVelocity = 200;
                }
                if (this.game.input.keyboard.isDown(Phaser.Keyboard.UP)) {
                    this.game.physics.arcade.velocityFromAngle(this.angle, 300, this.body.velocity);
                } else if (this.game.input.keyboard.isDown(Phaser.Keyboard.DOWN)) {
                    this.game.physics.arcade.velocityFromAngle(this.angle + 180, 300, this.body.velocity);
                }

                if (this.fireButton.isDown) {
                    this.weapon.fire();
                }
            }

            this.pushState();
        }
    }, {
        key: 'pushState',
        value: function pushState() {
            this.game.geowar.socketHandler.push({ name: "playerMove", id: this.playerId, x: this.x, y: this.y, angle: this.angle, type: "triangle", colorSet: this.colorSet });
        }
    }, {
        key: 'createWeapon',
        value: function createWeapon() {
            this.weapon = this.weaponFactory.createWeapon('dirt');

            this.weapon.trackSprite(this, this.width / 2 + 5, 0, true);

            this.fireButton = this.game.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR);
        }
    }]);

    return Player;
})(Phaser.Sprite);

exports['default'] = Player;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9wcmVmYWJzL3BsYXllcnMvUGxheWVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7b0NBQXlCLDhCQUE4Qjs7Ozt5Q0FDaEMsb0NBQW9DOzs7OzZCQUN6Qyx1QkFBdUI7Ozs7SUFFcEIsTUFBTTtjQUFOLE1BQU07O0FBRVosYUFGTSxNQUFNLENBRVgsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRTs4QkFGNUQsTUFBTTs7QUFHbkIsbUNBSGEsTUFBTSw2Q0FHYixJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEVBQUU7QUFDdkQsWUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQ3ZCLFlBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO0FBQy9CLFlBQUksUUFBUSxFQUFFO0FBQ1YsZ0JBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1NBQzVCLE1BQ0k7QUFDRCxnQkFBSSxDQUFDLFFBQVEsR0FBRztBQUNaLG9CQUFJLEVBQUUsMkJBQU0sbUJBQW1CLEVBQUU7QUFDakMsb0JBQUksRUFBRSwyQkFBTSxtQkFBbUIsRUFBRTthQUNwQyxDQUFDO1NBQ0w7O0FBRUQsWUFBSSxDQUFDLElBQUksRUFBRSxDQUFDOztBQUVaLFlBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO0FBQ2pCLFlBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLENBQUM7QUFDakIsWUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzVCLFlBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN0RCxZQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztBQUNwQyxZQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7O0FBRXZCLFlBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO0FBQ25DLFlBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztLQUN2Qjs7aUJBM0JnQixNQUFNOztlQThCbkIsZ0JBQUc7QUFDSCxrREFBaUIsSUFBSSxDQUFDLE1BQU0sMENBQWMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQzFFOzs7ZUFFSyxrQkFBRztBQUNMLGdCQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDbEIsb0JBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekIsb0JBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekIsb0JBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxHQUFHLENBQUMsQ0FBQzs7QUFFOUIsb0JBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFO0FBQ3ZELHdCQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLEdBQUcsQ0FBQztpQkFDcEMsTUFDSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUM3RCx3QkFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEdBQUcsR0FBRyxDQUFDO2lCQUNuQztBQUNELG9CQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUNyRCx3QkFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ25GLE1BQ0ksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUU7QUFDNUQsd0JBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDekY7O0FBRUQsb0JBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUU7QUFDeEIsd0JBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7aUJBQ3RCO2FBRUo7O0FBRUQsZ0JBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztTQUNwQjs7O2VBR1EscUJBQUc7QUFDUixnQkFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7U0FDdEs7OztlQUdXLHdCQUFHO0FBQ1gsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRXRELGdCQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFM0QsZ0JBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQzlFOzs7V0ExRWdCLE1BQU07R0FBUyxNQUFNLENBQUMsTUFBTTs7cUJBQTVCLE1BQU0iLCJmaWxlIjoiRDovYXF1YS9nZW93YXIvc3JjL3ByZWZhYnMvcGxheWVycy9QbGF5ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gJy4uLy4uL2NvbW1vbi9DYW52YXNIZWxwZXIuanMnO1xuaW1wb3J0IHBsYXllckpzb24gZnJvbSAnLi4vLi4vdGV4dHVyZXMvcGxheWVycy9QbGF5ZXIuanNvbic7XG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vY29tbW9uL1V0aWxzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxheWVyIGV4dGVuZHMgUGhhc2VyLlNwcml0ZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihnYW1lLCB4LCB5LCB3aWR0aCwgaGVpZ2h0LCB3ZWFwb25GYWN0b3J5LCBjb2xvclNldCwgbmVlZENvbnRyb2wpIHtcbiAgICAgICAgc3VwZXIoZ2FtZSwgeCwgeSwgZ2FtZS5tYWtlLmJpdG1hcERhdGEod2lkdGgsIGhlaWdodCkpO1xuICAgICAgICB0aGlzLmNhbnZhcyA9IHRoaXMua2V5O1xuICAgICAgICB0aGlzLm5lZWRDb250cm9sID0gbmVlZENvbnRyb2w7XG4gICAgICAgIGlmIChjb2xvclNldCkge1xuICAgICAgICAgICAgdGhpcy5jb2xvclNldCA9IGNvbG9yU2V0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb2xvclNldCA9IHtcbiAgICAgICAgICAgICAgICBoZWFkOiBVdGlscy5nZW5lcmF0ZVJhbmRvbUNvbG9yKCksXG4gICAgICAgICAgICAgICAgYm9keTogVXRpbHMuZ2VuZXJhdGVSYW5kb21Db2xvcigpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kcmF3KCk7XG5cbiAgICAgICAgdGhpcy5zcGVlZCA9IDMwMDtcbiAgICAgICAgdGhpcy5hbmdsZSA9IC05MDtcbiAgICAgICAgdGhpcy5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgICAgICB0aGlzLmdhbWUucGh5c2ljcy5lbmFibGUodGhpcywgUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcbiAgICAgICAgdGhpcy5ib2R5LmNvbGxpZGVXb3JsZEJvdW5kcyA9IHRydWU7XG4gICAgICAgIHRoaXMuYm9keS5kcmFnLnNldCg2MCk7XG5cbiAgICAgICAgdGhpcy53ZWFwb25GYWN0b3J5ID0gd2VhcG9uRmFjdG9yeTtcbiAgICAgICAgdGhpcy5jcmVhdGVXZWFwb24oKTtcbiAgICB9XG5cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIG5ldyBDYW52YXNIZWxwZXIodGhpcy5jYW52YXMsIHBsYXllckpzb24sIHRoaXMuY29sb3JTZXQpLmRyYXdUZXh0dXJlKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5uZWVkQ29udHJvbCkge1xuICAgICAgICAgICAgdGhpcy5ib2R5LnZlbG9jaXR5LnggPSAwO1xuICAgICAgICAgICAgdGhpcy5ib2R5LnZlbG9jaXR5LnkgPSAwO1xuICAgICAgICAgICAgdGhpcy5ib2R5LmFuZ3VsYXJWZWxvY2l0eSA9IDA7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQuaXNEb3duKFBoYXNlci5LZXlib2FyZC5MRUZUKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYm9keS5hbmd1bGFyVmVsb2NpdHkgPSAtMjAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmlzRG93bihQaGFzZXIuS2V5Ym9hcmQuUklHSFQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ib2R5LmFuZ3VsYXJWZWxvY2l0eSA9IDIwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQuaXNEb3duKFBoYXNlci5LZXlib2FyZC5VUCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUudmVsb2NpdHlGcm9tQW5nbGUodGhpcy5hbmdsZSwgMzAwLCB0aGlzLmJvZHkudmVsb2NpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmlzRG93bihQaGFzZXIuS2V5Ym9hcmQuRE9XTikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUudmVsb2NpdHlGcm9tQW5nbGUodGhpcy5hbmdsZSArIDE4MCwgMzAwLCB0aGlzLmJvZHkudmVsb2NpdHkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5maXJlQnV0dG9uLmlzRG93bikge1xuICAgICAgICAgICAgICAgIHRoaXMud2VhcG9uLmZpcmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnB1c2hTdGF0ZSgpO1xuICAgIH1cblxuXG4gICAgcHVzaFN0YXRlKCkge1xuICAgICAgICB0aGlzLmdhbWUuZ2Vvd2FyLnNvY2tldEhhbmRsZXIucHVzaCh7IG5hbWU6IFwicGxheWVyTW92ZVwiLCBpZDogdGhpcy5wbGF5ZXJJZCwgeDogdGhpcy54LCB5OiB0aGlzLnksIGFuZ2xlOiB0aGlzLmFuZ2xlLCB0eXBlOiBcInRyaWFuZ2xlXCIsIGNvbG9yU2V0OiB0aGlzLmNvbG9yU2V0IH0pO1xuICAgIH1cblxuXG4gICAgY3JlYXRlV2VhcG9uKCkge1xuICAgICAgICB0aGlzLndlYXBvbiA9IHRoaXMud2VhcG9uRmFjdG9yeS5jcmVhdGVXZWFwb24oJ2RpcnQnKTtcblxuICAgICAgICB0aGlzLndlYXBvbi50cmFja1Nwcml0ZSh0aGlzLCB0aGlzLndpZHRoIC8gMiArIDUsIDAsIHRydWUpO1xuXG4gICAgICAgIHRoaXMuZmlyZUJ1dHRvbiA9IHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLktleUNvZGUuU1BBQ0VCQVIpO1xuICAgIH1cblxufSJdfQ==
},{"../../common/CanvasHelper.js":2,"../../common/Utils.js":3,"../../textures/players/Player.json":18}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var _PlayerJs = require('./Player.js');

var _PlayerJs2 = _interopRequireDefault(_PlayerJs);

var _SquarePlayerJs = require('./SquarePlayer.js');

var _SquarePlayerJs2 = _interopRequireDefault(_SquarePlayerJs);

var _CirclePlayerJs = require('./CirclePlayer.js');

var _CirclePlayerJs2 = _interopRequireDefault(_CirclePlayerJs);

var _weaponsWeaponFactoryJs = require('../weapons/WeaponFactory.js');

var _weaponsWeaponFactoryJs2 = _interopRequireDefault(_weaponsWeaponFactoryJs);

var _commonUtilsJs = require('../../common/Utils.js');

var _commonUtilsJs2 = _interopRequireDefault(_commonUtilsJs);

var PlayerFactory = (function () {
    function PlayerFactory(game) {
        _classCallCheck(this, PlayerFactory);

        this._playerTypes = ['triangle', 'square', 'circle'];

        this.game = game;
        this.weaponFactory = new _weaponsWeaponFactoryJs2['default'](game);
    }

    _createClass(PlayerFactory, [{
        key: 'createPlayer',
        value: function createPlayer(defaultType) {
            var type = defaultType;
            if (!type) {
                type = this._playerTypes[Math.floor(Math.random() * this._playerTypes.length)];
            }
            switch (type) {
                case "triangle":
                    return new _PlayerJs2['default'](this.game, this.game.width / 2, this.game.height / 2, 35, 30, this.weaponFactory, null, true);
                case "square":
                    return new _SquarePlayerJs2['default'](this.game, this.game.width / 2, this.game.height / 2, 35, 30, this.weaponFactory, null, true);
                case "circle":
                    return new _CirclePlayerJs2['default'](this.game, this.game.width / 2, this.game.height / 2, 35, 30, this.weaponFactory, null, true);
                default:
                    return new _PlayerJs2['default'](this.game, this.game.width / 2, this.game.height / 2, 35, 30, this.weaponFactory, null, true);
            }
        }
    }, {
        key: 'createPeerPlayer',
        value: function createPeerPlayer(peerMetaData) {
            var type = peerMetaData.type;
            var player = null;
            switch (type) {
                case "triangle":
                    player = new _PlayerJs2['default'](this.game, this.game.width / 2, this.game.height / 2, 35, 30, this.weaponFactory, peerMetaData.colorSet, false);
                    break;
                case "square":
                    player = new _SquarePlayerJs2['default'](this.game, this.game.width / 2, this.game.height / 2, 35, 30, this.weaponFactory, peerMetaData.colorSet, false);
                    break;
                case "circle":
                    player = new _CirclePlayerJs2['default'](this.game, this.game.width / 2, this.game.height / 2, 35, 30, this.weaponFactory, peerMetaData.colorSet, false);
                    break;
                default:
                    player = new _PlayerJs2['default'](this.game, this.game.width / 2, this.game.height / 2, 35, 30, this.weaponFactory, peerMetaData.colorSet, false);
                    break;
            }
            player.playerId = peerMetaData.id;
            return player;
        }
    }]);

    return PlayerFactory;
})();

exports['default'] = PlayerFactory;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9wcmVmYWJzL3BsYXllcnMvUGxheWVyRmFjdG9yeS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7d0JBQW1CLGFBQWE7Ozs7OEJBQ1AsbUJBQW1COzs7OzhCQUNuQixtQkFBbUI7Ozs7c0NBQ2xCLDZCQUE2Qjs7Ozs2QkFDckMsdUJBQXVCOzs7O0lBRXBCLGFBQWE7QUFJbkIsYUFKTSxhQUFhLENBSWxCLElBQUksRUFBRTs4QkFKRCxhQUFhOzthQUU5QixZQUFZLEdBQUcsQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQzs7QUFHM0MsWUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7QUFDakIsWUFBSSxDQUFDLGFBQWEsR0FBRyx3Q0FBa0IsSUFBSSxDQUFDLENBQUM7S0FDaEQ7O2lCQVBnQixhQUFhOztlQVNsQixzQkFBQyxXQUFXLEVBQUU7QUFDdEIsZ0JBQUksSUFBSSxHQUFHLFdBQVcsQ0FBQztBQUN2QixnQkFBSSxDQUFDLElBQUksRUFBRTtBQUNQLG9CQUFJLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7YUFDbEY7QUFDRCxvQkFBUSxJQUFJO0FBQ1IscUJBQUssVUFBVTtBQUNYLDJCQUFPLDBCQUFXLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQUEsQUFDcEgscUJBQUssUUFBUTtBQUNULDJCQUFPLGdDQUFpQixJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUFBLEFBQzFILHFCQUFLLFFBQVE7QUFDVCwyQkFBTyxnQ0FBaUIsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFBQSxBQUMxSDtBQUNJLDJCQUFPLDBCQUFXLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQUEsYUFDdkg7U0FDSjs7O2VBR2UsMEJBQUMsWUFBWSxFQUFDO0FBQzNCLGdCQUFJLElBQUksR0FBRyxZQUFZLENBQUMsSUFBSSxDQUFDO0FBQzdCLGdCQUFJLE1BQU0sR0FBRyxJQUFJLENBQUM7QUFDbEIsb0JBQVEsSUFBSTtBQUNQLHFCQUFLLFVBQVU7QUFDWCwwQkFBTSxHQUFHLDBCQUFXLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsWUFBWSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNwSSwwQkFBTTtBQUFBLEFBQ1YscUJBQUssUUFBUTtBQUNULDBCQUFNLEdBQUcsZ0NBQWlCLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsWUFBWSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMxSSwwQkFBTTtBQUFBLEFBQ1YscUJBQUssUUFBUTtBQUNULDBCQUFNLEdBQUcsZ0NBQWlCLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsWUFBWSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMxSSwwQkFBTTtBQUFBLEFBQ1Y7QUFDSSwwQkFBTSxHQUFHLDBCQUFXLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsWUFBWSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNwSSwwQkFBTTtBQUFBLGFBQ2I7QUFDRCxrQkFBTSxDQUFDLFFBQVEsR0FBRyxZQUFZLENBQUMsRUFBRSxDQUFDO0FBQ2xDLG1CQUFPLE1BQU0sQ0FBQztTQUNqQjs7O1dBOUNnQixhQUFhOzs7cUJBQWIsYUFBYSIsImZpbGUiOiJEOi9hcXVhL2dlb3dhci9zcmMvcHJlZmFicy9wbGF5ZXJzL1BsYXllckZhY3RvcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGxheWVyIGZyb20gJy4vUGxheWVyLmpzJztcbmltcG9ydCBTcXVhcmVQbGF5ZXIgZnJvbSAnLi9TcXVhcmVQbGF5ZXIuanMnO1xuaW1wb3J0IENpcmNsZVBsYXllciBmcm9tICcuL0NpcmNsZVBsYXllci5qcyc7XG5pbXBvcnQgV2VhcG9uRmFjdG9yeSBmcm9tICcuLi93ZWFwb25zL1dlYXBvbkZhY3RvcnkuanMnO1xuaW1wb3J0IFV0aWxzIGZyb20gJy4uLy4uL2NvbW1vbi9VdGlscy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllckZhY3Rvcnkge1xuXG4gICAgX3BsYXllclR5cGVzID0gWyd0cmlhbmdsZScsICdzcXVhcmUnLCAnY2lyY2xlJ107XG5cbiAgICBjb25zdHJ1Y3RvcihnYW1lKSB7XG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgICAgIHRoaXMud2VhcG9uRmFjdG9yeSA9IG5ldyBXZWFwb25GYWN0b3J5KGdhbWUpO1xuICAgIH1cblxuICAgIGNyZWF0ZVBsYXllcihkZWZhdWx0VHlwZSkge1xuICAgICAgICB2YXIgdHlwZSA9IGRlZmF1bHRUeXBlO1xuICAgICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgICAgIHR5cGUgPSB0aGlzLl9wbGF5ZXJUeXBlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLl9wbGF5ZXJUeXBlcy5sZW5ndGgpXTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0cmlhbmdsZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGxheWVyKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiwgdGhpcy5nYW1lLmhlaWdodCAvIDIsIDM1LCAzMCwgdGhpcy53ZWFwb25GYWN0b3J5LCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIGNhc2UgXCJzcXVhcmVcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNxdWFyZVBsYXllcih0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyLCAzNSwgMzAsIHRoaXMud2VhcG9uRmFjdG9yeSwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICBjYXNlIFwiY2lyY2xlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGVQbGF5ZXIodGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyLCB0aGlzLmdhbWUuaGVpZ2h0IC8gMiwgMzUsIDMwLCB0aGlzLndlYXBvbkZhY3RvcnksIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBsYXllcih0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyLCAzNSwgMzAsIHRoaXMud2VhcG9uRmFjdG9yeSwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGNyZWF0ZVBlZXJQbGF5ZXIocGVlck1ldGFEYXRhKXtcbiAgICAgICB2YXIgdHlwZSA9IHBlZXJNZXRhRGF0YS50eXBlO1xuICAgICAgIHZhciBwbGF5ZXIgPSBudWxsO1xuICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRyaWFuZ2xlXCI6XG4gICAgICAgICAgICAgICAgcGxheWVyID0gbmV3IFBsYXllcih0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyLCAzNSwgMzAsIHRoaXMud2VhcG9uRmFjdG9yeSwgcGVlck1ldGFEYXRhLmNvbG9yU2V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3F1YXJlXCI6XG4gICAgICAgICAgICAgICAgcGxheWVyID0gbmV3IFNxdWFyZVBsYXllcih0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyLCAzNSwgMzAsIHRoaXMud2VhcG9uRmFjdG9yeSwgcGVlck1ldGFEYXRhLmNvbG9yU2V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY2lyY2xlXCI6XG4gICAgICAgICAgICAgICAgcGxheWVyID0gbmV3IENpcmNsZVBsYXllcih0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyLCAzNSwgMzAsIHRoaXMud2VhcG9uRmFjdG9yeSwgcGVlck1ldGFEYXRhLmNvbG9yU2V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHBsYXllciA9IG5ldyBQbGF5ZXIodGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyLCB0aGlzLmdhbWUuaGVpZ2h0IC8gMiwgMzUsIDMwLCB0aGlzLndlYXBvbkZhY3RvcnksIHBlZXJNZXRhRGF0YS5jb2xvclNldCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHBsYXllci5wbGF5ZXJJZCA9IHBlZXJNZXRhRGF0YS5pZDtcbiAgICAgICAgcmV0dXJuIHBsYXllcjtcbiAgICB9XG5cbn0iXX0=
},{"../../common/Utils.js":3,"../weapons/WeaponFactory.js":10,"./CirclePlayer.js":4,"./Player.js":5,"./SquarePlayer.js":7}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _PlayerJs = require('./Player.js');

var _PlayerJs2 = _interopRequireDefault(_PlayerJs);

var _commonCanvasHelperJs = require('../../common/CanvasHelper.js');

var _commonCanvasHelperJs2 = _interopRequireDefault(_commonCanvasHelperJs);

var _texturesPlayersSquareplayerJson = require('../../textures/players/squareplayer.json');

var _texturesPlayersSquareplayerJson2 = _interopRequireDefault(_texturesPlayersSquareplayerJson);

var SquarePlayer = (function (_Player) {
    _inherits(SquarePlayer, _Player);

    function SquarePlayer() {
        _classCallCheck(this, SquarePlayer);

        _get(Object.getPrototypeOf(SquarePlayer.prototype), 'constructor', this).apply(this, arguments);
    }

    _createClass(SquarePlayer, [{
        key: 'draw',
        value: function draw() {
            new _commonCanvasHelperJs2['default'](this.canvas, _texturesPlayersSquareplayerJson2['default'], this.colorSet).drawTexture();
        }
    }, {
        key: 'pushState',
        value: function pushState() {
            this.game.geowar.socketHandler.push({ name: "playerMove", id: this.playerId, x: this.x, y: this.y, angle: this.angle, type: "square", colorSet: this.colorSet });
        }
    }]);

    return SquarePlayer;
})(_PlayerJs2['default']);

exports['default'] = SquarePlayer;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9wcmVmYWJzL3BsYXllcnMvU3F1YXJlUGxheWVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7d0JBQW1CLGFBQWE7Ozs7b0NBQ1AsOEJBQThCOzs7OytDQUNoQywwQ0FBMEM7Ozs7SUFFNUMsWUFBWTtjQUFaLFlBQVk7O2FBQVosWUFBWTs4QkFBWixZQUFZOzttQ0FBWixZQUFZOzs7aUJBQVosWUFBWTs7ZUFFekIsZ0JBQUc7QUFDSCxrREFBaUIsSUFBSSxDQUFDLE1BQU0sZ0RBQVksSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ3hFOzs7ZUFFUSxxQkFBRztBQUNSLGdCQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUcsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUcsSUFBSSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUcsUUFBUSxFQUFFLFFBQVEsRUFBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztTQUN6Szs7O1dBUmdCLFlBQVk7OztxQkFBWixZQUFZIiwiZmlsZSI6IkQ6L2FxdWEvZ2Vvd2FyL3NyYy9wcmVmYWJzL3BsYXllcnMvU3F1YXJlUGxheWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBsYXllciBmcm9tICcuL1BsYXllci5qcyc7XG5pbXBvcnQgQ2FudmFzSGVscGVyIGZyb20gJy4uLy4uL2NvbW1vbi9DYW52YXNIZWxwZXIuanMnO1xuaW1wb3J0IHBsYXllckpzb24gZnJvbSAnLi4vLi4vdGV4dHVyZXMvcGxheWVycy9zcXVhcmVwbGF5ZXIuanNvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNxdWFyZVBsYXllciBleHRlbmRzIFBsYXllciB7XG5cbiAgICBkcmF3KCkge1xuICAgICAgICBuZXcgQ2FudmFzSGVscGVyKHRoaXMuY2FudmFzLHBsYXllckpzb24sdGhpcy5jb2xvclNldCkuZHJhd1RleHR1cmUoKTtcbiAgICB9XG5cbiAgICBwdXNoU3RhdGUoKSB7XG4gICAgICAgIHRoaXMuZ2FtZS5nZW93YXIuc29ja2V0SGFuZGxlci5wdXNoKHsgbmFtZTogXCJwbGF5ZXJNb3ZlXCIsIGlkOiB0aGlzLnBsYXllcklkLCB4IDogdGhpcy54LCB5IDogdGhpcy55LCBhbmdsZSA6IHRoaXMuYW5nbGUsIHR5cGUgOiBcInNxdWFyZVwiLCBjb2xvclNldCA6IHRoaXMuY29sb3JTZXQgfSk7XG4gICAgfVxuXG59Il19
},{"../../common/CanvasHelper.js":2,"../../textures/players/squareplayer.json":20,"./Player.js":5}],8:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _WeaponJs = require('./Weapon.js');

var _WeaponJs2 = _interopRequireDefault(_WeaponJs);

var _commonUtilsJs = require('../../common/Utils.js');

var _commonUtilsJs2 = _interopRequireDefault(_commonUtilsJs);

var _commonCanvasHelperJs = require('../../common/CanvasHelper.js');

var _commonCanvasHelperJs2 = _interopRequireDefault(_commonCanvasHelperJs);

var _texturesWeaponsDirtweaponJson = require('../../textures/weapons/dirtweapon.json');

var _texturesWeaponsDirtweaponJson2 = _interopRequireDefault(_texturesWeaponsDirtweaponJson);

var DirtWeapon = (function (_Weapon) {
    _inherits(DirtWeapon, _Weapon);

    function DirtWeapon() {
        _classCallCheck(this, DirtWeapon);

        _get(Object.getPrototypeOf(DirtWeapon.prototype), 'constructor', this).apply(this, arguments);
    }

    _createClass(DirtWeapon, [{
        key: 'createBullet',
        value: function createBullet() {
            this.bmd = this.game.make.bitmapData(12, 12);
            new _commonCanvasHelperJs2['default'](this.bmd, _texturesWeaponsDirtweaponJson2['default']).drawTexture();
        }
    }]);

    return DirtWeapon;
})(_WeaponJs2['default']);

exports['default'] = DirtWeapon;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9wcmVmYWJzL3dlYXBvbnMvRGlydFdlYXBvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O3dCQUFtQixhQUFhOzs7OzZCQUNkLHVCQUF1Qjs7OztvQ0FDaEIsOEJBQThCOzs7OzZDQUNoQyx3Q0FBd0M7Ozs7SUFFMUMsVUFBVTtjQUFWLFVBQVU7O2FBQVYsVUFBVTs4QkFBVixVQUFVOzttQ0FBVixVQUFVOzs7aUJBQVYsVUFBVTs7ZUFFZix3QkFBRztBQUNYLGdCQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDN0Msa0RBQWlCLElBQUksQ0FBQyxHQUFHLDZDQUFZLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDdkQ7OztXQUxnQixVQUFVOzs7cUJBQVYsVUFBVSIsImZpbGUiOiJEOi9hcXVhL2dlb3dhci9zcmMvcHJlZmFicy93ZWFwb25zL0RpcnRXZWFwb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgV2VhcG9uIGZyb20gJy4vV2VhcG9uLmpzJztcbmltcG9ydCBVdGlscyBmcm9tICcuLi8uLi9jb21tb24vVXRpbHMuanMnO1xuaW1wb3J0IENhbnZhc0hlbHBlciBmcm9tICcuLi8uLi9jb21tb24vQ2FudmFzSGVscGVyLmpzJztcbmltcG9ydCB3ZWFwb25Kc29uIGZyb20gJy4uLy4uL3RleHR1cmVzL3dlYXBvbnMvZGlydHdlYXBvbi5qc29uJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlydFdlYXBvbiBleHRlbmRzIFdlYXBvbntcblxuICAgIGNyZWF0ZUJ1bGxldCgpIHtcbiAgICAgICAgdGhpcy5ibWQgPSB0aGlzLmdhbWUubWFrZS5iaXRtYXBEYXRhKDEyLCAxMik7XG4gICAgICAgIG5ldyBDYW52YXNIZWxwZXIodGhpcy5ibWQsd2VhcG9uSnNvbikuZHJhd1RleHR1cmUoKTtcbiAgICB9XG5cbn0iXX0=
},{"../../common/CanvasHelper.js":2,"../../common/Utils.js":3,"../../textures/weapons/dirtweapon.json":21,"./Weapon.js":9}],9:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var _commonUtilsJs = require('../../common/Utils.js');

var _commonUtilsJs2 = _interopRequireDefault(_commonUtilsJs);

var _commonCanvasHelperJs = require('../../common/CanvasHelper.js');

var _commonCanvasHelperJs2 = _interopRequireDefault(_commonCanvasHelperJs);

var _texturesWeaponsWeaponJson = require('../../textures/weapons/weapon.json');

var _texturesWeaponsWeaponJson2 = _interopRequireDefault(_texturesWeaponsWeaponJson);

var Weapon = (function () {
    function Weapon(game) {
        _classCallCheck(this, Weapon);

        this.game = game;
        this.createBullet();
        this.createWeapon();
    }

    _createClass(Weapon, [{
        key: 'createBullet',
        value: function createBullet() {
            this.bmd = this.game.make.bitmapData(12, 12);
            new _commonCanvasHelperJs2['default'](this.bmd, _texturesWeaponsWeaponJson2['default']).drawTexture();
        }
    }, {
        key: 'createWeapon',
        value: function createWeapon() {
            this.weapon = this.game.add.weapon(30, this.bmd);

            //  The bullet will be automatically killed when it leaves the world bounds
            this.weapon.bulletKillType = Phaser.Weapon.KILL_WORLD_BOUNDS;

            //  The speed at which the bullet is fired
            this.weapon.bulletSpeed = 400;

            //  Speed-up the rate of fire, allowing them to shoot 1 bullet every 60ms
            this.weapon.fireRate = 60;

            //  Add a variance to the bullet speed by +- this value
            this.weapon.bulletSpeedVariance = 200;
        }
    }, {
        key: 'trackSprite',
        value: function trackSprite(sprite, x, y, rotation) {
            this.weapon.trackSprite(sprite, x, y, rotation);
        }
    }, {
        key: 'fire',
        value: function fire() {
            this.weapon.fire();
        }
    }]);

    return Weapon;
})();

exports['default'] = Weapon;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9wcmVmYWJzL3dlYXBvbnMvV2VhcG9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs2QkFBa0IsdUJBQXVCOzs7O29DQUNoQiw4QkFBOEI7Ozs7eUNBQ2hDLG9DQUFvQzs7OztJQUV0QyxNQUFNO0FBRVosYUFGTSxNQUFNLENBRVgsSUFBSSxFQUFFOzhCQUZELE1BQU07O0FBR25CLFlBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2pCLFlBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUNwQixZQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7S0FDdkI7O2lCQU5nQixNQUFNOztlQVNYLHdCQUFHO0FBQ1gsZ0JBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUM3QyxrREFBaUIsSUFBSSxDQUFDLEdBQUcseUNBQVksQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUN2RDs7O2VBR1csd0JBQUU7QUFDVixnQkFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7O0FBR2pELGdCQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDOzs7QUFHN0QsZ0JBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQzs7O0FBRzlCLGdCQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7OztBQUcxQixnQkFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsR0FBRyxHQUFHLENBQUM7U0FDekM7OztlQUdVLHFCQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRTtBQUNoQyxnQkFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7U0FDbkQ7OztlQUdHLGdCQUFHO0FBQ0gsZ0JBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDdEI7OztXQXZDZ0IsTUFBTTs7O3FCQUFOLE1BQU0iLCJmaWxlIjoiRDovYXF1YS9nZW93YXIvc3JjL3ByZWZhYnMvd2VhcG9ucy9XZWFwb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vY29tbW9uL1V0aWxzLmpzJztcbmltcG9ydCBDYW52YXNIZWxwZXIgZnJvbSAnLi4vLi4vY29tbW9uL0NhbnZhc0hlbHBlci5qcyc7XG5pbXBvcnQgd2VhcG9uSnNvbiBmcm9tICcuLi8uLi90ZXh0dXJlcy93ZWFwb25zL3dlYXBvbi5qc29uJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhcG9uIHtcblxuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5jcmVhdGVCdWxsZXQoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVXZWFwb24oKTtcbiAgICB9XG5cblxuICAgIGNyZWF0ZUJ1bGxldCgpIHtcbiAgICAgICAgdGhpcy5ibWQgPSB0aGlzLmdhbWUubWFrZS5iaXRtYXBEYXRhKDEyLCAxMik7XG4gICAgICAgIG5ldyBDYW52YXNIZWxwZXIodGhpcy5ibWQsd2VhcG9uSnNvbikuZHJhd1RleHR1cmUoKTtcbiAgICB9XG5cblxuICAgIGNyZWF0ZVdlYXBvbigpe1xuICAgICAgICB0aGlzLndlYXBvbiA9IHRoaXMuZ2FtZS5hZGQud2VhcG9uKDMwLCB0aGlzLmJtZCk7XG5cbiAgICAgICAgLy8gIFRoZSBidWxsZXQgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGtpbGxlZCB3aGVuIGl0IGxlYXZlcyB0aGUgd29ybGQgYm91bmRzXG4gICAgICAgIHRoaXMud2VhcG9uLmJ1bGxldEtpbGxUeXBlID0gUGhhc2VyLldlYXBvbi5LSUxMX1dPUkxEX0JPVU5EUztcblxuICAgICAgICAvLyAgVGhlIHNwZWVkIGF0IHdoaWNoIHRoZSBidWxsZXQgaXMgZmlyZWRcbiAgICAgICAgdGhpcy53ZWFwb24uYnVsbGV0U3BlZWQgPSA0MDA7XG5cbiAgICAgICAgLy8gIFNwZWVkLXVwIHRoZSByYXRlIG9mIGZpcmUsIGFsbG93aW5nIHRoZW0gdG8gc2hvb3QgMSBidWxsZXQgZXZlcnkgNjBtc1xuICAgICAgICB0aGlzLndlYXBvbi5maXJlUmF0ZSA9IDYwO1xuXG4gICAgICAgIC8vICBBZGQgYSB2YXJpYW5jZSB0byB0aGUgYnVsbGV0IHNwZWVkIGJ5ICstIHRoaXMgdmFsdWVcbiAgICAgICAgdGhpcy53ZWFwb24uYnVsbGV0U3BlZWRWYXJpYW5jZSA9IDIwMDtcbiAgICB9XG5cblxuICAgIHRyYWNrU3ByaXRlKHNwcml0ZSwgeCwgeSwgcm90YXRpb24pIHtcbiAgICAgICAgdGhpcy53ZWFwb24udHJhY2tTcHJpdGUoc3ByaXRlLCB4LCB5LCByb3RhdGlvbik7XG4gICAgfVxuXG5cbiAgICBmaXJlKCkge1xuICAgICAgICB0aGlzLndlYXBvbi5maXJlKCk7XG4gICAgfVxuXG59Il19
},{"../../common/CanvasHelper.js":2,"../../common/Utils.js":3,"../../textures/weapons/weapon.json":22}],10:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var _WeaponJs = require('./Weapon.js');

var _WeaponJs2 = _interopRequireDefault(_WeaponJs);

var _DirtWeaponJs = require('./DirtWeapon.js');

var _DirtWeaponJs2 = _interopRequireDefault(_DirtWeaponJs);

var WeaponFactory = (function () {
    function WeaponFactory(game) {
        _classCallCheck(this, WeaponFactory);

        this.weapon_type = ['basic', 'dirt'];

        this.game = game;
    }

    _createClass(WeaponFactory, [{
        key: 'createWeapon',
        value: function createWeapon(type) {
            switch (type) {
                case "basic":
                    return new _WeaponJs2['default'](this.game);
                case "dirt":
                    return new _DirtWeaponJs2['default'](this.game);
                default:
                    return new _WeaponJs2['default'](this.game);
            }
        }
    }]);

    return WeaponFactory;
})();

exports['default'] = WeaponFactory;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9wcmVmYWJzL3dlYXBvbnMvV2VhcG9uRmFjdG9yeS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7d0JBQW1CLGFBQWE7Ozs7NEJBQ1QsaUJBQWlCOzs7O0lBRW5CLGFBQWE7QUFJbkIsYUFKTSxhQUFhLENBSWxCLElBQUksRUFBRTs4QkFKRCxhQUFhOzthQUU5QixXQUFXLEdBQUcsQ0FBQyxPQUFPLEVBQUMsTUFBTSxDQUFDOztBQUcxQixZQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztLQUNwQjs7aUJBTmdCLGFBQWE7O2VBU2xCLHNCQUFDLElBQUksRUFBRTtBQUNmLG9CQUFPLElBQUk7QUFDUCxxQkFBSyxPQUFPO0FBQ1QsMkJBQU8sMEJBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQUEsQUFDaEMscUJBQUssTUFBTTtBQUNSLDJCQUFPLDhCQUFlLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUFBLEFBQ3BDO0FBQ0csMkJBQU8sMEJBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQUEsYUFDbkM7U0FDSjs7O1dBbEJnQixhQUFhOzs7cUJBQWIsYUFBYSIsImZpbGUiOiJEOi9hcXVhL2dlb3dhci9zcmMvcHJlZmFicy93ZWFwb25zL1dlYXBvbkZhY3RvcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgV2VhcG9uIGZyb20gJy4vV2VhcG9uLmpzJztcbmltcG9ydCBEaXJ0V2VhcG9uIGZyb20gJy4vRGlydFdlYXBvbi5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYXBvbkZhY3Rvcnkge1xuXG4gICAgd2VhcG9uX3R5cGUgPSBbJ2Jhc2ljJywnZGlydCddO1xuXG4gICAgY29uc3RydWN0b3IoZ2FtZSkge1xuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgIH1cblxuXG4gICAgY3JlYXRlV2VhcG9uKHR5cGUpIHtcbiAgICAgICAgc3dpdGNoKHR5cGUpe1xuICAgICAgICAgICAgY2FzZSBcImJhc2ljXCIgOiBcbiAgICAgICAgICAgICAgIHJldHVybiBuZXcgV2VhcG9uKHRoaXMuZ2FtZSk7XG4gICAgICAgICAgICBjYXNlIFwiZGlydFwiIDogXG4gICAgICAgICAgICAgICByZXR1cm4gbmV3IERpcnRXZWFwb24odGhpcy5nYW1lKTtcbiAgICAgICAgICAgIGRlZmF1bHQgOiBcbiAgICAgICAgICAgICAgIHJldHVybiBuZXcgV2VhcG9uKHRoaXMuZ2FtZSk7XG4gICAgICAgIH0gXG4gICAgfVxuXG59Il19
},{"./DirtWeapon.js":8,"./Weapon.js":9}],11:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
      value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var ConnectionHandler = (function () {
      function ConnectionHandler(game) {
            _classCallCheck(this, ConnectionHandler);

            this.game = game;
      }

      _createClass(ConnectionHandler, [{
            key: 'handle',
            value: function handle(data) {
                  if (!this.game.geowar.players) {
                        this.game.geowar.players = {};
                  }
                  if (data.type === 'connected') {
                        this.game.geowar.socketReady = true;
                        //set current player id
                        this.game.geowar.currentPlayer.playerId = data.id;
                        //add to player map
                        this.game.geowar.players[data.id] = this.game.geowar.currentPlayer;
                        console.log('playerId = ' + this.game.geowar.currentPlayer.playerId + ' connected');
                  } else if (data.type === 'disconnected') {
                        var needDestroy = true;
                        if (this.game.geowar.currentPlayer.playerId == data.id) {
                              needDestroy = false;
                              this.game.geowar.socketReady = false;
                              console.log('playerId = ' + this.game.geowar.currentPlayer.playerId + 'disconnected');
                        }
                        if (this.game.geowar.players[data.id]) {
                              if (needDestroy) {
                                    this.game.geowar.players[data.id].destroy();
                              }
                              delete this.game.geowar.players[data.id];
                        }
                  }
            }
      }]);

      return ConnectionHandler;
})();

exports['default'] = ConnectionHandler;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9zb2NrZXQvQ29ubmVjdGlvbkhhbmRsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztJQUFxQixpQkFBaUI7QUFFckIsZUFGSSxpQkFBaUIsQ0FFcEIsSUFBSSxFQUFFO2tDQUZILGlCQUFpQjs7QUFHMUIsZ0JBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO09BQ3RCOzttQkFKYyxpQkFBaUI7O21CQU0xQixnQkFBQyxJQUFJLEVBQUU7QUFDUCxzQkFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRTtBQUN6Qiw0QkFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQzttQkFDbkM7QUFDRCxzQkFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFdBQVcsRUFBRTtBQUN6Qiw0QkFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQzs7QUFFcEMsNEJBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQzs7QUFFbEQsNEJBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQ25FLCtCQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsUUFBUSxHQUFHLFlBQVksQ0FBQyxDQUFDO21CQUN6RixNQUNJLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxjQUFjLEVBQUU7QUFDakMsNEJBQUksV0FBVyxHQUFHLElBQUksQ0FBQztBQUN2Qiw0QkFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxFQUFFLEVBQUU7QUFDbEQseUNBQVcsR0FBRyxLQUFLLENBQUM7QUFDcEIsa0NBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7QUFDckMscUNBQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUFRLEdBQUcsY0FBYyxDQUFDLENBQUM7eUJBQzNGO0FBQ0QsNEJBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUNqQyxrQ0FBSSxXQUFXLEVBQUU7QUFDWCx3Q0FBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQzsrQkFDakQ7QUFDRCxxQ0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO3lCQUM5QzttQkFFTjthQUNOOzs7YUFqQ2MsaUJBQWlCOzs7cUJBQWpCLGlCQUFpQiIsImZpbGUiOiJEOi9hcXVhL2dlb3dhci9zcmMvc29ja2V0L0Nvbm5lY3Rpb25IYW5kbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29ubmVjdGlvbkhhbmRsZXIge1xuXG4gICAgICBjb25zdHJ1Y3RvcihnYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgICAgfVxuXG4gICAgICBoYW5kbGUoZGF0YSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmdhbWUuZ2Vvd2FyLnBsYXllcnMpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5nZW93YXIucGxheWVycyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5nZW93YXIuc29ja2V0UmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgLy9zZXQgY3VycmVudCBwbGF5ZXIgaWRcbiAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5nZW93YXIuY3VycmVudFBsYXllci5wbGF5ZXJJZCA9IGRhdGEuaWQ7XG4gICAgICAgICAgICAgICAgICAvL2FkZCB0byBwbGF5ZXIgbWFwXG4gICAgICAgICAgICAgICAgICB0aGlzLmdhbWUuZ2Vvd2FyLnBsYXllcnNbZGF0YS5pZF0gPSB0aGlzLmdhbWUuZ2Vvd2FyLmN1cnJlbnRQbGF5ZXI7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGxheWVySWQgPSAnICsgdGhpcy5nYW1lLmdlb3dhci5jdXJyZW50UGxheWVyLnBsYXllcklkICsgJyBjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBuZWVkRGVzdHJveSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBpZiAodGhpcy5nYW1lLmdlb3dhci5jdXJyZW50UGxheWVyLnBsYXllcklkID09IGRhdGEuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWREZXN0cm95ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWUuZ2Vvd2FyLnNvY2tldFJlYWR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGxheWVySWQgPSAnICsgdGhpcy5nYW1lLmdlb3dhci5jdXJyZW50UGxheWVyLnBsYXllcklkICsgJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZS5nZW93YXIucGxheWVyc1tkYXRhLmlkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5lZWREZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWUuZ2Vvd2FyLnBsYXllcnNbZGF0YS5pZF0uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZ2FtZS5nZW93YXIucGxheWVyc1tkYXRhLmlkXTtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgfVxuXG59Il19
},{}],12:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
      value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var _prefabsPlayersPlayerFactoryJs = require('../prefabs/players/PlayerFactory.js');

var _prefabsPlayersPlayerFactoryJs2 = _interopRequireDefault(_prefabsPlayersPlayerFactoryJs);

var PlayerMoveHandler = (function () {
      function PlayerMoveHandler(game) {
            _classCallCheck(this, PlayerMoveHandler);

            this.game = game;
            this.playerFactory = new _prefabsPlayersPlayerFactoryJs2['default'](this.game);
      }

      _createClass(PlayerMoveHandler, [{
            key: 'handle',
            value: function handle(data) {
                  if (this.game.geowar.players[data.id]) {
                        var peerPlayer = this.game.geowar.players[data.id];
                        peerPlayer.x = data.x;
                        peerPlayer.y = data.y;
                        peerPlayer.angle = data.angle;
                  } else {
                        var peerPlayer = this.playerFactory.createPeerPlayer(data);
                        this.game.add.existing(peerPlayer);
                        this.game.geowar.playersGroup.add(peerPlayer);
                        //cache peer player
                        this.game.geowar.players[data.id] = peerPlayer;
                  }
            }
      }]);

      return PlayerMoveHandler;
})();

exports['default'] = PlayerMoveHandler;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9zb2NrZXQvUGxheWVyTW92ZUhhbmRsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OzZDQUEwQixxQ0FBcUM7Ozs7SUFFMUMsaUJBQWlCO0FBRXJCLGVBRkksaUJBQWlCLENBRXBCLElBQUksRUFBRTtrQ0FGSCxpQkFBaUI7O0FBRzFCLGdCQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztBQUNqQixnQkFBSSxDQUFDLGFBQWEsR0FBRywrQ0FBa0IsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO09BQ3ZEOzttQkFMYyxpQkFBaUI7O21CQU8xQixnQkFBQyxJQUFJLEVBQUU7QUFDUCxzQkFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ25DLDRCQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ25ELGtDQUFVLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDdEIsa0NBQVUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN0QixrQ0FBVSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO21CQUNqQyxNQUNHO0FBQ0EsNEJBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDM0QsNEJBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNuQyw0QkFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQzs7QUFFOUMsNEJBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxDQUFDO21CQUNsRDthQUNOOzs7YUFyQmMsaUJBQWlCOzs7cUJBQWpCLGlCQUFpQiIsImZpbGUiOiJEOi9hcXVhL2dlb3dhci9zcmMvc29ja2V0L1BsYXllck1vdmVIYW5kbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBsYXllckZhY3RvcnkgZnJvbSAnLi4vcHJlZmFicy9wbGF5ZXJzL1BsYXllckZhY3RvcnkuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXJNb3ZlSGFuZGxlciB7XG5cbiAgICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgICAgICAgICB0aGlzLnBsYXllckZhY3RvcnkgPSBuZXcgUGxheWVyRmFjdG9yeSh0aGlzLmdhbWUpO1xuICAgICAgfVxuXG4gICAgICBoYW5kbGUoZGF0YSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZS5nZW93YXIucGxheWVyc1tkYXRhLmlkXSkge1xuICAgICAgICAgICAgICAgIHZhciBwZWVyUGxheWVyID0gdGhpcy5nYW1lLmdlb3dhci5wbGF5ZXJzW2RhdGEuaWRdOyBcbiAgICAgICAgICAgICAgICBwZWVyUGxheWVyLnggPSBkYXRhLng7XG4gICAgICAgICAgICAgICAgcGVlclBsYXllci55ID0gZGF0YS55O1xuICAgICAgICAgICAgICAgIHBlZXJQbGF5ZXIuYW5nbGUgPSBkYXRhLmFuZ2xlOyAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICB2YXIgcGVlclBsYXllciA9IHRoaXMucGxheWVyRmFjdG9yeS5jcmVhdGVQZWVyUGxheWVyKGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5hZGQuZXhpc3RpbmcocGVlclBsYXllcik7XG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5wbGF5ZXJzR3JvdXAuYWRkKHBlZXJQbGF5ZXIpO1xuICAgICAgICAgICAgICAgIC8vY2FjaGUgcGVlciBwbGF5ZXJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUuZ2Vvd2FyLnBsYXllcnNbZGF0YS5pZF0gPSBwZWVyUGxheWVyO1xuICAgICAgICAgICAgfVxuICAgICAgfVxuXG59Il19
},{"../prefabs/players/PlayerFactory.js":6}],13:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var _ConnectionHandlerJs = require('./ConnectionHandler.js');

var _ConnectionHandlerJs2 = _interopRequireDefault(_ConnectionHandlerJs);

var _PlayerMoveHandlerJs = require('./PlayerMoveHandler.js');

var _PlayerMoveHandlerJs2 = _interopRequireDefault(_PlayerMoveHandlerJs);

var SocketHandler = (function () {
    function SocketHandler(sio, game) {
        _classCallCheck(this, SocketHandler);

        this.sio = sio;
        this.game = game;
        var that = this;
        this.initHandlers(this.game);
        this.sio.on('pull', function (data) {
            that.update(data, that);
        });
    }

    _createClass(SocketHandler, [{
        key: 'push',
        value: function push(data) {
            if (this.game.geowar.socketReady) {
                this.sio.emit('push', data);
            }
        }
    }, {
        key: 'update',
        value: function update(data, that) {
            if (data.name) {
                this.handlers[data.name].handle(data);
            }
        }
    }, {
        key: 'initHandlers',
        value: function initHandlers(game) {
            this.handlers = {};
            this.handlers.connection = new _ConnectionHandlerJs2['default'](game);
            this.handlers.playerMove = new _PlayerMoveHandlerJs2['default'](game);
        }
    }]);

    return SocketHandler;
})();

exports['default'] = SocketHandler;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9zb2NrZXQvU29ja2V0SGFuZGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7bUNBQThCLHdCQUF3Qjs7OzttQ0FDeEIsd0JBQXdCOzs7O0lBRWpDLGFBQWE7QUFDbkIsYUFETSxhQUFhLENBQ2xCLEdBQUcsRUFBRSxJQUFJLEVBQUU7OEJBRE4sYUFBYTs7QUFFMUIsWUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDZixZQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztBQUNqQixZQUFJLElBQUksR0FBRyxJQUFJLENBQUM7QUFDaEIsWUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDN0IsWUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLFVBQVUsSUFBSSxFQUFFO0FBQ2hDLGdCQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztTQUMzQixDQUFDLENBQUM7S0FDTjs7aUJBVGdCLGFBQWE7O2VBVzFCLGNBQUMsSUFBSSxFQUFFO0FBQ1AsZ0JBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxFQUFFO0FBQzlCLG9CQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDL0I7U0FDSjs7O2VBRUssZ0JBQUMsSUFBSSxFQUFFLElBQUksRUFBRTtBQUNmLGdCQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7QUFDWCxvQkFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ3pDO1NBQ0o7OztlQUdXLHNCQUFDLElBQUksRUFBRTtBQUNmLGdCQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUNuQixnQkFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcscUNBQXNCLElBQUksQ0FBQyxDQUFDO0FBQ3ZELGdCQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxxQ0FBc0IsSUFBSSxDQUFDLENBQUM7U0FDMUQ7OztXQTVCZ0IsYUFBYTs7O3FCQUFiLGFBQWEiLCJmaWxlIjoiRDovYXF1YS9nZW93YXIvc3JjL3NvY2tldC9Tb2NrZXRIYW5kbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbm5lY3Rpb25IYW5kbGVyIGZyb20gJy4vQ29ubmVjdGlvbkhhbmRsZXIuanMnO1xuaW1wb3J0IFBsYXllck1vdmVIYW5kbGVyIGZyb20gJy4vUGxheWVyTW92ZUhhbmRsZXIuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTb2NrZXRIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihzaW8sIGdhbWUpIHtcbiAgICAgICAgdGhpcy5zaW8gPSBzaW87XG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgdGhpcy5pbml0SGFuZGxlcnModGhpcy5nYW1lKTtcbiAgICAgICAgdGhpcy5zaW8ub24oJ3B1bGwnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdGhhdC51cGRhdGUoZGF0YSwgdGhhdCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1c2goZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5nYW1lLmdlb3dhci5zb2NrZXRSZWFkeSkge1xuICAgICAgICAgICAgdGhpcy5zaW8uZW1pdCgncHVzaCcsIGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlKGRhdGEsIHRoYXQpIHtcbiAgICAgICAgaWYgKGRhdGEubmFtZSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc1tkYXRhLm5hbWVdLmhhbmRsZShkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgaW5pdEhhbmRsZXJzKGdhbWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuICAgICAgICB0aGlzLmhhbmRsZXJzLmNvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvbkhhbmRsZXIoZ2FtZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMucGxheWVyTW92ZSA9IG5ldyBQbGF5ZXJNb3ZlSGFuZGxlcihnYW1lKTtcbiAgICB9XG59Il19
},{"./ConnectionHandler.js":11,"./PlayerMoveHandler.js":12}],14:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Boot = (function () {
    function Boot() {
        _classCallCheck(this, Boot);
    }

    _createClass(Boot, [{
        key: 'preload',
        value: function preload() {
            this.load.image('preloader', 'assets/images/loading_bar.png');
        }
    }, {
        key: 'create',
        value: function create() {
            this.game.geowar = {}; //namespace
            this.game.input.maxPointers = 1;
            this.game.state.start('preload');
        }
    }]);

    return Boot;
})();

exports['default'] = Boot;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9zdGF0ZXMvQm9vdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBQXFCLElBQUk7YUFBSixJQUFJOzhCQUFKLElBQUk7OztpQkFBSixJQUFJOztlQUNkLG1CQUFHO0FBQ04sZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSwrQkFBK0IsQ0FBQyxDQUFDO1NBQ2pFOzs7ZUFFSyxrQkFBRztBQUNMLGdCQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDdEIsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7QUFDaEMsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUNwQzs7O1dBVGdCLElBQUk7OztxQkFBSixJQUFJIiwiZmlsZSI6IkQ6L2FxdWEvZ2Vvd2FyL3NyYy9zdGF0ZXMvQm9vdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvb3Qge1xuICAgIHByZWxvYWQoKSB7XG4gICAgICAgIHRoaXMubG9hZC5pbWFnZSgncHJlbG9hZGVyJywgJ2Fzc2V0cy9pbWFnZXMvbG9hZGluZ19iYXIucG5nJyk7XG4gICAgfVxuXG4gICAgY3JlYXRlKCkge1xuICAgICAgICB0aGlzLmdhbWUuZ2Vvd2FyID0ge307IC8vbmFtZXNwYWNlXG4gICAgICAgIHRoaXMuZ2FtZS5pbnB1dC5tYXhQb2ludGVycyA9IDE7XG4gICAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgncHJlbG9hZCcpO1xuICAgIH1cbn0iXX0=
},{}],15:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _commonUtilsJs = require('../common/Utils.js');

var _commonUtilsJs2 = _interopRequireDefault(_commonUtilsJs);

var _prefabsPlayersPlayerFactoryJs = require('../prefabs/players/PlayerFactory.js');

var _prefabsPlayersPlayerFactoryJs2 = _interopRequireDefault(_prefabsPlayersPlayerFactoryJs);

var _socketSocketHandlerJs = require("../socket/SocketHandler.js");

var _socketSocketHandlerJs2 = _interopRequireDefault(_socketSocketHandlerJs);

var Game = (function (_Phaser$State) {
    _inherits(Game, _Phaser$State);

    function Game() {
        _classCallCheck(this, Game);

        _get(Object.getPrototypeOf(Game.prototype), 'constructor', this).apply(this, arguments);
    }

    _createClass(Game, [{
        key: 'create',
        value: function create() {
            //stage
            this.game.physics.startSystem(Phaser.Physics.ARCADE);
            this.game.stage.backgroundColor = '#282626';
            //factories
            this.playerFactory = new _prefabsPlayersPlayerFactoryJs2['default'](this.game);
            //player group
            var playersGroup = this.game.add.group();
            this.game.geowar.playersGroup = playersGroup;
            //player
            this.player = this.playerFactory.createPlayer();
            this.game.add.existing(this.player);
            playersGroup.add(this.player);
            //cache current player
            this.game.geowar.currentPlayer = this.player;
            //set up socket
            this.game.geowar.socketHandler = new _socketSocketHandlerJs2['default'](io('http://localhost:3000'), this.game);
        }
    }, {
        key: 'update',
        value: function update() {
            this.game.physics.arcade.collide(this.game.geowar.playersGroup, this.game.geowar.playersGroup, null, null);
        }
    }]);

    return Game;
})(Phaser.State);

exports['default'] = Game;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9zdGF0ZXMvR2FtZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OzZCQUFrQixvQkFBb0I7Ozs7NkNBQ1oscUNBQXFDOzs7O3FDQUNyQyw0QkFBNEI7Ozs7SUFFakMsSUFBSTtjQUFKLElBQUk7O2FBQUosSUFBSTs4QkFBSixJQUFJOzttQ0FBSixJQUFJOzs7aUJBQUosSUFBSTs7ZUFFZixrQkFBRzs7QUFFTCxnQkFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDckQsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxTQUFTLENBQUM7O0FBRTVDLGdCQUFJLENBQUMsYUFBYSxHQUFHLCtDQUFrQixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRWxELGdCQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUN6QyxnQkFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQzs7QUFFN0MsZ0JBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUNoRCxnQkFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNwQyx3QkFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRTlCLGdCQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQzs7QUFFN0MsZ0JBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsR0FBRyx1Q0FBa0IsRUFBRSxDQUFDLHVCQUF1QixDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlGOzs7ZUFHSyxrQkFBRztBQUNMLGdCQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQzdHOzs7V0F4QmdCLElBQUk7R0FBUyxNQUFNLENBQUMsS0FBSzs7cUJBQXpCLElBQUkiLCJmaWxlIjoiRDovYXF1YS9nZW93YXIvc3JjL3N0YXRlcy9HYW1lLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFV0aWxzIGZyb20gJy4uL2NvbW1vbi9VdGlscy5qcyc7XG5pbXBvcnQgUGxheWVyRmFjdG9yeSBmcm9tICcuLi9wcmVmYWJzL3BsYXllcnMvUGxheWVyRmFjdG9yeS5qcyc7XG5pbXBvcnQgU29ja2V0SGFuZGxlciBmcm9tIFwiLi4vc29ja2V0L1NvY2tldEhhbmRsZXIuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSBleHRlbmRzIFBoYXNlci5TdGF0ZSB7XG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIC8vc3RhZ2VcbiAgICAgICAgdGhpcy5nYW1lLnBoeXNpY3Muc3RhcnRTeXN0ZW0oUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcbiAgICAgICAgdGhpcy5nYW1lLnN0YWdlLmJhY2tncm91bmRDb2xvciA9ICcjMjgyNjI2JztcbiAgICAgICAgLy9mYWN0b3JpZXNcbiAgICAgICAgdGhpcy5wbGF5ZXJGYWN0b3J5ID0gbmV3IFBsYXllckZhY3RvcnkodGhpcy5nYW1lKTtcbiAgICAgICAgLy9wbGF5ZXIgZ3JvdXBcbiAgICAgICAgdmFyIHBsYXllcnNHcm91cCA9IHRoaXMuZ2FtZS5hZGQuZ3JvdXAoKTtcbiAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5wbGF5ZXJzR3JvdXAgPSBwbGF5ZXJzR3JvdXA7XG4gICAgICAgIC8vcGxheWVyXG4gICAgICAgIHRoaXMucGxheWVyID0gdGhpcy5wbGF5ZXJGYWN0b3J5LmNyZWF0ZVBsYXllcigpO1xuICAgICAgICB0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKHRoaXMucGxheWVyKTtcbiAgICAgICAgcGxheWVyc0dyb3VwLmFkZCh0aGlzLnBsYXllcik7XG4gICAgICAgIC8vY2FjaGUgY3VycmVudCBwbGF5ZXJcbiAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5jdXJyZW50UGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gICAgICAgIC8vc2V0IHVwIHNvY2tldFxuICAgICAgICB0aGlzLmdhbWUuZ2Vvd2FyLnNvY2tldEhhbmRsZXIgPSBuZXcgU29ja2V0SGFuZGxlcihpbygnaHR0cDovL2xvY2FsaG9zdDozMDAwJyksIHRoaXMuZ2FtZSk7XG4gICAgfVxuXG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS5jb2xsaWRlKHRoaXMuZ2FtZS5nZW93YXIucGxheWVyc0dyb3VwLCB0aGlzLmdhbWUuZ2Vvd2FyLnBsYXllcnNHcm91cCxudWxsLCBudWxsKTtcbiAgICB9XG5cbn0iXX0=
},{"../common/Utils.js":3,"../prefabs/players/PlayerFactory.js":6,"../socket/SocketHandler.js":13}],16:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var Preload = (function () {
    function Preload() {
        _classCallCheck(this, Preload);

        this.asset = null;
        this.ready = false;
    }

    _createClass(Preload, [{
        key: 'preload',
        value: function preload() {}
    }, {
        key: 'create',
        value: function create() {
            this.game.stage.backgroundColor = '#282626';
            this.asset = this.add.sprite(this.game.width / 2, this.game.height / 2, 'preloader');
            this.asset.anchor.setTo(0.5, 0.5);
            this.asset.scale.setTo(0.3, 0.3);

            this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
            this.load.setPreloadSprite(this.asset);

            this.load.image('play', 'assets/images/play.png');

            //start load
            this.load.start();
        }
    }, {
        key: 'update',
        value: function update() {

            if (this.ready) {
                this.game.state.start('startScreen');
            }
        }
    }, {
        key: 'onLoadComplete',
        value: function onLoadComplete() {
            this.ready = true;
        }
    }]);

    return Preload;
})();

exports['default'] = Preload;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9zdGF0ZXMvUHJlbG9hZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0lBQXFCLE9BQU87QUFFYixhQUZNLE9BQU8sR0FFVjs4QkFGRyxPQUFPOztBQUdwQixZQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztBQUNsQixZQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztLQUN0Qjs7aUJBTGdCLE9BQU87O2VBT2pCLG1CQUFHLEVBQ1Q7OztlQUVLLGtCQUFHO0FBQ0wsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsR0FBRyxTQUFTLENBQUM7QUFDNUMsZ0JBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUNyRixnQkFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNsQyxnQkFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQzs7QUFFakMsZ0JBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzVELGdCQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQzs7QUFFdkMsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBQyx3QkFBd0IsQ0FBQyxDQUFDOzs7QUFHakQsZ0JBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDckI7OztlQUVLLGtCQUFHOztBQUVMLGdCQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDWixvQkFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO2FBQ3hDO1NBRUo7OztlQUVhLDBCQUFHO0FBQ2IsZ0JBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1NBQ3JCOzs7V0FuQ2dCLE9BQU87OztxQkFBUCxPQUFPIiwiZmlsZSI6IkQ6L2FxdWEvZ2Vvd2FyL3NyYy9zdGF0ZXMvUHJlbG9hZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZWxvYWQge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYXNzZXQgPSBudWxsO1xuICAgICAgICB0aGlzLnJlYWR5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJlbG9hZCgpIHtcbiAgICB9XG5cbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIHRoaXMuZ2FtZS5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzI4MjYyNic7XG4gICAgICAgIHRoaXMuYXNzZXQgPSB0aGlzLmFkZC5zcHJpdGUodGhpcy5nYW1lLndpZHRoIC8gMiwgdGhpcy5nYW1lLmhlaWdodCAvIDIsICdwcmVsb2FkZXInKTtcbiAgICAgICAgdGhpcy5hc3NldC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgICAgICB0aGlzLmFzc2V0LnNjYWxlLnNldFRvKDAuMywgMC4zKTtcblxuICAgICAgICB0aGlzLmxvYWQub25Mb2FkQ29tcGxldGUuYWRkT25jZSh0aGlzLm9uTG9hZENvbXBsZXRlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5sb2FkLnNldFByZWxvYWRTcHJpdGUodGhpcy5hc3NldCk7XG5cbiAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdwbGF5JywnYXNzZXRzL2ltYWdlcy9wbGF5LnBuZycpO1xuXG4gICAgICAgIC8vc3RhcnQgbG9hZFxuICAgICAgICB0aGlzLmxvYWQuc3RhcnQoKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG5cbiAgICAgICAgaWYgKHRoaXMucmVhZHkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnc3RhcnRTY3JlZW4nKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgb25Mb2FkQ29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMucmVhZHkgPSB0cnVlO1xuICAgIH1cbn0iXX0=
},{}],17:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, '__esModule', {
    value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var StartScreen = (function () {
    function StartScreen() {
        _classCallCheck(this, StartScreen);
    }

    _createClass(StartScreen, [{
        key: 'create',
        value: function create() {
            this.game.stage.backgroundColor = '#282626';
            this.play = this.add.sprite(this.game.width / 2, this.game.height / 2, 'play');
            this.play.anchor.setTo(0.5, 0.5);
            this.play.scale.setTo(0.3, 0.3);
            this.play.inputEnabled = true;
            this.play.events.onInputDown.add(this.startPlay, this);
            this.play.events.onInputOver.add(this.mouseOver, this);
            this.play.events.onInputOut.add(this.mouseOut, this);
        }
    }, {
        key: 'startPlay',
        value: function startPlay() {
            this.state.start('game');
        }
    }, {
        key: 'mouseOver',
        value: function mouseOver() {
            this.game.canvas.style.cursor = 'pointer';
        }
    }, {
        key: 'mouseOut',
        value: function mouseOut() {
            this.game.canvas.style.cursor = 'default';
        }
    }]);

    return StartScreen;
})();

exports['default'] = StartScreen;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2FxdWEvZ2Vvd2FyL3NyYy9zdGF0ZXMvU3RhcnRTY3JlZW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztJQUFxQixXQUFXO2FBQVgsV0FBVzs4QkFBWCxXQUFXOzs7aUJBQVgsV0FBVzs7ZUFDdEIsa0JBQUc7QUFDTCxnQkFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxHQUFHLFNBQVMsQ0FBQztBQUM1QyxnQkFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQy9FLGdCQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ2pDLGdCQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDLGdCQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7QUFDOUIsZ0JBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN2RCxnQkFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3ZELGdCQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDeEQ7OztlQUVRLHFCQUFHO0FBQ1IsZ0JBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQzVCOzs7ZUFFUSxxQkFBRztBQUNSLGdCQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQztTQUM3Qzs7O2VBRU8sb0JBQUc7QUFDUCxnQkFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUM7U0FDN0M7OztXQXRCZ0IsV0FBVzs7O3FCQUFYLFdBQVciLCJmaWxlIjoiRDovYXF1YS9nZW93YXIvc3JjL3N0YXRlcy9TdGFydFNjcmVlbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0YXJ0U2NyZWVuIHtcbiAgICBjcmVhdGUoKSB7XG4gICAgICAgIHRoaXMuZ2FtZS5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzI4MjYyNic7XG4gICAgICAgIHRoaXMucGxheSA9IHRoaXMuYWRkLnNwcml0ZSh0aGlzLmdhbWUud2lkdGggLyAyLCB0aGlzLmdhbWUuaGVpZ2h0IC8gMiwgJ3BsYXknKTtcbiAgICAgICAgdGhpcy5wbGF5LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgIHRoaXMucGxheS5zY2FsZS5zZXRUbygwLjMsIDAuMyk7XG4gICAgICAgIHRoaXMucGxheS5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnBsYXkuZXZlbnRzLm9uSW5wdXREb3duLmFkZCh0aGlzLnN0YXJ0UGxheSwgdGhpcyk7XG4gICAgICAgIHRoaXMucGxheS5ldmVudHMub25JbnB1dE92ZXIuYWRkKHRoaXMubW91c2VPdmVyLCB0aGlzKTtcbiAgICAgICAgdGhpcy5wbGF5LmV2ZW50cy5vbklucHV0T3V0LmFkZCh0aGlzLm1vdXNlT3V0LCB0aGlzKTtcbiAgICB9XG5cbiAgICBzdGFydFBsYXkoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc3RhcnQoJ2dhbWUnKTtcbiAgICB9XG5cbiAgICBtb3VzZU92ZXIoKSB7XG4gICAgICAgIHRoaXMuZ2FtZS5jYW52YXMuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgIH1cblxuICAgIG1vdXNlT3V0KCkge1xuICAgICAgICB0aGlzLmdhbWUuY2FudmFzLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0JztcbiAgICB9XG5cbn0gIl19
},{}],18:[function(require,module,exports){
module.exports={
    "head": {
        "style": "stroke",
        "ctxProp" : {
            "lineWith" : "2"
        },
        "draw": [
            {
                "drawType": "move",
                "x": "${canvas.height}",
                "y": "${canvas.height/2}"
            },
            {
                "drawType": "line",
                "x": "${canvas.width}",
                "y": "${canvas.height/2}"
            }
        ]
    },
    "body": {
        "style": "fill",
        "draw": [
            {
                "drawType": "move",
                "x": "0",
                "y": "0"
            },
            {
                "drawType": "line",
                "x": "${canvas.height}",
                "y": "${canvas.height/2}"
            },
            {
                "drawType": "line",
                "x": "0",
                "y": "${canvas.height}"
            }
        ]
    }
}
},{}],19:[function(require,module,exports){
module.exports={
    "head": {
        "style": "stroke",
        "ctxProp" : {
            "lineWith" : "2"
        },
        "draw": [
            {
                "drawType": "move",
                "x": "${canvas.height}",
                "y": "${canvas.height/2}"
            },
            {
                "drawType": "line",
                "x": "${canvas.width}",
                "y": "${canvas.height/2}"
            }
        ]
    },
    "body": {
        "style": "fill",
        "draw": [
            {
                "drawType": "arc",
                "x": "15",
                "y": "15",
                "radius" : "14",
                "arc" : "${2 * Math.PI}"
            },
        ]
    }
}
},{}],20:[function(require,module,exports){
module.exports={
    "head": {
        "style": "stroke",
        "ctxProp" : {
            "lineWith" : "2"
        },
        "draw": [
            {
                "drawType": "move",
                "x": "${canvas.height}",
                "y": "${canvas.height/2}"
            },
            {
                "drawType": "line",
                "x": "${canvas.width}",
                "y": "${canvas.height/2}"
            }
        ]
    },
    "body": {
        "style": "fill",
        "draw": [
            {
                "drawType": "move",
                "x": "0",
                "y": "0"
            },
            {
                "drawType": "line",
                "x": "${canvas.height}",
                "y": "0"
            },
            {
                "drawType": "line",
                "x": "${canvas.height}",
                "y": "${canvas.height}"
            },
            {
                "drawType": "line",
                "x": "0",
                "y": "${canvas.height}"
            }
        ]
    }
}
},{}],21:[function(require,module,exports){
module.exports={
    "body": {
        "style": "fill",
        "draw": [
            {
                "drawType": "move",
                "x": "0",
                "y": "0"
            },
            {
                "drawType": "line",
                "x": "12",
                "y": "6"
            },
            {
                "drawType": "line",
                "x": "0",
                "y": "12"
            }
        ]
    }
}
},{}],22:[function(require,module,exports){
module.exports={
    "body": {
        "style": "fill",
        "draw": [
            {
                "drawType": "arc",
                "x": "6",
                "y": "6",
                "radius" : "6",
                "arc" : "${2 * Math.PI}"
            }
        ]
    }
}
},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3Nlci1wYWNrXFxfcHJlbHVkZS5qcyIsInNyYy9hcHAuanMiLCJzcmMvY29tbW9uL0NhbnZhc0hlbHBlci5qcyIsInNyYy9jb21tb24vVXRpbHMuanMiLCJzcmMvcHJlZmFicy9wbGF5ZXJzL0NpcmNsZVBsYXllci5qcyIsInNyYy9wcmVmYWJzL3BsYXllcnMvUGxheWVyLmpzIiwic3JjL3ByZWZhYnMvcGxheWVycy9QbGF5ZXJGYWN0b3J5LmpzIiwic3JjL3ByZWZhYnMvcGxheWVycy9TcXVhcmVQbGF5ZXIuanMiLCJzcmMvcHJlZmFicy93ZWFwb25zL0RpcnRXZWFwb24uanMiLCJzcmMvcHJlZmFicy93ZWFwb25zL1dlYXBvbi5qcyIsInNyYy9wcmVmYWJzL3dlYXBvbnMvV2VhcG9uRmFjdG9yeS5qcyIsInNyYy9zb2NrZXQvQ29ubmVjdGlvbkhhbmRsZXIuanMiLCJzcmMvc29ja2V0L1BsYXllck1vdmVIYW5kbGVyLmpzIiwic3JjL3NvY2tldC9Tb2NrZXRIYW5kbGVyLmpzIiwic3JjL3N0YXRlcy9Cb290LmpzIiwic3JjL3N0YXRlcy9HYW1lLmpzIiwic3JjL3N0YXRlcy9QcmVsb2FkLmpzIiwic3JjL3N0YXRlcy9TdGFydFNjcmVlbi5qcyIsInNyYy90ZXh0dXJlcy9wbGF5ZXJzL1BsYXllci5qc29uIiwic3JjL3RleHR1cmVzL3BsYXllcnMvY2lyY2xlcGxheWVyLmpzb24iLCJzcmMvdGV4dHVyZXMvcGxheWVycy9zcXVhcmVwbGF5ZXIuanNvbiIsInNyYy90ZXh0dXJlcy93ZWFwb25zL2RpcnR3ZWFwb24uanNvbiIsInNyYy90ZXh0dXJlcy93ZWFwb25zL3dlYXBvbi5qc29uIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9HQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbnZhciBfc3RhdGVzQm9vdEpzID0gcmVxdWlyZShcIi4vc3RhdGVzL0Jvb3QuanNcIik7XG5cbnZhciBfc3RhdGVzQm9vdEpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0YXRlc0Jvb3RKcyk7XG5cbnZhciBfc3RhdGVzUHJlbG9hZEpzID0gcmVxdWlyZShcIi4vc3RhdGVzL1ByZWxvYWQuanNcIik7XG5cbnZhciBfc3RhdGVzUHJlbG9hZEpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0YXRlc1ByZWxvYWRKcyk7XG5cbnZhciBfc3RhdGVzU3RhcnRTY3JlZW5KcyA9IHJlcXVpcmUoXCIuL3N0YXRlcy9TdGFydFNjcmVlbi5qc1wiKTtcblxudmFyIF9zdGF0ZXNTdGFydFNjcmVlbkpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0YXRlc1N0YXJ0U2NyZWVuSnMpO1xuXG52YXIgX3N0YXRlc0dhbWVKcyA9IHJlcXVpcmUoXCIuL3N0YXRlcy9HYW1lLmpzXCIpO1xuXG52YXIgX3N0YXRlc0dhbWVKczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdGF0ZXNHYW1lSnMpO1xuXG52YXIgZ2FtZTtcblxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSh3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsIFBoYXNlci5BVVRPLCAnZ2FtZScpO1xuICAgICAgICAgICAgICAgICAgICAgICBnYW1lLnN0YXRlLmFkZCgnYm9vdCcsIF9zdGF0ZXNCb290SnMyW1wiZGVmYXVsdFwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgIGdhbWUuc3RhdGUuYWRkKCdwcmVsb2FkJywgX3N0YXRlc1ByZWxvYWRKczJbXCJkZWZhdWx0XCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5zdGF0ZS5hZGQoJ3N0YXJ0U2NyZWVuJywgX3N0YXRlc1N0YXJ0U2NyZWVuSnMyW1wiZGVmYXVsdFwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgIGdhbWUuc3RhdGUuYWRkKCdnYW1lJywgX3N0YXRlc0dhbWVKczJbXCJkZWZhdWx0XCJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5zdGF0ZS5zdGFydCgnYm9vdCcpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklrUTZMMkZ4ZFdFdloyVnZkMkZ5TDNOeVl5OWhjSEF1YW5NaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWpzN096czBRa0ZGYVVJc2EwSkJRV3RDT3pzN095dENRVU5tTEhGQ1FVRnhRanM3T3p0dFEwRkRha0lzZVVKQlFYbENPenM3T3pSQ1FVTm9ReXhyUWtGQmEwSTdPenM3UVVGTWJrTXNTVUZCU1N4SlFVRkpMRU5CUVVNN08wRkJUMVFzVFVGQlRTeERRVUZETEUxQlFVMHNSMEZCUnl4WlFVRlpPMEZCUXpGQ0xESkNRVUZKTEVkQlFVY3NTVUZCU1N4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFZRVUZWTEVsQlFVa3NVVUZCVVN4RFFVRkRMR1ZCUVdVc1EwRkJReXhYUVVGWExFbEJRVWtzVVVGQlVTeERRVUZETEVsQlFVa3NRMEZCUXl4WFFVRlhMRVZCUTNSR0xFMUJRVTBzUTBGQlF5eFhRVUZYTEVsQlFVa3NVVUZCVVN4RFFVRkRMR1ZCUVdVc1EwRkJReXhaUVVGWkxFbEJRVWtzVVVGQlVTeERRVUZETEVsQlFVa3NRMEZCUXl4WlFVRlpMRVZCUTNwR0xFMUJRVTBzUTBGQlF5eEpRVUZKTEVWQlFVVXNUVUZCVFN4RFFVRkRMRU5CUVVNN1FVRkROVU1zTWtKQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzTkVKQlFVMHNRMEZCUXp0QlFVTTFRaXd5UWtGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1UwRkJVeXdyUWtGQlV5eERRVUZETzBGQlEyeERMREpDUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEVkQlFVY3NRMEZCUXl4aFFVRmhMRzFEUVVGaExFTkJRVU03UVVGRE1VTXNNa0pCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zUjBGQlJ5eERRVUZETEUxQlFVMHNORUpCUVUwc1EwRkJRenRCUVVNMVFpd3lRa0ZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhMUVVGTExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTTdRMEZETVVJc1EwRkJReUlzSW1acGJHVWlPaUpFT2k5aGNYVmhMMmRsYjNkaGNpOXpjbU12WVhCd0xtcHpJaXdpYzI5MWNtTmxjME52Ym5SbGJuUWlPbHNpZG1GeUlHZGhiV1U3WEc1Y2JtbHRjRzl5ZENCQ2IyOTBJR1p5YjIwZ1hDSXVMM04wWVhSbGN5OUNiMjkwTG1welhDSTdYRzVwYlhCdmNuUWdVSEpsYkc5aFpDQm1jbTl0SUZ3aUxpOXpkR0YwWlhNdlVISmxiRzloWkM1cWMxd2lPMXh1YVcxd2IzSjBJRk4wWVhKMFUyTnlaV1Z1SUdaeWIyMGdYQ0l1TDNOMFlYUmxjeTlUZEdGeWRGTmpjbVZsYmk1cWMxd2lPMXh1YVcxd2IzSjBJRWRoYldVZ1puSnZiU0JjSWk0dmMzUmhkR1Z6TDBkaGJXVXVhbk5jSWp0Y2JseHVkMmx1Wkc5M0xtOXViRzloWkNBOUlHWjFibU4wYVc5dUlDZ3BJSHRjYmlBZ1oyRnRaU0E5SUc1bGR5QlFhR0Z6WlhJdVIyRnRaU2gzYVc1a2IzY3VhVzV1WlhKWGFXUjBhQ0I4ZkNCa2IyTjFiV1Z1ZEM1a2IyTjFiV1Z1ZEVWc1pXMWxiblF1WTJ4cFpXNTBWMmxrZEdnZ2ZId2daRzlqZFcxbGJuUXVZbTlrZVM1amJHbGxiblJYYVdSMGFDd2dYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdkMmx1Wkc5M0xtbHVibVZ5U0dWcFoyaDBJSHg4SUdSdlkzVnRaVzUwTG1SdlkzVnRaVzUwUld4bGJXVnVkQzVqYkdsbGJuUklaV2xuYUhRZ2ZId2daRzlqZFcxbGJuUXVZbTlrZVM1amJHbGxiblJJWldsbmFIUXNJRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRkJvWVhObGNpNUJWVlJQTENBbloyRnRaU2NwTzF4dUlDQm5ZVzFsTG5OMFlYUmxMbUZrWkNnblltOXZkQ2NzUW05dmRDazdYRzRnSUdkaGJXVXVjM1JoZEdVdVlXUmtLQ2R3Y21Wc2IyRmtKeXhRY21Wc2IyRmtLVHRjYmlBZ1oyRnRaUzV6ZEdGMFpTNWhaR1FvSjNOMFlYSjBVMk55WldWdUp5eFRkR0Z5ZEZOamNtVmxiaWs3WEc0Z0lHZGhiV1V1YzNSaGRHVXVZV1JrS0NkbllXMWxKeXhIWVcxbEtUdGNiaUFnWjJGdFpTNXpkR0YwWlM1emRHRnlkQ2duWW05dmRDY3BPMXh1ZlR0Y2JpSmRmUT09IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgX1V0aWxzSnMgPSByZXF1aXJlKCcuL1V0aWxzLmpzJyk7XG5cbnZhciBfVXRpbHNKczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9VdGlsc0pzKTtcblxudmFyIENhbnZhc0hlbHBlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2FudmFzSGVscGVyKGNhbnZhcywganNvbiwgY29sb3JTZXQpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbnZhc0hlbHBlcik7XG5cbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgICAgIHRoaXMudGV4dHVyZSA9IGpzb247XG4gICAgICAgIHRoaXMuY29sb3JTZXQgPSBjb2xvclNldDtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ2FudmFzSGVscGVyLCBbe1xuICAgICAgICBrZXk6ICdkcmF3VGV4dHVyZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3VGV4dHVyZSgpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuY3R4O1xuICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy50ZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdHhQcm9wKHRoaXMudGV4dHVyZVtrZXldLmN0eFByb3ApO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy50ZXh0dXJlW2tleV0uZHJhdykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFydCA9IHRoaXMudGV4dHVyZVtrZXldLmRyYXdbaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdGhpcy5wYXJzZUV4cHJlc3MocGFydC54KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB0aGlzLnBhcnNlRXhwcmVzcyhwYXJ0LnkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFydC5kcmF3VHlwZSA9PSAnbW92ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyh4LCB5KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0LmRyYXdUeXBlID09ICdsaW5lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKHgsIHkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQuZHJhd1R5cGUgPT0gJ2FyYycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYWRpdXMgPSB0aGlzLnBhcnNlRXhwcmVzcyhwYXJ0LnJhZGl1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJjID0gdGhpcy5wYXJzZUV4cHJlc3MocGFydC5hcmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguYXJjKHgsIHksIHJhZGl1cywgMCwgYXJjLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGV4dHVyZVtrZXldLnN0eWxlID09ICdzdHJva2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5nZXRDb2xvcihrZXkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGV4dHVyZVtrZXldLnN0eWxlID09ICdmaWxsJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmdldENvbG9yKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZUN0eFByb3AnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQ3R4UHJvcChjdHhQcm9wKSB7XG4gICAgICAgICAgICBpZiAoY3R4UHJvcCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gY3R4UHJvcCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eFtrXSA9IGN0eFByb3Bba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRDb2xvcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb2xvcihrZXkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbG9yU2V0ICYmIHRoaXMuY29sb3JTZXRba2V5XSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbG9yU2V0W2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX1V0aWxzSnMyWydkZWZhdWx0J10uZ2VuZXJhdGVSYW5kb21Db2xvcigpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdwYXJzZUV4cHJlc3MnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VFeHByZXNzKHBvcykge1xuICAgICAgICAgICAgaWYgKGlzTmFOKHBvcykgJiYgL1xcJFxcey4qXFx9Ly50ZXN0KHBvcykpIHtcbiAgICAgICAgICAgICAgICBwb3MgPSBwb3MucmVwbGFjZSgvY2FudmFzLmhlaWdodC9naSwgdGhpcy5jYW52YXMuaGVpZ2h0KS5yZXBsYWNlKC9jYW52YXMud2lkdGgvZ2ksIHRoaXMuY2FudmFzLndpZHRoKTtcbiAgICAgICAgICAgICAgICBwb3MgPSBwb3Muc3Vic3RyaW5nKDIsIHBvcy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICBwb3MgPSBldmFsKHBvcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ2FudmFzSGVscGVyO1xufSkoKTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gQ2FudmFzSGVscGVyO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJa1E2TDJGeGRXRXZaMlZ2ZDJGeUwzTnlZeTlqYjIxdGIyNHZRMkZ1ZG1GelNHVnNjR1Z5TG1weklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lJN096czdPenM3T3pzN096dDFRa0ZCYTBJc1dVRkJXVHM3T3p0SlFVVlVMRmxCUVZrN1FVRkZiRUlzWVVGR1RTeFpRVUZaTEVOQlJXcENMRTFCUVUwc1JVRkJSU3hKUVVGSkxFVkJRVVVzVVVGQlVTeEZRVUZGT3poQ1FVWnVRaXhaUVVGWk96dEJRVWQ2UWl4WlFVRkpMRU5CUVVNc1RVRkJUU3hIUVVGSExFMUJRVTBzUTBGQlF6dEJRVU55UWl4WlFVRkpMRU5CUVVNc1QwRkJUeXhIUVVGSExFbEJRVWtzUTBGQlF6dEJRVU53UWl4WlFVRkpMRU5CUVVNc1VVRkJVU3hIUVVGSExGRkJRVkVzUTBGQlF6dExRVU0xUWpzN2FVSkJUbWRDTEZsQlFWazdPMlZCVVd4Q0xIVkNRVUZITzBGQlExWXNaMEpCUVVrc1EwRkJReXhIUVVGSExFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4SFFVRkhMRU5CUVVNN1FVRkRNMElzWjBKQlFVa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1UwRkJVeXhGUVVGRkxFTkJRVU03UVVGRGNrSXNhVUpCUVVzc1NVRkJTU3hIUVVGSExFbEJRVWtzU1VGQlNTeERRVUZETEU5QlFVOHNSVUZCUlR0QlFVTXhRaXh2UWtGQlNTeERRVUZETEdGQlFXRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRPMEZCUXpsRExIRkNRVUZMTEVsQlFVa3NRMEZCUXl4SlFVRkpMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNTVUZCU1N4RlFVRkZPMEZCUTJ4RExIZENRVUZKTEVsQlFVa3NSMEZCUnl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRCUVVOeVF5eDNRa0ZCU1N4RFFVRkRMRWRCUVVjc1NVRkJTU3hEUVVGRExGbEJRVmtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRiRU1zZDBKQlFVa3NRMEZCUXl4SFFVRkhMRWxCUVVrc1EwRkJReXhaUVVGWkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMEZCUTJ4RExIZENRVUZKTEVsQlFVa3NRMEZCUXl4UlFVRlJMRWxCUVVrc1RVRkJUU3hGUVVGRk8wRkJRM3BDTERSQ1FVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNN2NVSkJRM3BDTEUxQlEwa3NTVUZCU1N4SlFVRkpMRU5CUVVNc1VVRkJVU3hKUVVGSkxFMUJRVTBzUlVGQlJUdEJRVU01UWl3MFFrRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRE8zRkNRVU42UWl4TlFVTkpMRWxCUVVrc1NVRkJTU3hEUVVGRExGRkJRVkVzU1VGQlNTeExRVUZMTEVWQlFVVTdRVUZETjBJc05FSkJRVWtzVFVGQlRTeEhRVUZITEVsQlFVa3NRMEZCUXl4WlFVRlpMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETzBGQlF6VkRMRFJDUVVGSkxFZEJRVWNzUjBGQlJ5eEpRVUZKTEVOQlFVTXNXVUZCV1N4RFFVRkRMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF6dEJRVU4wUXl3MFFrRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSU3hOUVVGTkxFVkJRVVVzUTBGQlF5eEZRVUZGTEVkQlFVY3NSVUZCUlN4TFFVRkxMRU5CUVVNc1EwRkJRenR4UWtGRE4wTTdhVUpCUTBvN1FVRkRSQ3h2UWtGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4VFFVRlRMRVZCUVVVc1EwRkJRenRCUVVOeVFpeHZRa0ZCU1N4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEV0QlFVc3NTVUZCU1N4UlFVRlJMRVZCUVVVN1FVRkRja01zZDBKQlFVa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1YwRkJWeXhIUVVGSExFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNN1FVRkRNVU1zZDBKQlFVa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1RVRkJUU3hGUVVGRkxFTkJRVU03YVVKQlEzSkNMRTFCUTBrc1NVRkJTU3hKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEVkQlFVY3NRMEZCUXl4RFFVRkRMRXRCUVVzc1NVRkJTU3hOUVVGTkxFVkJRVVU3UVVGRGVFTXNkMEpCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zVTBGQlV5eEhRVUZITEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU03UVVGRGVFTXNkMEpCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNTeEZRVUZGTEVOQlFVTTdhVUpCUTI1Q08yRkJRMG83VTBGRFNqczdPMlZCUjFrc2RVSkJRVU1zVDBGQlR5eEZRVUZGTzBGQlEyNUNMR2RDUVVGSkxFOUJRVThzUlVGQlJUdEJRVU5VTEhGQ1FVRkxMRWxCUVVrc1EwRkJReXhKUVVGSkxFOUJRVThzUlVGQlJUdEJRVU51UWl4M1FrRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03YVVKQlF6VkNPMkZCUTBvN1UwRkRTanM3TzJWQlNVOHNhMEpCUVVNc1IwRkJSeXhGUVVGRk8wRkJRMVlzWjBKQlFVa3NTVUZCU1N4RFFVRkRMRkZCUVZFc1NVRkJTU3hKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEVkQlFVY3NRMEZCUXl4RlFVRkZPMEZCUTNKRExIVkNRVUZQTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU03WVVGRE4wSTdRVUZEUkN4dFFrRkJUeXh4UWtGQlRTeHRRa0ZCYlVJc1JVRkJSU3hEUVVGRE8xTkJRM1JET3pzN1pVRkhWeXh6UWtGQlF5eEhRVUZITEVWQlFVVTdRVUZEWkN4blFrRkJTU3hMUVVGTExFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NWVUZCVlN4RFFVRkRMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zUlVGQlJUdEJRVU53UXl4dFFrRkJSeXhIUVVGSExFZEJRVWNzUTBGQlF5eFBRVUZQTEVOQlFVTXNhVUpCUVdsQ0xFVkJRVVVzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhQUVVGUExFTkJRVU1zWjBKQlFXZENMRVZCUVVVc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXp0QlFVTjBSeXh0UWtGQlJ5eEhRVUZITEVkQlFVY3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhGUVVGRkxFZEJRVWNzUTBGQlF5eE5RVUZOTEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRka01zYlVKQlFVY3NSMEZCUnl4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU03UVVGRGFFSXNkVUpCUVU4c1IwRkJSeXhEUVVGRE8yRkJRMlE3UVVGRFJDeHRRa0ZCVHl4SFFVRkhMRU5CUVVFN1UwRkRZanM3TzFkQmNFVm5RaXhaUVVGWk96czdjVUpCUVZvc1dVRkJXU0lzSW1acGJHVWlPaUpFT2k5aGNYVmhMMmRsYjNkaGNpOXpjbU12WTI5dGJXOXVMME5oYm5aaGMwaGxiSEJsY2k1cWN5SXNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbWx0Y0c5eWRDQlZkR2xzY3lCbWNtOXRJQ2N1TDFWMGFXeHpMbXB6Snp0Y2JseHVaWGh3YjNKMElHUmxabUYxYkhRZ1kyeGhjM01nUTJGdWRtRnpTR1ZzY0dWeUlIdGNibHh1SUNBZ0lHTnZibk4wY25WamRHOXlLR05oYm5aaGN5d2dhbk52Yml3Z1kyOXNiM0pUWlhRcElIdGNiaUFnSUNBZ0lDQWdkR2hwY3k1allXNTJZWE1nUFNCallXNTJZWE03WEc0Z0lDQWdJQ0FnSUhSb2FYTXVkR1Y0ZEhWeVpTQTlJR3B6YjI0N1hHNGdJQ0FnSUNBZ0lIUm9hWE11WTI5c2IzSlRaWFFnUFNCamIyeHZjbE5sZER0Y2JpQWdJQ0I5WEc1Y2JpQWdJQ0JrY21GM1ZHVjRkSFZ5WlNncElIdGNiaUFnSUNBZ0lDQWdkR2hwY3k1amRIZ2dQU0IwYUdsekxtTmhiblpoY3k1amRIZzdYRzRnSUNBZ0lDQWdJSFJvYVhNdVkzUjRMbUpsWjJsdVVHRjBhQ2dwTzF4dUlDQWdJQ0FnSUNCbWIzSWdLSFpoY2lCclpYa2dhVzRnZEdocGN5NTBaWGgwZFhKbEtTQjdYRzRnSUNBZ0lDQWdJQ0FnSUNCMGFHbHpMblZ3WkdGMFpVTjBlRkJ5YjNBb2RHaHBjeTUwWlhoMGRYSmxXMnRsZVYwdVkzUjRVSEp2Y0NrN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JtYjNJZ0tIWmhjaUJwSUdsdUlIUm9hWE11ZEdWNGRIVnlaVnRyWlhsZExtUnlZWGNwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCMllYSWdjR0Z5ZENBOUlIUm9hWE11ZEdWNGRIVnlaVnRyWlhsZExtUnlZWGRiYVYwN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2RtRnlJSGdnUFNCMGFHbHpMbkJoY25ObFJYaHdjbVZ6Y3lod1lYSjBMbmdwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUhaaGNpQjVJRDBnZEdocGN5NXdZWEp6WlVWNGNISmxjM01vY0dGeWRDNTVLVHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JwWmlBb2NHRnlkQzVrY21GM1ZIbHdaU0E5UFNBbmJXOTJaU2NwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdkR2hwY3k1amRIZ3ViVzkyWlZSdktIZ3NJSGtwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCbGJITmxJR2xtSUNod1lYSjBMbVJ5WVhkVWVYQmxJRDA5SUNkc2FXNWxKeWtnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQjBhR2x6TG1OMGVDNXNhVzVsVkc4b2VDd2dlU2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUdWc2MyVWdhV1lnS0hCaGNuUXVaSEpoZDFSNWNHVWdQVDBnSjJGeVl5Y3BJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2RtRnlJSEpoWkdsMWN5QTlJSFJvYVhNdWNHRnljMlZGZUhCeVpYTnpLSEJoY25RdWNtRmthWFZ6S1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdkbUZ5SUdGeVl5QTlJSFJvYVhNdWNHRnljMlZGZUhCeVpYTnpLSEJoY25RdVlYSmpLVHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2RHaHBjeTVqZEhndVlYSmpLSGdzSUhrc0lISmhaR2wxY3l3Z01Dd2dZWEpqTENCbVlXeHpaU2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0FnSUNBZ2RHaHBjeTVqZEhndVkyeHZjMlZRWVhSb0tDazdYRzRnSUNBZ0lDQWdJQ0FnSUNCcFppQW9kR2hwY3k1MFpYaDBkWEpsVzJ0bGVWMHVjM1I1YkdVZ1BUMGdKM04wY205clpTY3BJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0IwYUdsekxtTjBlQzV6ZEhKdmEyVlRkSGxzWlNBOUlIUm9hWE11WjJWMFEyOXNiM0lvYTJWNUtUdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQjBhR2x6TG1OMGVDNXpkSEp2YTJVb0tUdGNiaUFnSUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ0lDQWdJR1ZzYzJVZ2FXWWdLSFJvYVhNdWRHVjRkSFZ5WlZ0clpYbGRMbk4wZVd4bElEMDlJQ2RtYVd4c0p5a2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJSFJvYVhNdVkzUjRMbVpwYkd4VGRIbHNaU0E5SUhSb2FYTXVaMlYwUTI5c2IzSW9hMlY1S1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCMGFHbHpMbU4wZUM1bWFXeHNLQ2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQjlYRzVjYmx4dUlDQWdJSFZ3WkdGMFpVTjBlRkJ5YjNBb1kzUjRVSEp2Y0NrZ2UxeHVJQ0FnSUNBZ0lDQnBaaUFvWTNSNFVISnZjQ2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdabTl5SUNoMllYSWdheUJwYmlCamRIaFFjbTl3S1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2RHaHBjeTVqZEhoYmExMGdQU0JqZEhoUWNtOXdXMnRkTzF4dUlDQWdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0I5WEc0Z0lDQWdmVnh1WEc1Y2JseHVJQ0FnSUdkbGRFTnZiRzl5S0d0bGVTa2dlMXh1SUNBZ0lDQWdJQ0JwWmlBb2RHaHBjeTVqYjJ4dmNsTmxkQ0FtSmlCMGFHbHpMbU52Ykc5eVUyVjBXMnRsZVYwcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUhKbGRIVnliaUIwYUdsekxtTnZiRzl5VTJWMFcydGxlVjA3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ2NtVjBkWEp1SUZWMGFXeHpMbWRsYm1WeVlYUmxVbUZ1Wkc5dFEyOXNiM0lvS1R0Y2JpQWdJQ0I5WEc1Y2JseHVJQ0FnSUhCaGNuTmxSWGh3Y21WemN5aHdiM01wSUh0Y2JpQWdJQ0FnSUNBZ2FXWWdLR2x6VG1GT0tIQnZjeWtnSmlZZ0wxeGNKRnhjZXk0cVhGeDlMeTUwWlhOMEtIQnZjeWtwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJSEJ2Y3lBOUlIQnZjeTV5WlhCc1lXTmxLQzlqWVc1MllYTXVhR1ZwWjJoMEwyZHBMQ0IwYUdsekxtTmhiblpoY3k1b1pXbG5hSFFwTG5KbGNHeGhZMlVvTDJOaGJuWmhjeTUzYVdSMGFDOW5hU3dnZEdocGN5NWpZVzUyWVhNdWQybGtkR2dwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdjRzl6SUQwZ2NHOXpMbk4xWW5OMGNtbHVaeWd5TENCd2IzTXViR1Z1WjNSb0lDMGdNU2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQndiM01nUFNCbGRtRnNLSEJ2Y3lrN1hHNGdJQ0FnSUNBZ0lDQWdJQ0J5WlhSMWNtNGdjRzl6TzF4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lISmxkSFZ5YmlCd2IzTmNiaUFnSUNCOVhHNWNibjBpWFgwPSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbnZhciBVdGlscyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVXRpbHMoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVdGlscyk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFV0aWxzLCBudWxsLCBbe1xuICAgICAgICBrZXk6ICdnZW5lcmF0ZVJhbmRvbUNvbG9yJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tQ29sb3IoKSB7XG4gICAgICAgICAgICB2YXIgbGV0dGVycyA9ICcwMTIzNDU2Nzg5QUJDREVGJztcbiAgICAgICAgICAgIHZhciBjb2xvciA9ICcjJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29sb3IgKz0gbGV0dGVyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNildO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFV0aWxzO1xufSkoKTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gVXRpbHM7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklrUTZMMkZ4ZFdFdloyVnZkMkZ5TDNOeVl5OWpiMjF0YjI0dlZYUnBiSE11YW5NaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWpzN096czdPenM3T3p0SlFVRnhRaXhMUVVGTE8yRkJRVXdzUzBGQlN6czRRa0ZCVEN4TFFVRkxPenM3YVVKQlFVd3NTMEZCU3pzN1pVRkRTU3dyUWtGQlJ6dEJRVU42UWl4blFrRkJTU3hQUVVGUExFZEJRVWNzYTBKQlFXdENMRU5CUVVNN1FVRkRha01zWjBKQlFVa3NTMEZCU3l4SFFVRkhMRWRCUVVjc1EwRkJRenRCUVVOb1FpeHBRa0ZCU3l4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFVkJRVVVzUTBGQlF5eEhRVUZITEVOQlFVTXNSVUZCUlN4RFFVRkRMRVZCUVVVc1JVRkJSVHRCUVVONFFpeHhRa0ZCU3l4SlFVRkpMRTlCUVU4c1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRVZCUVVVc1IwRkJSeXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETzJGQlEzQkVPMEZCUTBRc2JVSkJRVThzUzBGQlN5eERRVUZETzFOQlEyaENPenM3VjBGU1owSXNTMEZCU3pzN08zRkNRVUZNTEV0QlFVc2lMQ0ptYVd4bElqb2lSRG92WVhGMVlTOW5aVzkzWVhJdmMzSmpMMk52YlcxdmJpOVZkR2xzY3k1cWN5SXNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJbVY0Y0c5eWRDQmtaV1poZFd4MElHTnNZWE56SUZWMGFXeHpJSHRjYmlBZ0lDQnpkR0YwYVdNZ1oyVnVaWEpoZEdWU1lXNWtiMjFEYjJ4dmNpZ3BJSHRjYmlBZ0lDQWdJQ0FnZG1GeUlHeGxkSFJsY25NZ1BTQW5NREV5TXpRMU5qYzRPVUZDUTBSRlJpYzdYRzRnSUNBZ0lDQWdJSFpoY2lCamIyeHZjaUE5SUNjakp6dGNiaUFnSUNBZ0lDQWdabTl5SUNoMllYSWdhU0E5SURBN0lHa2dQQ0EyT3lCcEt5c3BJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lHTnZiRzl5SUNzOUlHeGxkSFJsY25OYlRXRjBhQzVtYkc5dmNpaE5ZWFJvTG5KaGJtUnZiU2dwSUNvZ01UWXBYVHRjYmlBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnSUNCeVpYUjFjbTRnWTI5c2IzSTdYRzRnSUNBZ2ZWeHVmU0pkZlE9PSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxudmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX1BsYXllckpzID0gcmVxdWlyZSgnLi9QbGF5ZXIuanMnKTtcblxudmFyIF9QbGF5ZXJKczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QbGF5ZXJKcyk7XG5cbnZhciBfY29tbW9uQ2FudmFzSGVscGVySnMgPSByZXF1aXJlKCcuLi8uLi9jb21tb24vQ2FudmFzSGVscGVyLmpzJyk7XG5cbnZhciBfY29tbW9uQ2FudmFzSGVscGVySnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uQ2FudmFzSGVscGVySnMpO1xuXG52YXIgX3RleHR1cmVzUGxheWVyc0NpcmNsZXBsYXllckpzb24gPSByZXF1aXJlKCcuLi8uLi90ZXh0dXJlcy9wbGF5ZXJzL2NpcmNsZXBsYXllci5qc29uJyk7XG5cbnZhciBfdGV4dHVyZXNQbGF5ZXJzQ2lyY2xlcGxheWVySnNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZXh0dXJlc1BsYXllcnNDaXJjbGVwbGF5ZXJKc29uKTtcblxudmFyIENpcmNsZVBsYXllciA9IChmdW5jdGlvbiAoX1BsYXllcikge1xuICAgIF9pbmhlcml0cyhDaXJjbGVQbGF5ZXIsIF9QbGF5ZXIpO1xuXG4gICAgZnVuY3Rpb24gQ2lyY2xlUGxheWVyKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2lyY2xlUGxheWVyKTtcblxuICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihDaXJjbGVQbGF5ZXIucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ2lyY2xlUGxheWVyLCBbe1xuICAgICAgICBrZXk6ICdkcmF3JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoKSB7XG4gICAgICAgICAgICBuZXcgX2NvbW1vbkNhbnZhc0hlbHBlckpzMlsnZGVmYXVsdCddKHRoaXMuY2FudmFzLCBfdGV4dHVyZXNQbGF5ZXJzQ2lyY2xlcGxheWVySnNvbjJbJ2RlZmF1bHQnXSwgdGhpcy5jb2xvclNldCkuZHJhd1RleHR1cmUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncHVzaFN0YXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2hTdGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5nZW93YXIuc29ja2V0SGFuZGxlci5wdXNoKHsgbmFtZTogXCJwbGF5ZXJNb3ZlXCIsIGlkOiB0aGlzLnBsYXllcklkLCB4OiB0aGlzLngsIHk6IHRoaXMueSwgYW5nbGU6IHRoaXMuYW5nbGUsIHR5cGU6IFwiY2lyY2xlXCIsIGNvbG9yU2V0OiB0aGlzLmNvbG9yU2V0IH0pO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENpcmNsZVBsYXllcjtcbn0pKF9QbGF5ZXJKczJbJ2RlZmF1bHQnXSk7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IENpcmNsZVBsYXllcjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWtRNkwyRnhkV0V2WjJWdmQyRnlMM055WXk5d2NtVm1ZV0p6TDNCc1lYbGxjbk12UTJseVkyeGxVR3hoZVdWeUxtcHpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSTdPenM3T3pzN096czdPenM3T3pzN2QwSkJRVzFDTEdGQlFXRTdPenM3YjBOQlExQXNPRUpCUVRoQ096czdPeXREUVVOb1F5d3dRMEZCTUVNN096czdTVUZGTlVNc1dVRkJXVHRqUVVGYUxGbEJRVms3TzJGQlFWb3NXVUZCV1RzNFFrRkJXaXhaUVVGWk96dHRRMEZCV2l4WlFVRlpPenM3YVVKQlFWb3NXVUZCV1RzN1pVRkZla0lzWjBKQlFVYzdRVUZEU0N4clJFRkJhVUlzU1VGQlNTeERRVUZETEUxQlFVMHNaMFJCUVZrc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEZkQlFWY3NSVUZCUlN4RFFVRkRPMU5CUTNoRk96czdaVUZGVVN4eFFrRkJSenRCUVVOU0xHZENRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhoUVVGaExFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNTVUZCU1N4RlFVRkZMRmxCUVZrc1JVRkJSU3hGUVVGRkxFVkJRVVVzU1VGQlNTeERRVUZETEZGQlFWRXNSVUZCUlN4RFFVRkRMRVZCUVVjc1NVRkJTU3hEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVWQlFVY3NTVUZCU1N4RFFVRkRMRU5CUVVNc1JVRkJSU3hMUVVGTExFVkJRVWNzU1VGQlNTeERRVUZETEV0QlFVc3NSVUZCUlN4SlFVRkpMRVZCUVVjc1VVRkJVU3hGUVVGRkxGRkJRVkVzUlVGQlJ5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RlFVRkZMRU5CUVVNc1EwRkJRenRUUVVONlN6czdPMWRCVW1kQ0xGbEJRVms3T3p0eFFrRkJXaXhaUVVGWklpd2labWxzWlNJNklrUTZMMkZ4ZFdFdloyVnZkMkZ5TDNOeVl5OXdjbVZtWVdKekwzQnNZWGxsY25NdlEybHlZMnhsVUd4aGVXVnlMbXB6SWl3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaWFXMXdiM0owSUZCc1lYbGxjaUJtY205dElDY3VMMUJzWVhsbGNpNXFjeWM3WEc1cGJYQnZjblFnUTJGdWRtRnpTR1ZzY0dWeUlHWnliMjBnSnk0dUx5NHVMMk52YlcxdmJpOURZVzUyWVhOSVpXeHdaWEl1YW5Nbk8xeHVhVzF3YjNKMElIQnNZWGxsY2twemIyNGdabkp2YlNBbkxpNHZMaTR2ZEdWNGRIVnlaWE12Y0d4aGVXVnljeTlqYVhKamJHVndiR0Y1WlhJdWFuTnZiaWM3WEc1Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUdOc1lYTnpJRU5wY21Oc1pWQnNZWGxsY2lCbGVIUmxibVJ6SUZCc1lYbGxjaUI3WEc1Y2JpQWdJQ0JrY21GM0tDa2dlMXh1SUNBZ0lDQWdJQ0J1WlhjZ1EyRnVkbUZ6U0dWc2NHVnlLSFJvYVhNdVkyRnVkbUZ6TEhCc1lYbGxja3B6YjI0c2RHaHBjeTVqYjJ4dmNsTmxkQ2t1WkhKaGQxUmxlSFIxY21Vb0tUdGNiaUFnSUNCOVhHNWNiaUFnSUNCd2RYTm9VM1JoZEdVb0tTQjdYRzRnSUNBZ0lDQWdJSFJvYVhNdVoyRnRaUzVuWlc5M1lYSXVjMjlqYTJWMFNHRnVaR3hsY2k1d2RYTm9LSHNnYm1GdFpUb2dYQ0p3YkdGNVpYSk5iM1psWENJc0lHbGtPaUIwYUdsekxuQnNZWGxsY2tsa0xDQjRJRG9nZEdocGN5NTRMQ0I1SURvZ2RHaHBjeTU1TENCaGJtZHNaU0E2SUhSb2FYTXVZVzVuYkdVc0lIUjVjR1VnT2lCY0ltTnBjbU5zWlZ3aUxDQmpiMnh2Y2xObGRDQTZJSFJvYVhNdVkyOXNiM0pUWlhRZ2ZTazdYRzRnSUNBZ2ZWeHVYRzU5SWwxOSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxudmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX2NvbW1vbkNhbnZhc0hlbHBlckpzID0gcmVxdWlyZSgnLi4vLi4vY29tbW9uL0NhbnZhc0hlbHBlci5qcycpO1xuXG52YXIgX2NvbW1vbkNhbnZhc0hlbHBlckpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbW1vbkNhbnZhc0hlbHBlckpzKTtcblxudmFyIF90ZXh0dXJlc1BsYXllcnNQbGF5ZXJKc29uID0gcmVxdWlyZSgnLi4vLi4vdGV4dHVyZXMvcGxheWVycy9QbGF5ZXIuanNvbicpO1xuXG52YXIgX3RleHR1cmVzUGxheWVyc1BsYXllckpzb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGV4dHVyZXNQbGF5ZXJzUGxheWVySnNvbik7XG5cbnZhciBfY29tbW9uVXRpbHNKcyA9IHJlcXVpcmUoJy4uLy4uL2NvbW1vbi9VdGlscy5qcycpO1xuXG52YXIgX2NvbW1vblV0aWxzSnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uVXRpbHNKcyk7XG5cbnZhciBQbGF5ZXIgPSAoZnVuY3Rpb24gKF9QaGFzZXIkU3ByaXRlKSB7XG4gICAgX2luaGVyaXRzKFBsYXllciwgX1BoYXNlciRTcHJpdGUpO1xuXG4gICAgZnVuY3Rpb24gUGxheWVyKGdhbWUsIHgsIHksIHdpZHRoLCBoZWlnaHQsIHdlYXBvbkZhY3RvcnksIGNvbG9yU2V0LCBuZWVkQ29udHJvbCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGxheWVyKTtcblxuICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihQbGF5ZXIucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCBnYW1lLm1ha2UuYml0bWFwRGF0YSh3aWR0aCwgaGVpZ2h0KSk7XG4gICAgICAgIHRoaXMuY2FudmFzID0gdGhpcy5rZXk7XG4gICAgICAgIHRoaXMubmVlZENvbnRyb2wgPSBuZWVkQ29udHJvbDtcbiAgICAgICAgaWYgKGNvbG9yU2V0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbG9yU2V0ID0gY29sb3JTZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbG9yU2V0ID0ge1xuICAgICAgICAgICAgICAgIGhlYWQ6IF9jb21tb25VdGlsc0pzMlsnZGVmYXVsdCddLmdlbmVyYXRlUmFuZG9tQ29sb3IoKSxcbiAgICAgICAgICAgICAgICBib2R5OiBfY29tbW9uVXRpbHNKczJbJ2RlZmF1bHQnXS5nZW5lcmF0ZVJhbmRvbUNvbG9yKClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRyYXcoKTtcblxuICAgICAgICB0aGlzLnNwZWVkID0gMzAwO1xuICAgICAgICB0aGlzLmFuZ2xlID0gLTkwO1xuICAgICAgICB0aGlzLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLmVuYWJsZSh0aGlzLCBQaGFzZXIuUGh5c2ljcy5BUkNBREUpO1xuICAgICAgICB0aGlzLmJvZHkuY29sbGlkZVdvcmxkQm91bmRzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ib2R5LmRyYWcuc2V0KDYwKTtcblxuICAgICAgICB0aGlzLndlYXBvbkZhY3RvcnkgPSB3ZWFwb25GYWN0b3J5O1xuICAgICAgICB0aGlzLmNyZWF0ZVdlYXBvbigpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhQbGF5ZXIsIFt7XG4gICAgICAgIGtleTogJ2RyYXcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdygpIHtcbiAgICAgICAgICAgIG5ldyBfY29tbW9uQ2FudmFzSGVscGVySnMyWydkZWZhdWx0J10odGhpcy5jYW52YXMsIF90ZXh0dXJlc1BsYXllcnNQbGF5ZXJKc29uMlsnZGVmYXVsdCddLCB0aGlzLmNvbG9yU2V0KS5kcmF3VGV4dHVyZSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubmVlZENvbnRyb2wpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJvZHkudmVsb2NpdHkueCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5ib2R5LnZlbG9jaXR5LnkgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuYm9keS5hbmd1bGFyVmVsb2NpdHkgPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5pc0Rvd24oUGhhc2VyLktleWJvYXJkLkxFRlQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keS5hbmd1bGFyVmVsb2NpdHkgPSAtMjAwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmlzRG93bihQaGFzZXIuS2V5Ym9hcmQuUklHSFQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keS5hbmd1bGFyVmVsb2NpdHkgPSAyMDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQuaXNEb3duKFBoYXNlci5LZXlib2FyZC5VUCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLnZlbG9jaXR5RnJvbUFuZ2xlKHRoaXMuYW5nbGUsIDMwMCwgdGhpcy5ib2R5LnZlbG9jaXR5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5pc0Rvd24oUGhhc2VyLktleWJvYXJkLkRPV04pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS52ZWxvY2l0eUZyb21BbmdsZSh0aGlzLmFuZ2xlICsgMTgwLCAzMDAsIHRoaXMuYm9keS52ZWxvY2l0eSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlyZUJ1dHRvbi5pc0Rvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53ZWFwb24uZmlyZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncHVzaFN0YXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2hTdGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5nZW93YXIuc29ja2V0SGFuZGxlci5wdXNoKHsgbmFtZTogXCJwbGF5ZXJNb3ZlXCIsIGlkOiB0aGlzLnBsYXllcklkLCB4OiB0aGlzLngsIHk6IHRoaXMueSwgYW5nbGU6IHRoaXMuYW5nbGUsIHR5cGU6IFwidHJpYW5nbGVcIiwgY29sb3JTZXQ6IHRoaXMuY29sb3JTZXQgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZVdlYXBvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVXZWFwb24oKSB7XG4gICAgICAgICAgICB0aGlzLndlYXBvbiA9IHRoaXMud2VhcG9uRmFjdG9yeS5jcmVhdGVXZWFwb24oJ2RpcnQnKTtcblxuICAgICAgICAgICAgdGhpcy53ZWFwb24udHJhY2tTcHJpdGUodGhpcywgdGhpcy53aWR0aCAvIDIgKyA1LCAwLCB0cnVlKTtcblxuICAgICAgICAgICAgdGhpcy5maXJlQnV0dG9uID0gdGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuS2V5Q29kZS5TUEFDRUJBUik7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUGxheWVyO1xufSkoUGhhc2VyLlNwcml0ZSk7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IFBsYXllcjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWtRNkwyRnhkV0V2WjJWdmQyRnlMM055WXk5d2NtVm1ZV0p6TDNCc1lYbGxjbk12VUd4aGVXVnlMbXB6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUk3T3pzN096czdPenM3T3pzN096czdiME5CUVhsQ0xEaENRVUU0UWpzN096dDVRMEZEYUVNc2IwTkJRVzlET3pzN096WkNRVU42UXl4MVFrRkJkVUk3T3pzN1NVRkZjRUlzVFVGQlRUdGpRVUZPTEUxQlFVMDdPMEZCUlZvc1lVRkdUU3hOUVVGTkxFTkJSVmdzU1VGQlNTeEZRVUZGTEVOQlFVTXNSVUZCUlN4RFFVRkRMRVZCUVVVc1MwRkJTeXhGUVVGRkxFMUJRVTBzUlVGQlJTeGhRVUZoTEVWQlFVVXNVVUZCVVN4RlFVRkZMRmRCUVZjc1JVRkJSVHM0UWtGR05VUXNUVUZCVFRzN1FVRkhia0lzYlVOQlNHRXNUVUZCVFN3MlEwRkhZaXhKUVVGSkxFVkJRVVVzUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlN4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eExRVUZMTEVWQlFVVXNUVUZCVFN4RFFVRkRMRVZCUVVVN1FVRkRka1FzV1VGQlNTeERRVUZETEUxQlFVMHNSMEZCUnl4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRE8wRkJRM1pDTEZsQlFVa3NRMEZCUXl4WFFVRlhMRWRCUVVjc1YwRkJWeXhEUVVGRE8wRkJReTlDTEZsQlFVa3NVVUZCVVN4RlFVRkZPMEZCUTFZc1owSkJRVWtzUTBGQlF5eFJRVUZSTEVkQlFVY3NVVUZCVVN4RFFVRkRPMU5CUXpWQ0xFMUJRMGs3UVVGRFJDeG5Ra0ZCU1N4RFFVRkRMRkZCUVZFc1IwRkJSenRCUVVOYUxHOUNRVUZKTEVWQlFVVXNNa0pCUVUwc2JVSkJRVzFDTEVWQlFVVTdRVUZEYWtNc2IwSkJRVWtzUlVGQlJTd3lRa0ZCVFN4dFFrRkJiVUlzUlVGQlJUdGhRVU53UXl4RFFVRkRPMU5CUTB3N08wRkJSVVFzV1VGQlNTeERRVUZETEVsQlFVa3NSVUZCUlN4RFFVRkRPenRCUVVWYUxGbEJRVWtzUTBGQlF5eExRVUZMTEVkQlFVY3NSMEZCUnl4RFFVRkRPMEZCUTJwQ0xGbEJRVWtzUTBGQlF5eExRVUZMTEVkQlFVY3NRMEZCUXl4RlFVRkZMRU5CUVVNN1FVRkRha0lzV1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhGUVVGRkxFZEJRVWNzUTBGQlF5eERRVUZETzBGQlF6VkNMRmxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRVZCUVVVc1RVRkJUU3hEUVVGRExFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXp0QlFVTjBSQ3haUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEd0Q1FVRnJRaXhIUVVGSExFbEJRVWtzUTBGQlF6dEJRVU53UXl4WlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eEhRVUZITEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNN08wRkJSWFpDTEZsQlFVa3NRMEZCUXl4aFFVRmhMRWRCUVVjc1lVRkJZU3hEUVVGRE8wRkJRMjVETEZsQlFVa3NRMEZCUXl4WlFVRlpMRVZCUVVVc1EwRkJRenRMUVVOMlFqczdhVUpCTTBKblFpeE5RVUZOT3p0bFFUaENia0lzWjBKQlFVYzdRVUZEU0N4clJFRkJhVUlzU1VGQlNTeERRVUZETEUxQlFVMHNNRU5CUVdNc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEZkQlFWY3NSVUZCUlN4RFFVRkRPMU5CUXpGRk96czdaVUZGU3l4clFrRkJSenRCUVVOTUxHZENRVUZKTEVsQlFVa3NRMEZCUXl4WFFVRlhMRVZCUVVVN1FVRkRiRUlzYjBKQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTTdRVUZEZWtJc2IwSkJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU03UVVGRGVrSXNiMEpCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zWlVGQlpTeEhRVUZITEVOQlFVTXNRMEZCUXpzN1FVRkZPVUlzYjBKQlFVa3NTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zVVVGQlVTeERRVUZETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTzBGQlEzWkVMSGRDUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEdWQlFXVXNSMEZCUnl4RFFVRkRMRWRCUVVjc1EwRkJRenRwUWtGRGNFTXNUVUZEU1N4SlFVRkpMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEZGQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTXNSVUZCUlR0QlFVTTNSQ3gzUWtGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4bFFVRmxMRWRCUVVjc1IwRkJSeXhEUVVGRE8ybENRVU51UXp0QlFVTkVMRzlDUVVGSkxFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRkZCUVZFc1EwRkJReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEZGQlFWRXNRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSVHRCUVVOeVJDeDNRa0ZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEdsQ1FVRnBRaXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVWQlFVVXNSMEZCUnl4RlFVRkZMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTTdhVUpCUTI1R0xFMUJRMGtzU1VGQlNTeEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhSUVVGUkxFTkJRVU1zVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4UlFVRlJMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVU3UVVGRE5VUXNkMEpCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4cFFrRkJhVUlzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4SFFVRkhMRWRCUVVjc1JVRkJSU3hIUVVGSExFVkJRVVVzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJRenRwUWtGRGVrWTdPMEZCUlVRc2IwSkJRVWtzU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4TlFVRk5MRVZCUVVVN1FVRkRlRUlzZDBKQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hGUVVGRkxFTkJRVU03YVVKQlEzUkNPMkZCUlVvN08wRkJSVVFzWjBKQlFVa3NRMEZCUXl4VFFVRlRMRVZCUVVVc1EwRkJRenRUUVVOd1FqczdPMlZCUjFFc2NVSkJRVWM3UVVGRFVpeG5Ra0ZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zWVVGQllTeERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRWxCUVVrc1JVRkJSU3haUVVGWkxFVkJRVVVzUlVGQlJTeEZRVUZGTEVsQlFVa3NRMEZCUXl4UlFVRlJMRVZCUVVVc1EwRkJReXhGUVVGRkxFbEJRVWtzUTBGQlF5eERRVUZETEVWQlFVVXNRMEZCUXl4RlFVRkZMRWxCUVVrc1EwRkJReXhEUVVGRExFVkJRVVVzUzBGQlN5eEZRVUZGTEVsQlFVa3NRMEZCUXl4TFFVRkxMRVZCUVVVc1NVRkJTU3hGUVVGRkxGVkJRVlVzUlVGQlJTeFJRVUZSTEVWQlFVVXNTVUZCU1N4RFFVRkRMRkZCUVZFc1JVRkJSU3hEUVVGRExFTkJRVU03VTBGRGRFczdPenRsUVVkWExIZENRVUZITzBGQlExZ3NaMEpCUVVrc1EwRkJReXhOUVVGTkxFZEJRVWNzU1VGQlNTeERRVUZETEdGQlFXRXNRMEZCUXl4WlFVRlpMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU03TzBGQlJYUkVMR2RDUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEZkQlFWY3NRMEZCUXl4SlFVRkpMRVZCUVVVc1NVRkJTU3hEUVVGRExFdEJRVXNzUjBGQlJ5eERRVUZETEVkQlFVY3NRMEZCUXl4RlFVRkZMRU5CUVVNc1JVRkJSU3hKUVVGSkxFTkJRVU1zUTBGQlF6czdRVUZGTTBRc1owSkJRVWtzUTBGQlF5eFZRVUZWTEVkQlFVY3NTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zVVVGQlVTeERRVUZETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1QwRkJUeXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFOQlF6bEZPenM3VjBFeFJXZENMRTFCUVUwN1IwRkJVeXhOUVVGTkxFTkJRVU1zVFVGQlRUczdjVUpCUVRWQ0xFMUJRVTBpTENKbWFXeGxJam9pUkRvdllYRjFZUzluWlc5M1lYSXZjM0pqTDNCeVpXWmhZbk12Y0d4aGVXVnljeTlRYkdGNVpYSXVhbk1pTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lKcGJYQnZjblFnUTJGdWRtRnpTR1ZzY0dWeUlHWnliMjBnSnk0dUx5NHVMMk52YlcxdmJpOURZVzUyWVhOSVpXeHdaWEl1YW5Nbk8xeHVhVzF3YjNKMElIQnNZWGxsY2twemIyNGdabkp2YlNBbkxpNHZMaTR2ZEdWNGRIVnlaWE12Y0d4aGVXVnljeTlRYkdGNVpYSXVhbk52YmljN1hHNXBiWEJ2Y25RZ1ZYUnBiSE1nWm5KdmJTQW5MaTR2TGk0dlkyOXRiVzl1TDFWMGFXeHpMbXB6Snp0Y2JseHVaWGh3YjNKMElHUmxabUYxYkhRZ1kyeGhjM01nVUd4aGVXVnlJR1Y0ZEdWdVpITWdVR2hoYzJWeUxsTndjbWwwWlNCN1hHNWNiaUFnSUNCamIyNXpkSEoxWTNSdmNpaG5ZVzFsTENCNExDQjVMQ0IzYVdSMGFDd2dhR1ZwWjJoMExDQjNaV0Z3YjI1R1lXTjBiM0o1TENCamIyeHZjbE5sZEN3Z2JtVmxaRU52Ym5SeWIyd3BJSHRjYmlBZ0lDQWdJQ0FnYzNWd1pYSW9aMkZ0WlN3Z2VDd2dlU3dnWjJGdFpTNXRZV3RsTG1KcGRHMWhjRVJoZEdFb2QybGtkR2dzSUdobGFXZG9kQ2twTzF4dUlDQWdJQ0FnSUNCMGFHbHpMbU5oYm5aaGN5QTlJSFJvYVhNdWEyVjVPMXh1SUNBZ0lDQWdJQ0IwYUdsekxtNWxaV1JEYjI1MGNtOXNJRDBnYm1WbFpFTnZiblJ5YjJ3N1hHNGdJQ0FnSUNBZ0lHbG1JQ2hqYjJ4dmNsTmxkQ2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdkR2hwY3k1amIyeHZjbE5sZENBOUlHTnZiRzl5VTJWME8xeHVJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnZEdocGN5NWpiMnh2Y2xObGRDQTlJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JvWldGa09pQlZkR2xzY3k1blpXNWxjbUYwWlZKaGJtUnZiVU52Ykc5eUtDa3NYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdZbTlrZVRvZ1ZYUnBiSE11WjJWdVpYSmhkR1ZTWVc1a2IyMURiMnh2Y2lncFhHNGdJQ0FnSUNBZ0lDQWdJQ0I5TzF4dUlDQWdJQ0FnSUNCOVhHNWNiaUFnSUNBZ0lDQWdkR2hwY3k1a2NtRjNLQ2s3WEc1Y2JpQWdJQ0FnSUNBZ2RHaHBjeTV6Y0dWbFpDQTlJRE13TUR0Y2JpQWdJQ0FnSUNBZ2RHaHBjeTVoYm1kc1pTQTlJQzA1TUR0Y2JpQWdJQ0FnSUNBZ2RHaHBjeTVoYm1Ob2IzSXVjMlYwVkc4b01DNDFMQ0F3TGpVcE8xeHVJQ0FnSUNBZ0lDQjBhR2x6TG1kaGJXVXVjR2g1YzJsamN5NWxibUZpYkdVb2RHaHBjeXdnVUdoaGMyVnlMbEJvZVhOcFkzTXVRVkpEUVVSRktUdGNiaUFnSUNBZ0lDQWdkR2hwY3k1aWIyUjVMbU52Ykd4cFpHVlhiM0pzWkVKdmRXNWtjeUE5SUhSeWRXVTdYRzRnSUNBZ0lDQWdJSFJvYVhNdVltOWtlUzVrY21GbkxuTmxkQ2cyTUNrN1hHNWNiaUFnSUNBZ0lDQWdkR2hwY3k1M1pXRndiMjVHWVdOMGIzSjVJRDBnZDJWaGNHOXVSbUZqZEc5eWVUdGNiaUFnSUNBZ0lDQWdkR2hwY3k1amNtVmhkR1ZYWldGd2IyNG9LVHRjYmlBZ0lDQjlYRzVjYmx4dUlDQWdJR1J5WVhjb0tTQjdYRzRnSUNBZ0lDQWdJRzVsZHlCRFlXNTJZWE5JWld4d1pYSW9kR2hwY3k1allXNTJZWE1zSUhCc1lYbGxja3B6YjI0c0lIUm9hWE11WTI5c2IzSlRaWFFwTG1SeVlYZFVaWGgwZFhKbEtDazdYRzRnSUNBZ2ZWeHVYRzRnSUNBZ2RYQmtZWFJsS0NrZ2UxeHVJQ0FnSUNBZ0lDQnBaaUFvZEdocGN5NXVaV1ZrUTI5dWRISnZiQ2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdkR2hwY3k1aWIyUjVMblpsYkc5amFYUjVMbmdnUFNBd08xeHVJQ0FnSUNBZ0lDQWdJQ0FnZEdocGN5NWliMlI1TG5abGJHOWphWFI1TG5rZ1BTQXdPMXh1SUNBZ0lDQWdJQ0FnSUNBZ2RHaHBjeTVpYjJSNUxtRnVaM1ZzWVhKV1pXeHZZMmwwZVNBOUlEQTdYRzVjYmlBZ0lDQWdJQ0FnSUNBZ0lHbG1JQ2gwYUdsekxtZGhiV1V1YVc1d2RYUXVhMlY1WW05aGNtUXVhWE5FYjNkdUtGQm9ZWE5sY2k1TFpYbGliMkZ5WkM1TVJVWlVLU2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUhSb2FYTXVZbTlrZVM1aGJtZDFiR0Z5Vm1Wc2IyTnBkSGtnUFNBdE1qQXdPMXh1SUNBZ0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQWdJQ0FnWld4elpTQnBaaUFvZEdocGN5NW5ZVzFsTG1sdWNIVjBMbXRsZVdKdllYSmtMbWx6Ukc5M2JpaFFhR0Z6WlhJdVMyVjVZbTloY21RdVVrbEhTRlFwS1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2RHaHBjeTVpYjJSNUxtRnVaM1ZzWVhKV1pXeHZZMmwwZVNBOUlESXdNRHRjYmlBZ0lDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdJQ0FnSUdsbUlDaDBhR2x6TG1kaGJXVXVhVzV3ZFhRdWEyVjVZbTloY21RdWFYTkViM2R1S0ZCb1lYTmxjaTVMWlhsaWIyRnlaQzVWVUNrcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQjBhR2x6TG1kaGJXVXVjR2g1YzJsamN5NWhjbU5oWkdVdWRtVnNiMk5wZEhsR2NtOXRRVzVuYkdVb2RHaHBjeTVoYm1kc1pTd2dNekF3TENCMGFHbHpMbUp2WkhrdWRtVnNiMk5wZEhrcE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnSUNBZ0lDQWdaV3h6WlNCcFppQW9kR2hwY3k1bllXMWxMbWx1Y0hWMExtdGxlV0p2WVhKa0xtbHpSRzkzYmloUWFHRnpaWEl1UzJWNVltOWhjbVF1UkU5WFRpa3BJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0IwYUdsekxtZGhiV1V1Y0doNWMybGpjeTVoY21OaFpHVXVkbVZzYjJOcGRIbEdjbTl0UVc1bmJHVW9kR2hwY3k1aGJtZHNaU0FySURFNE1Dd2dNekF3TENCMGFHbHpMbUp2WkhrdWRtVnNiMk5wZEhrcE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnZlZ4dVhHNGdJQ0FnSUNBZ0lDQWdJQ0JwWmlBb2RHaHBjeTVtYVhKbFFuVjBkRzl1TG1selJHOTNiaWtnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUhSb2FYTXVkMlZoY0c5dUxtWnBjbVVvS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJSDFjYmx4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lGeHVJQ0FnSUNBZ0lDQjBhR2x6TG5CMWMyaFRkR0YwWlNncE8xeHVJQ0FnSUgxY2JseHVYRzRnSUNBZ2NIVnphRk4wWVhSbEtDa2dlMXh1SUNBZ0lDQWdJQ0IwYUdsekxtZGhiV1V1WjJWdmQyRnlMbk52WTJ0bGRFaGhibVJzWlhJdWNIVnphQ2g3SUc1aGJXVTZJRndpY0d4aGVXVnlUVzkyWlZ3aUxDQnBaRG9nZEdocGN5NXdiR0Y1WlhKSlpDd2dlRG9nZEdocGN5NTRMQ0I1T2lCMGFHbHpMbmtzSUdGdVoyeGxPaUIwYUdsekxtRnVaMnhsTENCMGVYQmxPaUJjSW5SeWFXRnVaMnhsWENJc0lHTnZiRzl5VTJWME9pQjBhR2x6TG1OdmJHOXlVMlYwSUgwcE8xeHVJQ0FnSUgxY2JseHVYRzRnSUNBZ1kzSmxZWFJsVjJWaGNHOXVLQ2tnZTF4dUlDQWdJQ0FnSUNCMGFHbHpMbmRsWVhCdmJpQTlJSFJvYVhNdWQyVmhjRzl1Um1GamRHOXllUzVqY21WaGRHVlhaV0Z3YjI0b0oyUnBjblFuS1R0Y2JseHVJQ0FnSUNBZ0lDQjBhR2x6TG5kbFlYQnZiaTUwY21GamExTndjbWwwWlNoMGFHbHpMQ0IwYUdsekxuZHBaSFJvSUM4Z01pQXJJRFVzSURBc0lIUnlkV1VwTzF4dVhHNGdJQ0FnSUNBZ0lIUm9hWE11Wm1seVpVSjFkSFJ2YmlBOUlIUm9hWE11WjJGdFpTNXBibkIxZEM1clpYbGliMkZ5WkM1aFpHUkxaWGtvVUdoaGMyVnlMa3RsZVVOdlpHVXVVMUJCUTBWQ1FWSXBPMXh1SUNBZ0lIMWNibHh1ZlNKZGZRPT0iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbnZhciBfUGxheWVySnMgPSByZXF1aXJlKCcuL1BsYXllci5qcycpO1xuXG52YXIgX1BsYXllckpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1BsYXllckpzKTtcblxudmFyIF9TcXVhcmVQbGF5ZXJKcyA9IHJlcXVpcmUoJy4vU3F1YXJlUGxheWVyLmpzJyk7XG5cbnZhciBfU3F1YXJlUGxheWVySnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3F1YXJlUGxheWVySnMpO1xuXG52YXIgX0NpcmNsZVBsYXllckpzID0gcmVxdWlyZSgnLi9DaXJjbGVQbGF5ZXIuanMnKTtcblxudmFyIF9DaXJjbGVQbGF5ZXJKczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DaXJjbGVQbGF5ZXJKcyk7XG5cbnZhciBfd2VhcG9uc1dlYXBvbkZhY3RvcnlKcyA9IHJlcXVpcmUoJy4uL3dlYXBvbnMvV2VhcG9uRmFjdG9yeS5qcycpO1xuXG52YXIgX3dlYXBvbnNXZWFwb25GYWN0b3J5SnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2VhcG9uc1dlYXBvbkZhY3RvcnlKcyk7XG5cbnZhciBfY29tbW9uVXRpbHNKcyA9IHJlcXVpcmUoJy4uLy4uL2NvbW1vbi9VdGlscy5qcycpO1xuXG52YXIgX2NvbW1vblV0aWxzSnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uVXRpbHNKcyk7XG5cbnZhciBQbGF5ZXJGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQbGF5ZXJGYWN0b3J5KGdhbWUpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBsYXllckZhY3RvcnkpO1xuXG4gICAgICAgIHRoaXMuX3BsYXllclR5cGVzID0gWyd0cmlhbmdsZScsICdzcXVhcmUnLCAnY2lyY2xlJ107XG5cbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy53ZWFwb25GYWN0b3J5ID0gbmV3IF93ZWFwb25zV2VhcG9uRmFjdG9yeUpzMlsnZGVmYXVsdCddKGdhbWUpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhQbGF5ZXJGYWN0b3J5LCBbe1xuICAgICAgICBrZXk6ICdjcmVhdGVQbGF5ZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUGxheWVyKGRlZmF1bHRUeXBlKSB7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IGRlZmF1bHRUeXBlO1xuICAgICAgICAgICAgaWYgKCF0eXBlKSB7XG4gICAgICAgICAgICAgICAgdHlwZSA9IHRoaXMuX3BsYXllclR5cGVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuX3BsYXllclR5cGVzLmxlbmd0aCldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInRyaWFuZ2xlXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgX1BsYXllckpzMlsnZGVmYXVsdCddKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiwgdGhpcy5nYW1lLmhlaWdodCAvIDIsIDM1LCAzMCwgdGhpcy53ZWFwb25GYWN0b3J5LCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjYXNlIFwic3F1YXJlXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgX1NxdWFyZVBsYXllckpzMlsnZGVmYXVsdCddKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiwgdGhpcy5nYW1lLmhlaWdodCAvIDIsIDM1LCAzMCwgdGhpcy53ZWFwb25GYWN0b3J5LCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2lyY2xlXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgX0NpcmNsZVBsYXllckpzMlsnZGVmYXVsdCddKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiwgdGhpcy5nYW1lLmhlaWdodCAvIDIsIDM1LCAzMCwgdGhpcy53ZWFwb25GYWN0b3J5LCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IF9QbGF5ZXJKczJbJ2RlZmF1bHQnXSh0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyLCAzNSwgMzAsIHRoaXMud2VhcG9uRmFjdG9yeSwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZVBlZXJQbGF5ZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlUGVlclBsYXllcihwZWVyTWV0YURhdGEpIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gcGVlck1ldGFEYXRhLnR5cGU7XG4gICAgICAgICAgICB2YXIgcGxheWVyID0gbnVsbDtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmlhbmdsZVwiOlxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIgPSBuZXcgX1BsYXllckpzMlsnZGVmYXVsdCddKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiwgdGhpcy5nYW1lLmhlaWdodCAvIDIsIDM1LCAzMCwgdGhpcy53ZWFwb25GYWN0b3J5LCBwZWVyTWV0YURhdGEuY29sb3JTZXQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNxdWFyZVwiOlxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIgPSBuZXcgX1NxdWFyZVBsYXllckpzMlsnZGVmYXVsdCddKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiwgdGhpcy5nYW1lLmhlaWdodCAvIDIsIDM1LCAzMCwgdGhpcy53ZWFwb25GYWN0b3J5LCBwZWVyTWV0YURhdGEuY29sb3JTZXQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNpcmNsZVwiOlxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIgPSBuZXcgX0NpcmNsZVBsYXllckpzMlsnZGVmYXVsdCddKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiwgdGhpcy5nYW1lLmhlaWdodCAvIDIsIDM1LCAzMCwgdGhpcy53ZWFwb25GYWN0b3J5LCBwZWVyTWV0YURhdGEuY29sb3JTZXQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyID0gbmV3IF9QbGF5ZXJKczJbJ2RlZmF1bHQnXSh0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyLCAzNSwgMzAsIHRoaXMud2VhcG9uRmFjdG9yeSwgcGVlck1ldGFEYXRhLmNvbG9yU2V0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGxheWVyLnBsYXllcklkID0gcGVlck1ldGFEYXRhLmlkO1xuICAgICAgICAgICAgcmV0dXJuIHBsYXllcjtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBQbGF5ZXJGYWN0b3J5O1xufSkoKTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gUGxheWVyRmFjdG9yeTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWtRNkwyRnhkV0V2WjJWdmQyRnlMM055WXk5d2NtVm1ZV0p6TDNCc1lYbGxjbk12VUd4aGVXVnlSbUZqZEc5eWVTNXFjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lPenM3T3pzN096czdPenM3ZDBKQlFXMUNMR0ZCUVdFN096czdPRUpCUTFBc2JVSkJRVzFDT3pzN096aENRVU51UWl4dFFrRkJiVUk3T3pzN2MwTkJRMnhDTERaQ1FVRTJRanM3T3pzMlFrRkRja01zZFVKQlFYVkNPenM3TzBsQlJYQkNMR0ZCUVdFN1FVRkpia0lzWVVGS1RTeGhRVUZoTEVOQlNXeENMRWxCUVVrc1JVRkJSVHM0UWtGS1JDeGhRVUZoT3p0aFFVVTVRaXhaUVVGWkxFZEJRVWNzUTBGQlF5eFZRVUZWTEVWQlFVVXNVVUZCVVN4RlFVRkZMRkZCUVZFc1EwRkJRenM3UVVGSE0wTXNXVUZCU1N4RFFVRkRMRWxCUVVrc1IwRkJSeXhKUVVGSkxFTkJRVU03UVVGRGFrSXNXVUZCU1N4RFFVRkRMR0ZCUVdFc1IwRkJSeXgzUTBGQmEwSXNTVUZCU1N4RFFVRkRMRU5CUVVNN1MwRkRhRVE3TzJsQ1FWQm5RaXhoUVVGaE96dGxRVk5zUWl4elFrRkJReXhYUVVGWExFVkJRVVU3UVVGRGRFSXNaMEpCUVVrc1NVRkJTU3hIUVVGSExGZEJRVmNzUTBGQlF6dEJRVU4yUWl4blFrRkJTU3hEUVVGRExFbEJRVWtzUlVGQlJUdEJRVU5RTEc5Q1FVRkpMRWRCUVVjc1NVRkJTU3hEUVVGRExGbEJRVmtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFVkJRVVVzUjBGQlJ5eEpRVUZKTEVOQlFVTXNXVUZCV1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU03WVVGRGJFWTdRVUZEUkN4dlFrRkJVU3hKUVVGSk8wRkJRMUlzY1VKQlFVc3NWVUZCVlR0QlFVTllMREpDUVVGUExEQkNRVUZYTEVsQlFVa3NRMEZCUXl4SlFVRkpMRVZCUVVVc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVkQlFVY3NRMEZCUXl4RlFVRkZMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeEhRVUZITEVOQlFVTXNSVUZCUlN4RlFVRkZMRVZCUVVVc1JVRkJSU3hGUVVGRkxFbEJRVWtzUTBGQlF5eGhRVUZoTEVWQlFVVXNTVUZCU1N4RlFVRkZMRWxCUVVrc1EwRkJReXhEUVVGRE8wRkJRVUVzUVVGRGNFZ3NjVUpCUVVzc1VVRkJVVHRCUVVOVUxESkNRVUZQTEdkRFFVRnBRaXhKUVVGSkxFTkJRVU1zU1VGQlNTeEZRVUZGTEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExFTkJRVU1zUlVGQlJTeEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1IwRkJSeXhEUVVGRExFVkJRVVVzUlVGQlJTeEZRVUZGTEVWQlFVVXNSVUZCUlN4SlFVRkpMRU5CUVVNc1lVRkJZU3hGUVVGRkxFbEJRVWtzUlVGQlJTeEpRVUZKTEVOQlFVTXNRMEZCUXp0QlFVRkJMRUZCUXpGSUxIRkNRVUZMTEZGQlFWRTdRVUZEVkN3eVFrRkJUeXhuUTBGQmFVSXNTVUZCU1N4RFFVRkRMRWxCUVVrc1JVRkJSU3hKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NSMEZCUnl4RFFVRkRMRVZCUVVVc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVkQlFVY3NRMEZCUXl4RlFVRkZMRVZCUVVVc1JVRkJSU3hGUVVGRkxFVkJRVVVzU1VGQlNTeERRVUZETEdGQlFXRXNSVUZCUlN4SlFVRkpMRVZCUVVVc1NVRkJTU3hEUVVGRExFTkJRVU03UVVGQlFTeEJRVU14U0R0QlFVTkpMREpDUVVGUExEQkNRVUZYTEVsQlFVa3NRMEZCUXl4SlFVRkpMRVZCUVVVc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVkQlFVY3NRMEZCUXl4RlFVRkZMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeEhRVUZITEVOQlFVTXNSVUZCUlN4RlFVRkZMRVZCUVVVc1JVRkJSU3hGUVVGRkxFbEJRVWtzUTBGQlF5eGhRVUZoTEVWQlFVVXNTVUZCU1N4RlFVRkZMRWxCUVVrc1EwRkJReXhEUVVGRE8wRkJRVUVzWVVGRGRrZzdVMEZEU2pzN08yVkJSMlVzTUVKQlFVTXNXVUZCV1N4RlFVRkRPMEZCUXpOQ0xHZENRVUZKTEVsQlFVa3NSMEZCUnl4WlFVRlpMRU5CUVVNc1NVRkJTU3hEUVVGRE8wRkJRemRDTEdkQ1FVRkpMRTFCUVUwc1IwRkJSeXhKUVVGSkxFTkJRVU03UVVGRGJFSXNiMEpCUVZFc1NVRkJTVHRCUVVOUUxIRkNRVUZMTEZWQlFWVTdRVUZEV0N3d1FrRkJUU3hIUVVGSExEQkNRVUZYTEVsQlFVa3NRMEZCUXl4SlFVRkpMRVZCUVVVc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVkQlFVY3NRMEZCUXl4RlFVRkZMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeEhRVUZITEVOQlFVTXNSVUZCUlN4RlFVRkZMRVZCUVVVc1JVRkJSU3hGUVVGRkxFbEJRVWtzUTBGQlF5eGhRVUZoTEVWQlFVVXNXVUZCV1N4RFFVRkRMRkZCUVZFc1JVRkJSU3hMUVVGTExFTkJRVU1zUTBGQlF6dEJRVU53U1N3d1FrRkJUVHRCUVVGQkxFRkJRMVlzY1VKQlFVc3NVVUZCVVR0QlFVTlVMREJDUVVGTkxFZEJRVWNzWjBOQlFXbENMRWxCUVVrc1EwRkJReXhKUVVGSkxFVkJRVVVzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkxMRWRCUVVjc1EwRkJReXhGUVVGRkxFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SFFVRkhMRU5CUVVNc1JVRkJSU3hGUVVGRkxFVkJRVVVzUlVGQlJTeEZRVUZGTEVsQlFVa3NRMEZCUXl4aFFVRmhMRVZCUVVVc1dVRkJXU3hEUVVGRExGRkJRVkVzUlVGQlJTeExRVUZMTEVOQlFVTXNRMEZCUXp0QlFVTXhTU3d3UWtGQlRUdEJRVUZCTEVGQlExWXNjVUpCUVVzc1VVRkJVVHRCUVVOVUxEQkNRVUZOTEVkQlFVY3NaME5CUVdsQ0xFbEJRVWtzUTBGQlF5eEpRVUZKTEVWQlFVVXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFZEJRVWNzUTBGQlF5eEZRVUZGTEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hIUVVGSExFTkJRVU1zUlVGQlJTeEZRVUZGTEVWQlFVVXNSVUZCUlN4RlFVRkZMRWxCUVVrc1EwRkJReXhoUVVGaExFVkJRVVVzV1VGQldTeERRVUZETEZGQlFWRXNSVUZCUlN4TFFVRkxMRU5CUVVNc1EwRkJRenRCUVVNeFNTd3dRa0ZCVFR0QlFVRkJMRUZCUTFZN1FVRkRTU3d3UWtGQlRTeEhRVUZITERCQ1FVRlhMRWxCUVVrc1EwRkJReXhKUVVGSkxFVkJRVVVzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkxMRWRCUVVjc1EwRkJReXhGUVVGRkxFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SFFVRkhMRU5CUVVNc1JVRkJSU3hGUVVGRkxFVkJRVVVzUlVGQlJTeEZRVUZGTEVsQlFVa3NRMEZCUXl4aFFVRmhMRVZCUVVVc1dVRkJXU3hEUVVGRExGRkJRVkVzUlVGQlJTeExRVUZMTEVOQlFVTXNRMEZCUXp0QlFVTndTU3d3UWtGQlRUdEJRVUZCTEdGQlEySTdRVUZEUkN4clFrRkJUU3hEUVVGRExGRkJRVkVzUjBGQlJ5eFpRVUZaTEVOQlFVTXNSVUZCUlN4RFFVRkRPMEZCUTJ4RExHMUNRVUZQTEUxQlFVMHNRMEZCUXp0VFFVTnFRanM3TzFkQk9VTm5RaXhoUVVGaE96czdjVUpCUVdJc1lVRkJZU0lzSW1acGJHVWlPaUpFT2k5aGNYVmhMMmRsYjNkaGNpOXpjbU12Y0hKbFptRmljeTl3YkdGNVpYSnpMMUJzWVhsbGNrWmhZM1J2Y25rdWFuTWlMQ0p6YjNWeVkyVnpRMjl1ZEdWdWRDSTZXeUpwYlhCdmNuUWdVR3hoZVdWeUlHWnliMjBnSnk0dlVHeGhlV1Z5TG1wekp6dGNibWx0Y0c5eWRDQlRjWFZoY21WUWJHRjVaWElnWm5KdmJTQW5MaTlUY1hWaGNtVlFiR0Y1WlhJdWFuTW5PMXh1YVcxd2IzSjBJRU5wY21Oc1pWQnNZWGxsY2lCbWNtOXRJQ2N1TDBOcGNtTnNaVkJzWVhsbGNpNXFjeWM3WEc1cGJYQnZjblFnVjJWaGNHOXVSbUZqZEc5eWVTQm1jbTl0SUNjdUxpOTNaV0Z3YjI1ekwxZGxZWEJ2YmtaaFkzUnZjbmt1YW5Nbk8xeHVhVzF3YjNKMElGVjBhV3h6SUdaeWIyMGdKeTR1THk0dUwyTnZiVzF2Ymk5VmRHbHNjeTVxY3ljN1hHNWNibVY0Y0c5eWRDQmtaV1poZFd4MElHTnNZWE56SUZCc1lYbGxja1poWTNSdmNua2dlMXh1WEc0Z0lDQWdYM0JzWVhsbGNsUjVjR1Z6SUQwZ1d5ZDBjbWxoYm1kc1pTY3NJQ2R6Y1hWaGNtVW5MQ0FuWTJseVkyeGxKMTA3WEc1Y2JpQWdJQ0JqYjI1emRISjFZM1J2Y2lobllXMWxLU0I3WEc0Z0lDQWdJQ0FnSUhSb2FYTXVaMkZ0WlNBOUlHZGhiV1U3WEc0Z0lDQWdJQ0FnSUhSb2FYTXVkMlZoY0c5dVJtRmpkRzl5ZVNBOUlHNWxkeUJYWldGd2IyNUdZV04wYjNKNUtHZGhiV1VwTzF4dUlDQWdJSDFjYmx4dUlDQWdJR055WldGMFpWQnNZWGxsY2loa1pXWmhkV3gwVkhsd1pTa2dlMXh1SUNBZ0lDQWdJQ0IyWVhJZ2RIbHdaU0E5SUdSbFptRjFiSFJVZVhCbE8xeHVJQ0FnSUNBZ0lDQnBaaUFvSVhSNWNHVXBJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lIUjVjR1VnUFNCMGFHbHpMbDl3YkdGNVpYSlVlWEJsYzF0TllYUm9MbVpzYjI5eUtFMWhkR2d1Y21GdVpHOXRLQ2tnS2lCMGFHbHpMbDl3YkdGNVpYSlVlWEJsY3k1c1pXNW5kR2dwWFR0Y2JpQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQnpkMmwwWTJnZ0tIUjVjR1VwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJR05oYzJVZ1hDSjBjbWxoYm1kc1pWd2lPbHh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJSEpsZEhWeWJpQnVaWGNnVUd4aGVXVnlLSFJvYVhNdVoyRnRaU3dnZEdocGN5NW5ZVzFsTG5kcFpIUm9JQzhnTWl3Z2RHaHBjeTVuWVcxbExtaGxhV2RvZENBdklESXNJRE0xTENBek1Dd2dkR2hwY3k1M1pXRndiMjVHWVdOMGIzSjVMQ0J1ZFd4c0xDQjBjblZsS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJR05oYzJVZ1hDSnpjWFZoY21WY0lqcGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQnlaWFIxY200Z2JtVjNJRk54ZFdGeVpWQnNZWGxsY2loMGFHbHpMbWRoYldVc0lIUm9hWE11WjJGdFpTNTNhV1IwYUNBdklESXNJSFJvYVhNdVoyRnRaUzVvWldsbmFIUWdMeUF5TENBek5Td2dNekFzSUhSb2FYTXVkMlZoY0c5dVJtRmpkRzl5ZVN3Z2JuVnNiQ3dnZEhKMVpTazdYRzRnSUNBZ0lDQWdJQ0FnSUNCallYTmxJRndpWTJseVkyeGxYQ0k2WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnY21WMGRYSnVJRzVsZHlCRGFYSmpiR1ZRYkdGNVpYSW9kR2hwY3k1bllXMWxMQ0IwYUdsekxtZGhiV1V1ZDJsa2RHZ2dMeUF5TENCMGFHbHpMbWRoYldVdWFHVnBaMmgwSUM4Z01pd2dNelVzSURNd0xDQjBhR2x6TG5kbFlYQnZia1poWTNSdmNua3NJRzUxYkd3c0lIUnlkV1VwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdaR1ZtWVhWc2REcGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQnlaWFIxY200Z2JtVjNJRkJzWVhsbGNpaDBhR2x6TG1kaGJXVXNJSFJvYVhNdVoyRnRaUzUzYVdSMGFDQXZJRElzSUhSb2FYTXVaMkZ0WlM1b1pXbG5hSFFnTHlBeUxDQXpOU3dnTXpBc0lIUm9hWE11ZDJWaGNHOXVSbUZqZEc5eWVTd2diblZzYkN3Z2RISjFaU2s3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0I5WEc1Y2JseHVJQ0FnSUdOeVpXRjBaVkJsWlhKUWJHRjVaWElvY0dWbGNrMWxkR0ZFWVhSaEtYdGNiaUFnSUNBZ0lDQjJZWElnZEhsd1pTQTlJSEJsWlhKTlpYUmhSR0YwWVM1MGVYQmxPMXh1SUNBZ0lDQWdJSFpoY2lCd2JHRjVaWElnUFNCdWRXeHNPMXh1SUNBZ0lDQWdJSE4zYVhSamFDQW9kSGx3WlNrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnWTJGelpTQmNJblJ5YVdGdVoyeGxYQ0k2WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnY0d4aGVXVnlJRDBnYm1WM0lGQnNZWGxsY2loMGFHbHpMbWRoYldVc0lIUm9hWE11WjJGdFpTNTNhV1IwYUNBdklESXNJSFJvYVhNdVoyRnRaUzVvWldsbmFIUWdMeUF5TENBek5Td2dNekFzSUhSb2FYTXVkMlZoY0c5dVJtRmpkRzl5ZVN3Z2NHVmxjazFsZEdGRVlYUmhMbU52Ykc5eVUyVjBMQ0JtWVd4elpTazdYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdZbkpsWVdzN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JqWVhObElGd2ljM0YxWVhKbFhDSTZYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdjR3hoZVdWeUlEMGdibVYzSUZOeGRXRnlaVkJzWVhsbGNpaDBhR2x6TG1kaGJXVXNJSFJvYVhNdVoyRnRaUzUzYVdSMGFDQXZJRElzSUhSb2FYTXVaMkZ0WlM1b1pXbG5hSFFnTHlBeUxDQXpOU3dnTXpBc0lIUm9hWE11ZDJWaGNHOXVSbUZqZEc5eWVTd2djR1ZsY2sxbGRHRkVZWFJoTG1OdmJHOXlVMlYwTENCbVlXeHpaU2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnWW5KbFlXczdYRzRnSUNBZ0lDQWdJQ0FnSUNCallYTmxJRndpWTJseVkyeGxYQ0k2WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnY0d4aGVXVnlJRDBnYm1WM0lFTnBjbU5zWlZCc1lYbGxjaWgwYUdsekxtZGhiV1VzSUhSb2FYTXVaMkZ0WlM1M2FXUjBhQ0F2SURJc0lIUm9hWE11WjJGdFpTNW9aV2xuYUhRZ0x5QXlMQ0F6TlN3Z016QXNJSFJvYVhNdWQyVmhjRzl1Um1GamRHOXllU3dnY0dWbGNrMWxkR0ZFWVhSaExtTnZiRzl5VTJWMExDQm1ZV3h6WlNrN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1luSmxZV3M3WEc0Z0lDQWdJQ0FnSUNBZ0lDQmtaV1poZFd4ME9seHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lIQnNZWGxsY2lBOUlHNWxkeUJRYkdGNVpYSW9kR2hwY3k1bllXMWxMQ0IwYUdsekxtZGhiV1V1ZDJsa2RHZ2dMeUF5TENCMGFHbHpMbWRoYldVdWFHVnBaMmgwSUM4Z01pd2dNelVzSURNd0xDQjBhR2x6TG5kbFlYQnZia1poWTNSdmNua3NJSEJsWlhKTlpYUmhSR0YwWVM1amIyeHZjbE5sZEN3Z1ptRnNjMlVwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUdKeVpXRnJPMXh1SUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUhCc1lYbGxjaTV3YkdGNVpYSkpaQ0E5SUhCbFpYSk5aWFJoUkdGMFlTNXBaRHRjYmlBZ0lDQWdJQ0FnY21WMGRYSnVJSEJzWVhsbGNqdGNiaUFnSUNCOVhHNWNibjBpWFgwPSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxudmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX1BsYXllckpzID0gcmVxdWlyZSgnLi9QbGF5ZXIuanMnKTtcblxudmFyIF9QbGF5ZXJKczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9QbGF5ZXJKcyk7XG5cbnZhciBfY29tbW9uQ2FudmFzSGVscGVySnMgPSByZXF1aXJlKCcuLi8uLi9jb21tb24vQ2FudmFzSGVscGVyLmpzJyk7XG5cbnZhciBfY29tbW9uQ2FudmFzSGVscGVySnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uQ2FudmFzSGVscGVySnMpO1xuXG52YXIgX3RleHR1cmVzUGxheWVyc1NxdWFyZXBsYXllckpzb24gPSByZXF1aXJlKCcuLi8uLi90ZXh0dXJlcy9wbGF5ZXJzL3NxdWFyZXBsYXllci5qc29uJyk7XG5cbnZhciBfdGV4dHVyZXNQbGF5ZXJzU3F1YXJlcGxheWVySnNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZXh0dXJlc1BsYXllcnNTcXVhcmVwbGF5ZXJKc29uKTtcblxudmFyIFNxdWFyZVBsYXllciA9IChmdW5jdGlvbiAoX1BsYXllcikge1xuICAgIF9pbmhlcml0cyhTcXVhcmVQbGF5ZXIsIF9QbGF5ZXIpO1xuXG4gICAgZnVuY3Rpb24gU3F1YXJlUGxheWVyKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3F1YXJlUGxheWVyKTtcblxuICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihTcXVhcmVQbGF5ZXIucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU3F1YXJlUGxheWVyLCBbe1xuICAgICAgICBrZXk6ICdkcmF3JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoKSB7XG4gICAgICAgICAgICBuZXcgX2NvbW1vbkNhbnZhc0hlbHBlckpzMlsnZGVmYXVsdCddKHRoaXMuY2FudmFzLCBfdGV4dHVyZXNQbGF5ZXJzU3F1YXJlcGxheWVySnNvbjJbJ2RlZmF1bHQnXSwgdGhpcy5jb2xvclNldCkuZHJhd1RleHR1cmUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncHVzaFN0YXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2hTdGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5nZW93YXIuc29ja2V0SGFuZGxlci5wdXNoKHsgbmFtZTogXCJwbGF5ZXJNb3ZlXCIsIGlkOiB0aGlzLnBsYXllcklkLCB4OiB0aGlzLngsIHk6IHRoaXMueSwgYW5nbGU6IHRoaXMuYW5nbGUsIHR5cGU6IFwic3F1YXJlXCIsIGNvbG9yU2V0OiB0aGlzLmNvbG9yU2V0IH0pO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNxdWFyZVBsYXllcjtcbn0pKF9QbGF5ZXJKczJbJ2RlZmF1bHQnXSk7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IFNxdWFyZVBsYXllcjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWtRNkwyRnhkV0V2WjJWdmQyRnlMM055WXk5d2NtVm1ZV0p6TDNCc1lYbGxjbk12VTNGMVlYSmxVR3hoZVdWeUxtcHpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSTdPenM3T3pzN096czdPenM3T3pzN2QwSkJRVzFDTEdGQlFXRTdPenM3YjBOQlExQXNPRUpCUVRoQ096czdPeXREUVVOb1F5d3dRMEZCTUVNN096czdTVUZGTlVNc1dVRkJXVHRqUVVGYUxGbEJRVms3TzJGQlFWb3NXVUZCV1RzNFFrRkJXaXhaUVVGWk96dHRRMEZCV2l4WlFVRlpPenM3YVVKQlFWb3NXVUZCV1RzN1pVRkZla0lzWjBKQlFVYzdRVUZEU0N4clJFRkJhVUlzU1VGQlNTeERRVUZETEUxQlFVMHNaMFJCUVZrc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEZkQlFWY3NSVUZCUlN4RFFVRkRPMU5CUTNoRk96czdaVUZGVVN4eFFrRkJSenRCUVVOU0xHZENRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhoUVVGaExFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNTVUZCU1N4RlFVRkZMRmxCUVZrc1JVRkJSU3hGUVVGRkxFVkJRVVVzU1VGQlNTeERRVUZETEZGQlFWRXNSVUZCUlN4RFFVRkRMRVZCUVVjc1NVRkJTU3hEUVVGRExFTkJRVU1zUlVGQlJTeERRVUZETEVWQlFVY3NTVUZCU1N4RFFVRkRMRU5CUVVNc1JVRkJSU3hMUVVGTExFVkJRVWNzU1VGQlNTeERRVUZETEV0QlFVc3NSVUZCUlN4SlFVRkpMRVZCUVVjc1VVRkJVU3hGUVVGRkxGRkJRVkVzUlVGQlJ5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RlFVRkZMRU5CUVVNc1EwRkJRenRUUVVONlN6czdPMWRCVW1kQ0xGbEJRVms3T3p0eFFrRkJXaXhaUVVGWklpd2labWxzWlNJNklrUTZMMkZ4ZFdFdloyVnZkMkZ5TDNOeVl5OXdjbVZtWVdKekwzQnNZWGxsY25NdlUzRjFZWEpsVUd4aGVXVnlMbXB6SWl3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaWFXMXdiM0owSUZCc1lYbGxjaUJtY205dElDY3VMMUJzWVhsbGNpNXFjeWM3WEc1cGJYQnZjblFnUTJGdWRtRnpTR1ZzY0dWeUlHWnliMjBnSnk0dUx5NHVMMk52YlcxdmJpOURZVzUyWVhOSVpXeHdaWEl1YW5Nbk8xeHVhVzF3YjNKMElIQnNZWGxsY2twemIyNGdabkp2YlNBbkxpNHZMaTR2ZEdWNGRIVnlaWE12Y0d4aGVXVnljeTl6Y1hWaGNtVndiR0Y1WlhJdWFuTnZiaWM3WEc1Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUdOc1lYTnpJRk54ZFdGeVpWQnNZWGxsY2lCbGVIUmxibVJ6SUZCc1lYbGxjaUI3WEc1Y2JpQWdJQ0JrY21GM0tDa2dlMXh1SUNBZ0lDQWdJQ0J1WlhjZ1EyRnVkbUZ6U0dWc2NHVnlLSFJvYVhNdVkyRnVkbUZ6TEhCc1lYbGxja3B6YjI0c2RHaHBjeTVqYjJ4dmNsTmxkQ2t1WkhKaGQxUmxlSFIxY21Vb0tUdGNiaUFnSUNCOVhHNWNiaUFnSUNCd2RYTm9VM1JoZEdVb0tTQjdYRzRnSUNBZ0lDQWdJSFJvYVhNdVoyRnRaUzVuWlc5M1lYSXVjMjlqYTJWMFNHRnVaR3hsY2k1d2RYTm9LSHNnYm1GdFpUb2dYQ0p3YkdGNVpYSk5iM1psWENJc0lHbGtPaUIwYUdsekxuQnNZWGxsY2tsa0xDQjRJRG9nZEdocGN5NTRMQ0I1SURvZ2RHaHBjeTU1TENCaGJtZHNaU0E2SUhSb2FYTXVZVzVuYkdVc0lIUjVjR1VnT2lCY0luTnhkV0Z5WlZ3aUxDQmpiMnh2Y2xObGRDQTZJSFJvYVhNdVkyOXNiM0pUWlhRZ2ZTazdYRzRnSUNBZ2ZWeHVYRzU5SWwxOSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxudmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQoX3gsIF94MiwgX3gzKSB7IHZhciBfYWdhaW4gPSB0cnVlOyBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHsgdmFyIG9iamVjdCA9IF94LCBwcm9wZXJ0eSA9IF94MiwgcmVjZWl2ZXIgPSBfeDM7IF9hZ2FpbiA9IGZhbHNlOyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgX3ggPSBwYXJlbnQ7IF94MiA9IHByb3BlcnR5OyBfeDMgPSByZWNlaXZlcjsgX2FnYWluID0gdHJ1ZTsgZGVzYyA9IHBhcmVudCA9IHVuZGVmaW5lZDsgY29udGludWUgX2Z1bmN0aW9uOyB9IH0gZWxzZSBpZiAoJ3ZhbHVlJyBpbiBkZXNjKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfSB9O1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAnZnVuY3Rpb24nICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAnICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX1dlYXBvbkpzID0gcmVxdWlyZSgnLi9XZWFwb24uanMnKTtcblxudmFyIF9XZWFwb25KczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9XZWFwb25Kcyk7XG5cbnZhciBfY29tbW9uVXRpbHNKcyA9IHJlcXVpcmUoJy4uLy4uL2NvbW1vbi9VdGlscy5qcycpO1xuXG52YXIgX2NvbW1vblV0aWxzSnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uVXRpbHNKcyk7XG5cbnZhciBfY29tbW9uQ2FudmFzSGVscGVySnMgPSByZXF1aXJlKCcuLi8uLi9jb21tb24vQ2FudmFzSGVscGVyLmpzJyk7XG5cbnZhciBfY29tbW9uQ2FudmFzSGVscGVySnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uQ2FudmFzSGVscGVySnMpO1xuXG52YXIgX3RleHR1cmVzV2VhcG9uc0RpcnR3ZWFwb25Kc29uID0gcmVxdWlyZSgnLi4vLi4vdGV4dHVyZXMvd2VhcG9ucy9kaXJ0d2VhcG9uLmpzb24nKTtcblxudmFyIF90ZXh0dXJlc1dlYXBvbnNEaXJ0d2VhcG9uSnNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZXh0dXJlc1dlYXBvbnNEaXJ0d2VhcG9uSnNvbik7XG5cbnZhciBEaXJ0V2VhcG9uID0gKGZ1bmN0aW9uIChfV2VhcG9uKSB7XG4gICAgX2luaGVyaXRzKERpcnRXZWFwb24sIF9XZWFwb24pO1xuXG4gICAgZnVuY3Rpb24gRGlydFdlYXBvbigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERpcnRXZWFwb24pO1xuXG4gICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKERpcnRXZWFwb24ucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRGlydFdlYXBvbiwgW3tcbiAgICAgICAga2V5OiAnY3JlYXRlQnVsbGV0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUJ1bGxldCgpIHtcbiAgICAgICAgICAgIHRoaXMuYm1kID0gdGhpcy5nYW1lLm1ha2UuYml0bWFwRGF0YSgxMiwgMTIpO1xuICAgICAgICAgICAgbmV3IF9jb21tb25DYW52YXNIZWxwZXJKczJbJ2RlZmF1bHQnXSh0aGlzLmJtZCwgX3RleHR1cmVzV2VhcG9uc0RpcnR3ZWFwb25Kc29uMlsnZGVmYXVsdCddKS5kcmF3VGV4dHVyZSgpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIERpcnRXZWFwb247XG59KShfV2VhcG9uSnMyWydkZWZhdWx0J10pO1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBEaXJ0V2VhcG9uO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJa1E2TDJGeGRXRXZaMlZ2ZDJGeUwzTnlZeTl3Y21WbVlXSnpMM2RsWVhCdmJuTXZSR2x5ZEZkbFlYQnZiaTVxY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pT3pzN096czdPenM3T3pzN096czdPM2RDUVVGdFFpeGhRVUZoT3pzN096WkNRVU5rTEhWQ1FVRjFRanM3T3p0dlEwRkRhRUlzT0VKQlFUaENPenM3T3paRFFVTm9ReXgzUTBGQmQwTTdPenM3U1VGRk1VTXNWVUZCVlR0alFVRldMRlZCUVZVN08yRkJRVllzVlVGQlZUczRRa0ZCVml4VlFVRlZPenR0UTBGQlZpeFZRVUZWT3pzN2FVSkJRVllzVlVGQlZUczdaVUZGWml4M1FrRkJSenRCUVVOWUxHZENRVUZKTEVOQlFVTXNSMEZCUnl4SFFVRkhMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4RlFVRkZMRVZCUVVVc1JVRkJSU3hEUVVGRExFTkJRVU03UVVGRE4wTXNhMFJCUVdsQ0xFbEJRVWtzUTBGQlF5eEhRVUZITERaRFFVRlpMRU5CUVVNc1YwRkJWeXhGUVVGRkxFTkJRVU03VTBGRGRrUTdPenRYUVV4blFpeFZRVUZWT3pzN2NVSkJRVllzVlVGQlZTSXNJbVpwYkdVaU9pSkVPaTloY1hWaEwyZGxiM2RoY2k5emNtTXZjSEpsWm1GaWN5OTNaV0Z3YjI1ekwwUnBjblJYWldGd2IyNHVhbk1pTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lKcGJYQnZjblFnVjJWaGNHOXVJR1p5YjIwZ0p5NHZWMlZoY0c5dUxtcHpKenRjYm1sdGNHOXlkQ0JWZEdsc2N5Qm1jbTl0SUNjdUxpOHVMaTlqYjIxdGIyNHZWWFJwYkhNdWFuTW5PMXh1YVcxd2IzSjBJRU5oYm5aaGMwaGxiSEJsY2lCbWNtOXRJQ2N1TGk4dUxpOWpiMjF0YjI0dlEyRnVkbUZ6U0dWc2NHVnlMbXB6Snp0Y2JtbHRjRzl5ZENCM1pXRndiMjVLYzI5dUlHWnliMjBnSnk0dUx5NHVMM1JsZUhSMWNtVnpMM2RsWVhCdmJuTXZaR2x5ZEhkbFlYQnZiaTVxYzI5dUp6dGNibHh1Wlhod2IzSjBJR1JsWm1GMWJIUWdZMnhoYzNNZ1JHbHlkRmRsWVhCdmJpQmxlSFJsYm1SeklGZGxZWEJ2Ym50Y2JseHVJQ0FnSUdOeVpXRjBaVUoxYkd4bGRDZ3BJSHRjYmlBZ0lDQWdJQ0FnZEdocGN5NWliV1FnUFNCMGFHbHpMbWRoYldVdWJXRnJaUzVpYVhSdFlYQkVZWFJoS0RFeUxDQXhNaWs3WEc0Z0lDQWdJQ0FnSUc1bGR5QkRZVzUyWVhOSVpXeHdaWElvZEdocGN5NWliV1FzZDJWaGNHOXVTbk52YmlrdVpISmhkMVJsZUhSMWNtVW9LVHRjYmlBZ0lDQjlYRzVjYm4waVhYMD0iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbnZhciBfY29tbW9uVXRpbHNKcyA9IHJlcXVpcmUoJy4uLy4uL2NvbW1vbi9VdGlscy5qcycpO1xuXG52YXIgX2NvbW1vblV0aWxzSnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uVXRpbHNKcyk7XG5cbnZhciBfY29tbW9uQ2FudmFzSGVscGVySnMgPSByZXF1aXJlKCcuLi8uLi9jb21tb24vQ2FudmFzSGVscGVyLmpzJyk7XG5cbnZhciBfY29tbW9uQ2FudmFzSGVscGVySnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uQ2FudmFzSGVscGVySnMpO1xuXG52YXIgX3RleHR1cmVzV2VhcG9uc1dlYXBvbkpzb24gPSByZXF1aXJlKCcuLi8uLi90ZXh0dXJlcy93ZWFwb25zL3dlYXBvbi5qc29uJyk7XG5cbnZhciBfdGV4dHVyZXNXZWFwb25zV2VhcG9uSnNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZXh0dXJlc1dlYXBvbnNXZWFwb25Kc29uKTtcblxudmFyIFdlYXBvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2VhcG9uKGdhbWUpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdlYXBvbik7XG5cbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5jcmVhdGVCdWxsZXQoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVXZWFwb24oKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoV2VhcG9uLCBbe1xuICAgICAgICBrZXk6ICdjcmVhdGVCdWxsZXQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQnVsbGV0KCkge1xuICAgICAgICAgICAgdGhpcy5ibWQgPSB0aGlzLmdhbWUubWFrZS5iaXRtYXBEYXRhKDEyLCAxMik7XG4gICAgICAgICAgICBuZXcgX2NvbW1vbkNhbnZhc0hlbHBlckpzMlsnZGVmYXVsdCddKHRoaXMuYm1kLCBfdGV4dHVyZXNXZWFwb25zV2VhcG9uSnNvbjJbJ2RlZmF1bHQnXSkuZHJhd1RleHR1cmUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3JlYXRlV2VhcG9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVdlYXBvbigpIHtcbiAgICAgICAgICAgIHRoaXMud2VhcG9uID0gdGhpcy5nYW1lLmFkZC53ZWFwb24oMzAsIHRoaXMuYm1kKTtcblxuICAgICAgICAgICAgLy8gIFRoZSBidWxsZXQgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGtpbGxlZCB3aGVuIGl0IGxlYXZlcyB0aGUgd29ybGQgYm91bmRzXG4gICAgICAgICAgICB0aGlzLndlYXBvbi5idWxsZXRLaWxsVHlwZSA9IFBoYXNlci5XZWFwb24uS0lMTF9XT1JMRF9CT1VORFM7XG5cbiAgICAgICAgICAgIC8vICBUaGUgc3BlZWQgYXQgd2hpY2ggdGhlIGJ1bGxldCBpcyBmaXJlZFxuICAgICAgICAgICAgdGhpcy53ZWFwb24uYnVsbGV0U3BlZWQgPSA0MDA7XG5cbiAgICAgICAgICAgIC8vICBTcGVlZC11cCB0aGUgcmF0ZSBvZiBmaXJlLCBhbGxvd2luZyB0aGVtIHRvIHNob290IDEgYnVsbGV0IGV2ZXJ5IDYwbXNcbiAgICAgICAgICAgIHRoaXMud2VhcG9uLmZpcmVSYXRlID0gNjA7XG5cbiAgICAgICAgICAgIC8vICBBZGQgYSB2YXJpYW5jZSB0byB0aGUgYnVsbGV0IHNwZWVkIGJ5ICstIHRoaXMgdmFsdWVcbiAgICAgICAgICAgIHRoaXMud2VhcG9uLmJ1bGxldFNwZWVkVmFyaWFuY2UgPSAyMDA7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RyYWNrU3ByaXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRyYWNrU3ByaXRlKHNwcml0ZSwgeCwgeSwgcm90YXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMud2VhcG9uLnRyYWNrU3ByaXRlKHNwcml0ZSwgeCwgeSwgcm90YXRpb24pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdmaXJlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpcmUoKSB7XG4gICAgICAgICAgICB0aGlzLndlYXBvbi5maXJlKCk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gV2VhcG9uO1xufSkoKTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gV2VhcG9uO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJa1E2TDJGeGRXRXZaMlZ2ZDJGeUwzTnlZeTl3Y21WbVlXSnpMM2RsWVhCdmJuTXZWMlZoY0c5dUxtcHpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSTdPenM3T3pzN096czdPenMyUWtGQmEwSXNkVUpCUVhWQ096czdPMjlEUVVOb1FpdzRRa0ZCT0VJN096czdlVU5CUTJoRExHOURRVUZ2UXpzN096dEpRVVYwUXl4TlFVRk5PMEZCUlZvc1lVRkdUU3hOUVVGTkxFTkJSVmdzU1VGQlNTeEZRVUZGT3poQ1FVWkVMRTFCUVUwN08wRkJSMjVDTEZsQlFVa3NRMEZCUXl4SlFVRkpMRWRCUVVjc1NVRkJTU3hEUVVGRE8wRkJRMnBDTEZsQlFVa3NRMEZCUXl4WlFVRlpMRVZCUVVVc1EwRkJRenRCUVVOd1FpeFpRVUZKTEVOQlFVTXNXVUZCV1N4RlFVRkZMRU5CUVVNN1MwRkRka0k3TzJsQ1FVNW5RaXhOUVVGTk96dGxRVk5ZTEhkQ1FVRkhPMEZCUTFnc1owSkJRVWtzUTBGQlF5eEhRVUZITEVkQlFVY3NTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEVWQlFVVXNSVUZCUlN4RlFVRkZMRU5CUVVNc1EwRkJRenRCUVVNM1F5eHJSRUZCYVVJc1NVRkJTU3hEUVVGRExFZEJRVWNzZVVOQlFWa3NRMEZCUXl4WFFVRlhMRVZCUVVVc1EwRkJRenRUUVVOMlJEczdPMlZCUjFjc2QwSkJRVVU3UVVGRFZpeG5Ra0ZCU1N4RFFVRkRMRTFCUVUwc1IwRkJSeXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1JVRkJSU3hGUVVGRkxFbEJRVWtzUTBGQlF5eEhRVUZITEVOQlFVTXNRMEZCUXpzN08wRkJSMnBFTEdkQ1FVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExHTkJRV01zUjBGQlJ5eE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMR2xDUVVGcFFpeERRVUZET3pzN1FVRkhOMFFzWjBKQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1YwRkJWeXhIUVVGSExFZEJRVWNzUTBGQlF6czdPMEZCUnpsQ0xHZENRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRkZCUVZFc1IwRkJSeXhGUVVGRkxFTkJRVU03T3p0QlFVY3hRaXhuUWtGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4dFFrRkJiVUlzUjBGQlJ5eEhRVUZITEVOQlFVTTdVMEZEZWtNN096dGxRVWRWTEhGQ1FVRkRMRTFCUVUwc1JVRkJSU3hEUVVGRExFVkJRVVVzUTBGQlF5eEZRVUZGTEZGQlFWRXNSVUZCUlR0QlFVTm9ReXhuUWtGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4WFFVRlhMRU5CUVVNc1RVRkJUU3hGUVVGRkxFTkJRVU1zUlVGQlJTeERRVUZETEVWQlFVVXNVVUZCVVN4RFFVRkRMRU5CUVVNN1UwRkRia1E3T3p0bFFVZEhMR2RDUVVGSE8wRkJRMGdzWjBKQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hGUVVGRkxFTkJRVU03VTBGRGRFSTdPenRYUVhaRFowSXNUVUZCVFRzN08zRkNRVUZPTEUxQlFVMGlMQ0ptYVd4bElqb2lSRG92WVhGMVlTOW5aVzkzWVhJdmMzSmpMM0J5WldaaFluTXZkMlZoY0c5dWN5OVhaV0Z3YjI0dWFuTWlMQ0p6YjNWeVkyVnpRMjl1ZEdWdWRDSTZXeUpwYlhCdmNuUWdWWFJwYkhNZ1puSnZiU0FuTGk0dkxpNHZZMjl0Ylc5dUwxVjBhV3h6TG1wekp6dGNibWx0Y0c5eWRDQkRZVzUyWVhOSVpXeHdaWElnWm5KdmJTQW5MaTR2TGk0dlkyOXRiVzl1TDBOaGJuWmhjMGhsYkhCbGNpNXFjeWM3WEc1cGJYQnZjblFnZDJWaGNHOXVTbk52YmlCbWNtOXRJQ2N1TGk4dUxpOTBaWGgwZFhKbGN5OTNaV0Z3YjI1ekwzZGxZWEJ2Ymk1cWMyOXVKenRjYmx4dVpYaHdiM0owSUdSbFptRjFiSFFnWTJ4aGMzTWdWMlZoY0c5dUlIdGNibHh1SUNBZ0lHTnZibk4wY25WamRHOXlLR2RoYldVcElIdGNiaUFnSUNBZ0lDQWdkR2hwY3k1bllXMWxJRDBnWjJGdFpUdGNiaUFnSUNBZ0lDQWdkR2hwY3k1amNtVmhkR1ZDZFd4c1pYUW9LVHRjYmlBZ0lDQWdJQ0FnZEdocGN5NWpjbVZoZEdWWFpXRndiMjRvS1R0Y2JpQWdJQ0I5WEc1Y2JseHVJQ0FnSUdOeVpXRjBaVUoxYkd4bGRDZ3BJSHRjYmlBZ0lDQWdJQ0FnZEdocGN5NWliV1FnUFNCMGFHbHpMbWRoYldVdWJXRnJaUzVpYVhSdFlYQkVZWFJoS0RFeUxDQXhNaWs3WEc0Z0lDQWdJQ0FnSUc1bGR5QkRZVzUyWVhOSVpXeHdaWElvZEdocGN5NWliV1FzZDJWaGNHOXVTbk52YmlrdVpISmhkMVJsZUhSMWNtVW9LVHRjYmlBZ0lDQjlYRzVjYmx4dUlDQWdJR055WldGMFpWZGxZWEJ2YmlncGUxeHVJQ0FnSUNBZ0lDQjBhR2x6TG5kbFlYQnZiaUE5SUhSb2FYTXVaMkZ0WlM1aFpHUXVkMlZoY0c5dUtETXdMQ0IwYUdsekxtSnRaQ2s3WEc1Y2JpQWdJQ0FnSUNBZ0x5OGdJRlJvWlNCaWRXeHNaWFFnZDJsc2JDQmlaU0JoZFhSdmJXRjBhV05oYkd4NUlHdHBiR3hsWkNCM2FHVnVJR2wwSUd4bFlYWmxjeUIwYUdVZ2QyOXliR1FnWW05MWJtUnpYRzRnSUNBZ0lDQWdJSFJvYVhNdWQyVmhjRzl1TG1KMWJHeGxkRXRwYkd4VWVYQmxJRDBnVUdoaGMyVnlMbGRsWVhCdmJpNUxTVXhNWDFkUFVreEVYMEpQVlU1RVV6dGNibHh1SUNBZ0lDQWdJQ0F2THlBZ1ZHaGxJSE53WldWa0lHRjBJSGRvYVdOb0lIUm9aU0JpZFd4c1pYUWdhWE1nWm1seVpXUmNiaUFnSUNBZ0lDQWdkR2hwY3k1M1pXRndiMjR1WW5Wc2JHVjBVM0JsWldRZ1BTQTBNREE3WEc1Y2JpQWdJQ0FnSUNBZ0x5OGdJRk53WldWa0xYVndJSFJvWlNCeVlYUmxJRzltSUdacGNtVXNJR0ZzYkc5M2FXNW5JSFJvWlcwZ2RHOGdjMmh2YjNRZ01TQmlkV3hzWlhRZ1pYWmxjbmtnTmpCdGMxeHVJQ0FnSUNBZ0lDQjBhR2x6TG5kbFlYQnZiaTVtYVhKbFVtRjBaU0E5SURZd08xeHVYRzRnSUNBZ0lDQWdJQzh2SUNCQlpHUWdZU0IyWVhKcFlXNWpaU0IwYnlCMGFHVWdZblZzYkdWMElITndaV1ZrSUdKNUlDc3RJSFJvYVhNZ2RtRnNkV1ZjYmlBZ0lDQWdJQ0FnZEdocGN5NTNaV0Z3YjI0dVluVnNiR1YwVTNCbFpXUldZWEpwWVc1alpTQTlJREl3TUR0Y2JpQWdJQ0I5WEc1Y2JseHVJQ0FnSUhSeVlXTnJVM0J5YVhSbEtITndjbWwwWlN3Z2VDd2dlU3dnY205MFlYUnBiMjRwSUh0Y2JpQWdJQ0FnSUNBZ2RHaHBjeTUzWldGd2IyNHVkSEpoWTJ0VGNISnBkR1VvYzNCeWFYUmxMQ0I0TENCNUxDQnliM1JoZEdsdmJpazdYRzRnSUNBZ2ZWeHVYRzVjYmlBZ0lDQm1hWEpsS0NrZ2UxeHVJQ0FnSUNBZ0lDQjBhR2x6TG5kbFlYQnZiaTVtYVhKbEtDazdYRzRnSUNBZ2ZWeHVYRzU5SWwxOSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgJ2RlZmF1bHQnOiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxudmFyIF9XZWFwb25KcyA9IHJlcXVpcmUoJy4vV2VhcG9uLmpzJyk7XG5cbnZhciBfV2VhcG9uSnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfV2VhcG9uSnMpO1xuXG52YXIgX0RpcnRXZWFwb25KcyA9IHJlcXVpcmUoJy4vRGlydFdlYXBvbi5qcycpO1xuXG52YXIgX0RpcnRXZWFwb25KczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EaXJ0V2VhcG9uSnMpO1xuXG52YXIgV2VhcG9uRmFjdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gV2VhcG9uRmFjdG9yeShnYW1lKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXZWFwb25GYWN0b3J5KTtcblxuICAgICAgICB0aGlzLndlYXBvbl90eXBlID0gWydiYXNpYycsICdkaXJ0J107XG5cbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoV2VhcG9uRmFjdG9yeSwgW3tcbiAgICAgICAga2V5OiAnY3JlYXRlV2VhcG9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVdlYXBvbih0eXBlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiYmFzaWNcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBfV2VhcG9uSnMyWydkZWZhdWx0J10odGhpcy5nYW1lKTtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGlydFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IF9EaXJ0V2VhcG9uSnMyWydkZWZhdWx0J10odGhpcy5nYW1lKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IF9XZWFwb25KczJbJ2RlZmF1bHQnXSh0aGlzLmdhbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFdlYXBvbkZhY3Rvcnk7XG59KSgpO1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBXZWFwb25GYWN0b3J5O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJa1E2TDJGeGRXRXZaMlZ2ZDJGeUwzTnlZeTl3Y21WbVlXSnpMM2RsWVhCdmJuTXZWMlZoY0c5dVJtRmpkRzl5ZVM1cWN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaU96czdPenM3T3pzN096czdkMEpCUVcxQ0xHRkJRV0U3T3pzN05FSkJRMVFzYVVKQlFXbENPenM3TzBsQlJXNUNMR0ZCUVdFN1FVRkpia0lzWVVGS1RTeGhRVUZoTEVOQlNXeENMRWxCUVVrc1JVRkJSVHM0UWtGS1JDeGhRVUZoT3p0aFFVVTVRaXhYUVVGWExFZEJRVWNzUTBGQlF5eFBRVUZQTEVWQlFVTXNUVUZCVFN4RFFVRkRPenRCUVVjeFFpeFpRVUZKTEVOQlFVTXNTVUZCU1N4SFFVRkhMRWxCUVVrc1EwRkJRenRMUVVOd1FqczdhVUpCVG1kQ0xHRkJRV0U3TzJWQlUyeENMSE5DUVVGRExFbEJRVWtzUlVGQlJUdEJRVU5tTEc5Q1FVRlBMRWxCUVVrN1FVRkRVQ3h4UWtGQlN5eFBRVUZQTzBGQlExUXNNa0pCUVU4c01FSkJRVmNzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMEZCUVVFc1FVRkRhRU1zY1VKQlFVc3NUVUZCVFR0QlFVTlNMREpDUVVGUExEaENRVUZsTEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRCUVVGQkxFRkJRM0JETzBGQlEwY3NNa0pCUVU4c01FSkJRVmNzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMEZCUVVFc1lVRkRia003VTBGRFNqczdPMWRCYkVKblFpeGhRVUZoT3pzN2NVSkJRV0lzWVVGQllTSXNJbVpwYkdVaU9pSkVPaTloY1hWaEwyZGxiM2RoY2k5emNtTXZjSEpsWm1GaWN5OTNaV0Z3YjI1ekwxZGxZWEJ2YmtaaFkzUnZjbmt1YW5NaUxDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SnBiWEJ2Y25RZ1YyVmhjRzl1SUdaeWIyMGdKeTR2VjJWaGNHOXVMbXB6Snp0Y2JtbHRjRzl5ZENCRWFYSjBWMlZoY0c5dUlHWnliMjBnSnk0dlJHbHlkRmRsWVhCdmJpNXFjeWM3WEc1Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUdOc1lYTnpJRmRsWVhCdmJrWmhZM1J2Y25rZ2UxeHVYRzRnSUNBZ2QyVmhjRzl1WDNSNWNHVWdQU0JiSjJKaGMybGpKeXduWkdseWRDZGRPMXh1WEc0Z0lDQWdZMjl1YzNSeWRXTjBiM0lvWjJGdFpTa2dlMXh1SUNBZ0lDQWdJQ0IwYUdsekxtZGhiV1VnUFNCbllXMWxPMXh1SUNBZ0lIMWNibHh1WEc0Z0lDQWdZM0psWVhSbFYyVmhjRzl1S0hSNWNHVXBJSHRjYmlBZ0lDQWdJQ0FnYzNkcGRHTm9LSFI1Y0dVcGUxeHVJQ0FnSUNBZ0lDQWdJQ0FnWTJGelpTQmNJbUpoYzJsalhDSWdPaUJjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJSEpsZEhWeWJpQnVaWGNnVjJWaGNHOXVLSFJvYVhNdVoyRnRaU2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQmpZWE5sSUZ3aVpHbHlkRndpSURvZ1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNCeVpYUjFjbTRnYm1WM0lFUnBjblJYWldGd2IyNG9kR2hwY3k1bllXMWxLVHRjYmlBZ0lDQWdJQ0FnSUNBZ0lHUmxabUYxYkhRZ09pQmNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lISmxkSFZ5YmlCdVpYY2dWMlZoY0c5dUtIUm9hWE11WjJGdFpTazdYRzRnSUNBZ0lDQWdJSDBnWEc0Z0lDQWdmVnh1WEc1OUlsMTkiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHtcbiAgICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbnZhciBDb25uZWN0aW9uSGFuZGxlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBDb25uZWN0aW9uSGFuZGxlcihnYW1lKSB7XG4gICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29ubmVjdGlvbkhhbmRsZXIpO1xuXG4gICAgICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgICAgfVxuXG4gICAgICBfY3JlYXRlQ2xhc3MoQ29ubmVjdGlvbkhhbmRsZXIsIFt7XG4gICAgICAgICAgICBrZXk6ICdoYW5kbGUnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZShkYXRhKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZ2FtZS5nZW93YXIucGxheWVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5wbGF5ZXJzID0ge307XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5zb2NrZXRSZWFkeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NldCBjdXJyZW50IHBsYXllciBpZFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5jdXJyZW50UGxheWVyLnBsYXllcklkID0gZGF0YS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIHRvIHBsYXllciBtYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5nZW93YXIucGxheWVyc1tkYXRhLmlkXSA9IHRoaXMuZ2FtZS5nZW93YXIuY3VycmVudFBsYXllcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbGF5ZXJJZCA9ICcgKyB0aGlzLmdhbWUuZ2Vvd2FyLmN1cnJlbnRQbGF5ZXIucGxheWVySWQgKyAnIGNvbm5lY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdkaXNjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmVlZERlc3Ryb3kgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZS5nZW93YXIuY3VycmVudFBsYXllci5wbGF5ZXJJZCA9PSBkYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWVkRGVzdHJveSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5zb2NrZXRSZWFkeSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3BsYXllcklkID0gJyArIHRoaXMuZ2FtZS5nZW93YXIuY3VycmVudFBsYXllci5wbGF5ZXJJZCArICdkaXNjb25uZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdhbWUuZ2Vvd2FyLnBsYXllcnNbZGF0YS5pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZWVkRGVzdHJveSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5wbGF5ZXJzW2RhdGEuaWRdLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmdhbWUuZ2Vvd2FyLnBsYXllcnNbZGF0YS5pZF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICB9XSk7XG5cbiAgICAgIHJldHVybiBDb25uZWN0aW9uSGFuZGxlcjtcbn0pKCk7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IENvbm5lY3Rpb25IYW5kbGVyO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJa1E2TDJGeGRXRXZaMlZ2ZDJGeUwzTnlZeTl6YjJOclpYUXZRMjl1Ym1WamRHbHZia2hoYm1Sc1pYSXVhbk1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJanM3T3pzN096czdPenRKUVVGeFFpeHBRa0ZCYVVJN1FVRkZja0lzWlVGR1NTeHBRa0ZCYVVJc1EwRkZjRUlzU1VGQlNTeEZRVUZGTzJ0RFFVWklMR2xDUVVGcFFqczdRVUZITVVJc1owSkJRVWtzUTBGQlF5eEpRVUZKTEVkQlFVY3NTVUZCU1N4RFFVRkRPMDlCUTNSQ096dHRRa0ZLWXl4cFFrRkJhVUk3TzIxQ1FVMHhRaXhuUWtGQlF5eEpRVUZKTEVWQlFVVTdRVUZEVUN4elFrRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRTlCUVU4c1JVRkJSVHRCUVVONlFpdzBRa0ZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVDBGQlR5eEhRVUZITEVWQlFVVXNRMEZCUXp0dFFrRkRia003UVVGRFJDeHpRa0ZCU1N4SlFVRkpMRU5CUVVNc1NVRkJTU3hMUVVGTExGZEJRVmNzUlVGQlJUdEJRVU42UWl3MFFrRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNWMEZCVnl4SFFVRkhMRWxCUVVrc1EwRkJRenM3UVVGRmNFTXNORUpCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEdGQlFXRXNRMEZCUXl4UlFVRlJMRWRCUVVjc1NVRkJTU3hEUVVGRExFVkJRVVVzUTBGQlF6czdRVUZGYkVRc05FSkJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVkQlFVY3NTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zWVVGQllTeERRVUZETzBGQlEyNUZMQ3RDUVVGUExFTkJRVU1zUjBGQlJ5eERRVUZETEdGQlFXRXNSMEZCUnl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eGhRVUZoTEVOQlFVTXNVVUZCVVN4SFFVRkhMRmxCUVZrc1EwRkJReXhEUVVGRE8yMUNRVU42Uml4TlFVTkpMRWxCUVVrc1NVRkJTU3hEUVVGRExFbEJRVWtzUzBGQlN5eGpRVUZqTEVWQlFVVTdRVUZEYWtNc05FSkJRVWtzVjBGQlZ5eEhRVUZITEVsQlFVa3NRMEZCUXp0QlFVTjJRaXcwUWtGQlNTeEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhoUVVGaExFTkJRVU1zVVVGQlVTeEpRVUZKTEVsQlFVa3NRMEZCUXl4RlFVRkZMRVZCUVVVN1FVRkRiRVFzZVVOQlFWY3NSMEZCUnl4TFFVRkxMRU5CUVVNN1FVRkRjRUlzYTBOQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExGZEJRVmNzUjBGQlJ5eExRVUZMTEVOQlFVTTdRVUZEY2tNc2NVTkJRVThzUTBGQlF5eEhRVUZITEVOQlFVTXNZVUZCWVN4SFFVRkhMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEdGQlFXRXNRMEZCUXl4UlFVRlJMRWRCUVVjc1kwRkJZeXhEUVVGRExFTkJRVU03ZVVKQlF6TkdPMEZCUTBRc05FSkJRVWtzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1QwRkJUeXhEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNSVUZCUlR0QlFVTnFReXhyUTBGQlNTeFhRVUZYTEVWQlFVVTdRVUZEV0N4M1EwRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNUMEZCVHl4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eFBRVUZQTEVWQlFVVXNRMEZCUXpzclFrRkRha1E3UVVGRFJDeHhRMEZCVHl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRE8zbENRVU01UXp0dFFrRkZUanRoUVVOT096czdZVUZxUTJNc2FVSkJRV2xDT3pzN2NVSkJRV3BDTEdsQ1FVRnBRaUlzSW1acGJHVWlPaUpFT2k5aGNYVmhMMmRsYjNkaGNpOXpjbU12YzI5amEyVjBMME52Ym01bFkzUnBiMjVJWVc1a2JHVnlMbXB6SWl3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaVpYaHdiM0owSUdSbFptRjFiSFFnWTJ4aGMzTWdRMjl1Ym1WamRHbHZia2hoYm1Sc1pYSWdlMXh1WEc0Z0lDQWdJQ0JqYjI1emRISjFZM1J2Y2lobllXMWxLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQjBhR2x6TG1kaGJXVWdQU0JuWVcxbE8xeHVJQ0FnSUNBZ2ZWeHVYRzRnSUNBZ0lDQm9ZVzVrYkdVb1pHRjBZU2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdhV1lnS0NGMGFHbHpMbWRoYldVdVoyVnZkMkZ5TG5Cc1lYbGxjbk1wSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lIUm9hWE11WjJGdFpTNW5aVzkzWVhJdWNHeGhlV1Z5Y3lBOUlIdDlPMXh1SUNBZ0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ0tHUmhkR0V1ZEhsd1pTQTlQVDBnSjJOdmJtNWxZM1JsWkNjcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJSFJvYVhNdVoyRnRaUzVuWlc5M1lYSXVjMjlqYTJWMFVtVmhaSGtnUFNCMGNuVmxPMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnTHk5elpYUWdZM1Z5Y21WdWRDQndiR0Y1WlhJZ2FXUmNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJSFJvYVhNdVoyRnRaUzVuWlc5M1lYSXVZM1Z5Y21WdWRGQnNZWGxsY2k1d2JHRjVaWEpKWkNBOUlHUmhkR0V1YVdRN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQXZMMkZrWkNCMGJ5QndiR0Y1WlhJZ2JXRndYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0IwYUdsekxtZGhiV1V1WjJWdmQyRnlMbkJzWVhsbGNuTmJaR0YwWVM1cFpGMGdQU0IwYUdsekxtZGhiV1V1WjJWdmQyRnlMbU4xY25KbGJuUlFiR0Y1WlhJN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExteHZaeWduY0d4aGVXVnlTV1FnUFNBbklDc2dkR2hwY3k1bllXMWxMbWRsYjNkaGNpNWpkWEp5Wlc1MFVHeGhlV1Z5TG5Cc1lYbGxja2xrSUNzZ0p5QmpiMjV1WldOMFpXUW5LVHRjYmlBZ0lDQWdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lDQWdJQ0FnSUdWc2MyVWdhV1lnS0dSaGRHRXVkSGx3WlNBOVBUMGdKMlJwYzJOdmJtNWxZM1JsWkNjcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJSFpoY2lCdVpXVmtSR1Z6ZEhKdmVTQTlJSFJ5ZFdVN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQnBaaUFvZEdocGN5NW5ZVzFsTG1kbGIzZGhjaTVqZFhKeVpXNTBVR3hoZVdWeUxuQnNZWGxsY2tsa0lEMDlJR1JoZEdFdWFXUXBJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRzVsWldSRVpYTjBjbTk1SUQwZ1ptRnNjMlU3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0IwYUdsekxtZGhiV1V1WjJWdmQyRnlMbk52WTJ0bGRGSmxZV1I1SUQwZ1ptRnNjMlU3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnbmNHeGhlV1Z5U1dRZ1BTQW5JQ3NnZEdocGN5NW5ZVzFsTG1kbGIzZGhjaTVqZFhKeVpXNTBVR3hoZVdWeUxuQnNZWGxsY2tsa0lDc2dKMlJwYzJOdmJtNWxZM1JsWkNjcE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ0tIUm9hWE11WjJGdFpTNW5aVzkzWVhJdWNHeGhlV1Z5YzF0a1lYUmhMbWxrWFNrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ2FXWWdLRzVsWldSRVpYTjBjbTk1S1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0IwYUdsekxtZGhiV1V1WjJWdmQyRnlMbkJzWVhsbGNuTmJaR0YwWVM1cFpGMHVaR1Z6ZEhKdmVTZ3BPMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdaR1ZzWlhSbElIUm9hWE11WjJGdFpTNW5aVzkzWVhJdWNHeGhlV1Z5YzF0a1lYUmhMbWxrWFR0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lIMWNibHh1SUNBZ0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ2ZWeHVYRzU5SWwxOSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICAgICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgX3ByZWZhYnNQbGF5ZXJzUGxheWVyRmFjdG9yeUpzID0gcmVxdWlyZSgnLi4vcHJlZmFicy9wbGF5ZXJzL1BsYXllckZhY3RvcnkuanMnKTtcblxudmFyIF9wcmVmYWJzUGxheWVyc1BsYXllckZhY3RvcnlKczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcmVmYWJzUGxheWVyc1BsYXllckZhY3RvcnlKcyk7XG5cbnZhciBQbGF5ZXJNb3ZlSGFuZGxlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiBQbGF5ZXJNb3ZlSGFuZGxlcihnYW1lKSB7XG4gICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGxheWVyTW92ZUhhbmRsZXIpO1xuXG4gICAgICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJGYWN0b3J5ID0gbmV3IF9wcmVmYWJzUGxheWVyc1BsYXllckZhY3RvcnlKczJbJ2RlZmF1bHQnXSh0aGlzLmdhbWUpO1xuICAgICAgfVxuXG4gICAgICBfY3JlYXRlQ2xhc3MoUGxheWVyTW92ZUhhbmRsZXIsIFt7XG4gICAgICAgICAgICBrZXk6ICdoYW5kbGUnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZShkYXRhKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodGhpcy5nYW1lLmdlb3dhci5wbGF5ZXJzW2RhdGEuaWRdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGVlclBsYXllciA9IHRoaXMuZ2FtZS5nZW93YXIucGxheWVyc1tkYXRhLmlkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJQbGF5ZXIueCA9IGRhdGEueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJQbGF5ZXIueSA9IGRhdGEueTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJQbGF5ZXIuYW5nbGUgPSBkYXRhLmFuZ2xlO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZWVyUGxheWVyID0gdGhpcy5wbGF5ZXJGYWN0b3J5LmNyZWF0ZVBlZXJQbGF5ZXIoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKHBlZXJQbGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5wbGF5ZXJzR3JvdXAuYWRkKHBlZXJQbGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jYWNoZSBwZWVyIHBsYXllclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5wbGF5ZXJzW2RhdGEuaWRdID0gcGVlclBsYXllcjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgIH1dKTtcblxuICAgICAgcmV0dXJuIFBsYXllck1vdmVIYW5kbGVyO1xufSkoKTtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gUGxheWVyTW92ZUhhbmRsZXI7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklrUTZMMkZ4ZFdFdloyVnZkMkZ5TDNOeVl5OXpiMk5yWlhRdlVHeGhlV1Z5VFc5MlpVaGhibVJzWlhJdWFuTWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklqczdPenM3T3pzN096czdPelpEUVVFd1FpeHhRMEZCY1VNN096czdTVUZGTVVNc2FVSkJRV2xDTzBGQlJYSkNMR1ZCUmtrc2FVSkJRV2xDTEVOQlJYQkNMRWxCUVVrc1JVRkJSVHRyUTBGR1NDeHBRa0ZCYVVJN08wRkJSekZDTEdkQ1FVRkpMRU5CUVVNc1NVRkJTU3hIUVVGSExFbEJRVWtzUTBGQlF6dEJRVU5xUWl4blFrRkJTU3hEUVVGRExHRkJRV0VzUjBGQlJ5d3JRMEZCYTBJc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzA5QlEzWkVPenR0UWtGTVl5eHBRa0ZCYVVJN08yMUNRVTh4UWl4blFrRkJReXhKUVVGSkxFVkJRVVU3UVVGRFVDeHpRa0ZCU1N4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhGUVVGRk8wRkJRMjVETERSQ1FVRkpMRlZCUVZVc1IwRkJSeXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzUTBGQlF5eERRVUZETzBGQlEyNUVMR3REUVVGVkxFTkJRVU1zUTBGQlF5eEhRVUZITEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1FVRkRkRUlzYTBOQlFWVXNRMEZCUXl4RFFVRkRMRWRCUVVjc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF6dEJRVU4wUWl4clEwRkJWU3hEUVVGRExFdEJRVXNzUjBGQlJ5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRPMjFDUVVOcVF5eE5RVU5ITzBGQlEwRXNORUpCUVVrc1ZVRkJWU3hIUVVGSExFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZETTBRc05FSkJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRMRkZCUVZFc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dEJRVU51UXl3MFFrRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNXVUZCV1N4RFFVRkRMRWRCUVVjc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6czdRVUZGT1VNc05FSkJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVkQlFVY3NWVUZCVlN4RFFVRkRPMjFDUVVOc1JEdGhRVU5PT3pzN1lVRnlRbU1zYVVKQlFXbENPenM3Y1VKQlFXcENMR2xDUVVGcFFpSXNJbVpwYkdVaU9pSkVPaTloY1hWaEwyZGxiM2RoY2k5emNtTXZjMjlqYTJWMEwxQnNZWGxsY2sxdmRtVklZVzVrYkdWeUxtcHpJaXdpYzI5MWNtTmxjME52Ym5SbGJuUWlPbHNpYVcxd2IzSjBJRkJzWVhsbGNrWmhZM1J2Y25rZ1puSnZiU0FuTGk0dmNISmxabUZpY3k5d2JHRjVaWEp6TDFCc1lYbGxja1poWTNSdmNua3Vhbk1uTzF4dVhHNWxlSEJ2Y25RZ1pHVm1ZWFZzZENCamJHRnpjeUJRYkdGNVpYSk5iM1psU0dGdVpHeGxjaUI3WEc1Y2JpQWdJQ0FnSUdOdmJuTjBjblZqZEc5eUtHZGhiV1VwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJSFJvYVhNdVoyRnRaU0E5SUdkaGJXVTdYRzRnSUNBZ0lDQWdJQ0FnSUNCMGFHbHpMbkJzWVhsbGNrWmhZM1J2Y25rZ1BTQnVaWGNnVUd4aGVXVnlSbUZqZEc5eWVTaDBhR2x6TG1kaGJXVXBPMXh1SUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0JvWVc1a2JHVW9aR0YwWVNrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnYVdZZ0tIUm9hWE11WjJGdFpTNW5aVzkzWVhJdWNHeGhlV1Z5YzF0a1lYUmhMbWxrWFNrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lIWmhjaUJ3WldWeVVHeGhlV1Z5SUQwZ2RHaHBjeTVuWVcxbExtZGxiM2RoY2k1d2JHRjVaWEp6VzJSaGRHRXVhV1JkT3lCY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCd1pXVnlVR3hoZVdWeUxuZ2dQU0JrWVhSaExuZzdYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdjR1ZsY2xCc1lYbGxjaTU1SUQwZ1pHRjBZUzU1TzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUhCbFpYSlFiR0Y1WlhJdVlXNW5iR1VnUFNCa1lYUmhMbUZ1WjJ4bE95QWdJRnh1SUNBZ0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQWdJQ0FnWld4elpYdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQjJZWElnY0dWbGNsQnNZWGxsY2lBOUlIUm9hWE11Y0d4aGVXVnlSbUZqZEc5eWVTNWpjbVZoZEdWUVpXVnlVR3hoZVdWeUtHUmhkR0VwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUhSb2FYTXVaMkZ0WlM1aFpHUXVaWGhwYzNScGJtY29jR1ZsY2xCc1lYbGxjaWs3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnZEdocGN5NW5ZVzFsTG1kbGIzZGhjaTV3YkdGNVpYSnpSM0p2ZFhBdVlXUmtLSEJsWlhKUWJHRjVaWElwTzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUM4dlkyRmphR1VnY0dWbGNpQndiR0Y1WlhKY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCMGFHbHpMbWRoYldVdVoyVnZkMkZ5TG5Cc1lYbGxjbk5iWkdGMFlTNXBaRjBnUFNCd1pXVnlVR3hoZVdWeU8xeHVJQ0FnSUNBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnZlZ4dVhHNTlJbDE5IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyAnZGVmYXVsdCc6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgX0Nvbm5lY3Rpb25IYW5kbGVySnMgPSByZXF1aXJlKCcuL0Nvbm5lY3Rpb25IYW5kbGVyLmpzJyk7XG5cbnZhciBfQ29ubmVjdGlvbkhhbmRsZXJKczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25uZWN0aW9uSGFuZGxlckpzKTtcblxudmFyIF9QbGF5ZXJNb3ZlSGFuZGxlckpzID0gcmVxdWlyZSgnLi9QbGF5ZXJNb3ZlSGFuZGxlci5qcycpO1xuXG52YXIgX1BsYXllck1vdmVIYW5kbGVySnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUGxheWVyTW92ZUhhbmRsZXJKcyk7XG5cbnZhciBTb2NrZXRIYW5kbGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTb2NrZXRIYW5kbGVyKHNpbywgZ2FtZSkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU29ja2V0SGFuZGxlcik7XG5cbiAgICAgICAgdGhpcy5zaW8gPSBzaW87XG4gICAgICAgIHRoaXMuZ2FtZSA9IGdhbWU7XG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgdGhpcy5pbml0SGFuZGxlcnModGhpcy5nYW1lKTtcbiAgICAgICAgdGhpcy5zaW8ub24oJ3B1bGwnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdGhhdC51cGRhdGUoZGF0YSwgdGhhdCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhTb2NrZXRIYW5kbGVyLCBbe1xuICAgICAgICBrZXk6ICdwdXNoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2goZGF0YSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZS5nZW93YXIuc29ja2V0UmVhZHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNpby5lbWl0KCdwdXNoJywgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoZGF0YSwgdGhhdCkge1xuICAgICAgICAgICAgaWYgKGRhdGEubmFtZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNbZGF0YS5uYW1lXS5oYW5kbGUoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2luaXRIYW5kbGVycycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0SGFuZGxlcnMoZ2FtZSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5jb25uZWN0aW9uID0gbmV3IF9Db25uZWN0aW9uSGFuZGxlckpzMlsnZGVmYXVsdCddKGdhbWUpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5wbGF5ZXJNb3ZlID0gbmV3IF9QbGF5ZXJNb3ZlSGFuZGxlckpzMlsnZGVmYXVsdCddKGdhbWUpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNvY2tldEhhbmRsZXI7XG59KSgpO1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBTb2NrZXRIYW5kbGVyO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJa1E2TDJGeGRXRXZaMlZ2ZDJGeUwzTnlZeTl6YjJOclpYUXZVMjlqYTJWMFNHRnVaR3hsY2k1cWN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaU96czdPenM3T3pzN096czdiVU5CUVRoQ0xIZENRVUYzUWpzN096dHRRMEZEZUVJc2QwSkJRWGRDT3pzN08wbEJSV3BETEdGQlFXRTdRVUZEYmtJc1lVRkVUU3hoUVVGaExFTkJRMnhDTEVkQlFVY3NSVUZCUlN4SlFVRkpMRVZCUVVVN09FSkJSRTRzWVVGQllUczdRVUZGTVVJc1dVRkJTU3hEUVVGRExFZEJRVWNzUjBGQlJ5eEhRVUZITEVOQlFVTTdRVUZEWml4WlFVRkpMRU5CUVVNc1NVRkJTU3hIUVVGSExFbEJRVWtzUTBGQlF6dEJRVU5xUWl4WlFVRkpMRWxCUVVrc1IwRkJSeXhKUVVGSkxFTkJRVU03UVVGRGFFSXNXVUZCU1N4RFFVRkRMRmxCUVZrc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdRVUZETjBJc1dVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eEZRVUZGTEVOQlFVTXNUVUZCVFN4RlFVRkZMRlZCUVZVc1NVRkJTU3hGUVVGRk8wRkJRMmhETEdkQ1FVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUlVGQlJTeEpRVUZKTEVOQlFVTXNRMEZCUXp0VFFVTXpRaXhEUVVGRExFTkJRVU03UzBGRFRqczdhVUpCVkdkQ0xHRkJRV0U3TzJWQlZ6RkNMR05CUVVNc1NVRkJTU3hGUVVGRk8wRkJRMUFzWjBKQlFVa3NTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVjBGQlZ5eEZRVUZGTzBGQlF6bENMRzlDUVVGSkxFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRVZCUVVVc1NVRkJTU3hEUVVGRExFTkJRVU03WVVGREwwSTdVMEZEU2pzN08yVkJSVXNzWjBKQlFVTXNTVUZCU1N4RlFVRkZMRWxCUVVrc1JVRkJSVHRCUVVObUxHZENRVUZKTEVsQlFVa3NRMEZCUXl4SlFVRkpMRVZCUVVVN1FVRkRXQ3h2UWtGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMkZCUTNwRE8xTkJRMG83T3p0bFFVZFhMSE5DUVVGRExFbEJRVWtzUlVGQlJUdEJRVU5tTEdkQ1FVRkpMRU5CUVVNc1VVRkJVU3hIUVVGSExFVkJRVVVzUTBGQlF6dEJRVU51UWl4blFrRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eFZRVUZWTEVkQlFVY3NjVU5CUVhOQ0xFbEJRVWtzUTBGQlF5eERRVUZETzBGQlEzWkVMR2RDUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEZWQlFWVXNSMEZCUnl4eFEwRkJjMElzU1VGQlNTeERRVUZETEVOQlFVTTdVMEZETVVRN096dFhRVFZDWjBJc1lVRkJZVHM3TzNGQ1FVRmlMR0ZCUVdFaUxDSm1hV3hsSWpvaVJEb3ZZWEYxWVM5blpXOTNZWEl2YzNKakwzTnZZMnRsZEM5VGIyTnJaWFJJWVc1a2JHVnlMbXB6SWl3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaWFXMXdiM0owSUVOdmJtNWxZM1JwYjI1SVlXNWtiR1Z5SUdaeWIyMGdKeTR2UTI5dWJtVmpkR2x2YmtoaGJtUnNaWEl1YW5Nbk8xeHVhVzF3YjNKMElGQnNZWGxsY2sxdmRtVklZVzVrYkdWeUlHWnliMjBnSnk0dlVHeGhlV1Z5VFc5MlpVaGhibVJzWlhJdWFuTW5PMXh1WEc1bGVIQnZjblFnWkdWbVlYVnNkQ0JqYkdGemN5QlRiMk5yWlhSSVlXNWtiR1Z5SUh0Y2JpQWdJQ0JqYjI1emRISjFZM1J2Y2loemFXOHNJR2RoYldVcElIdGNiaUFnSUNBZ0lDQWdkR2hwY3k1emFXOGdQU0J6YVc4N1hHNGdJQ0FnSUNBZ0lIUm9hWE11WjJGdFpTQTlJR2RoYldVN1hHNGdJQ0FnSUNBZ0lIWmhjaUIwYUdGMElEMGdkR2hwY3p0Y2JpQWdJQ0FnSUNBZ2RHaHBjeTVwYm1sMFNHRnVaR3hsY25Nb2RHaHBjeTVuWVcxbEtUdGNiaUFnSUNBZ0lDQWdkR2hwY3k1emFXOHViMjRvSjNCMWJHd25MQ0JtZFc1amRHbHZiaUFvWkdGMFlTa2dlMXh1SUNBZ0lDQWdJQ0FnSUNBZ2RHaGhkQzUxY0dSaGRHVW9aR0YwWVN3Z2RHaGhkQ2s3WEc0Z0lDQWdJQ0FnSUgwcE8xeHVJQ0FnSUgxY2JseHVJQ0FnSUhCMWMyZ29aR0YwWVNrZ2UxeHVJQ0FnSUNBZ0lDQnBaaUFvZEdocGN5NW5ZVzFsTG1kbGIzZGhjaTV6YjJOclpYUlNaV0ZrZVNrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnZEdocGN5NXphVzh1WlcxcGRDZ25jSFZ6YUNjc0lHUmhkR0VwTzF4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnZlZ4dVhHNGdJQ0FnZFhCa1lYUmxLR1JoZEdFc0lIUm9ZWFFwSUh0Y2JpQWdJQ0FnSUNBZ2FXWWdLR1JoZEdFdWJtRnRaU2tnZTF4dUlDQWdJQ0FnSUNBZ0lDQWdkR2hwY3k1b1lXNWtiR1Z5YzF0a1lYUmhMbTVoYldWZExtaGhibVJzWlNoa1lYUmhLVHRjYmlBZ0lDQWdJQ0FnZlZ4dUlDQWdJSDFjYmx4dVhHNGdJQ0FnYVc1cGRFaGhibVJzWlhKektHZGhiV1VwSUh0Y2JpQWdJQ0FnSUNBZ2RHaHBjeTVvWVc1a2JHVnljeUE5SUh0OU8xeHVJQ0FnSUNBZ0lDQjBhR2x6TG1oaGJtUnNaWEp6TG1OdmJtNWxZM1JwYjI0Z1BTQnVaWGNnUTI5dWJtVmpkR2x2YmtoaGJtUnNaWElvWjJGdFpTazdYRzRnSUNBZ0lDQWdJSFJvYVhNdWFHRnVaR3hsY25NdWNHeGhlV1Z5VFc5MlpTQTlJRzVsZHlCUWJHRjVaWEpOYjNabFNHRnVaR3hsY2lobllXMWxLVHRjYmlBZ0lDQjlYRzU5SWwxOSIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbnZhciBCb290ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCb290KCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQm9vdCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEJvb3QsIFt7XG4gICAgICAgIGtleTogJ3ByZWxvYWQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJlbG9hZCgpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgncHJlbG9hZGVyJywgJ2Fzc2V0cy9pbWFnZXMvbG9hZGluZ19iYXIucG5nJyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NyZWF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUuZ2Vvd2FyID0ge307IC8vbmFtZXNwYWNlXG4gICAgICAgICAgICB0aGlzLmdhbWUuaW5wdXQubWF4UG9pbnRlcnMgPSAxO1xuICAgICAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdwcmVsb2FkJyk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQm9vdDtcbn0pKCk7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IEJvb3Q7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklrUTZMMkZ4ZFdFdloyVnZkMkZ5TDNOeVl5OXpkR0YwWlhNdlFtOXZkQzVxY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pT3pzN096czdPenM3TzBsQlFYRkNMRWxCUVVrN1lVRkJTaXhKUVVGSk96aENRVUZLTEVsQlFVazdPenRwUWtGQlNpeEpRVUZKT3p0bFFVTmtMRzFDUVVGSE8wRkJRMDRzWjBKQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExGZEJRVmNzUlVGQlJTd3JRa0ZCSzBJc1EwRkJReXhEUVVGRE8xTkJRMnBGT3pzN1pVRkZTeXhyUWtGQlJ6dEJRVU5NTEdkQ1FVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUjBGQlJ5eEZRVUZGTEVOQlFVTTdRVUZEZEVJc1owSkJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRmRCUVZjc1IwRkJSeXhEUVVGRExFTkJRVU03UVVGRGFFTXNaMEpCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEV0QlFVc3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJRenRUUVVOd1F6czdPMWRCVkdkQ0xFbEJRVWs3T3p0eFFrRkJTaXhKUVVGSklpd2labWxzWlNJNklrUTZMMkZ4ZFdFdloyVnZkMkZ5TDNOeVl5OXpkR0YwWlhNdlFtOXZkQzVxY3lJc0luTnZkWEpqWlhORGIyNTBaVzUwSWpwYkltVjRjRzl5ZENCa1pXWmhkV3gwSUdOc1lYTnpJRUp2YjNRZ2UxeHVJQ0FnSUhCeVpXeHZZV1FvS1NCN1hHNGdJQ0FnSUNBZ0lIUm9hWE11Ykc5aFpDNXBiV0ZuWlNnbmNISmxiRzloWkdWeUp5d2dKMkZ6YzJWMGN5OXBiV0ZuWlhNdmJHOWhaR2x1WjE5aVlYSXVjRzVuSnlrN1hHNGdJQ0FnZlZ4dVhHNGdJQ0FnWTNKbFlYUmxLQ2tnZTF4dUlDQWdJQ0FnSUNCMGFHbHpMbWRoYldVdVoyVnZkMkZ5SUQwZ2UzMDdJQzh2Ym1GdFpYTndZV05sWEc0Z0lDQWdJQ0FnSUhSb2FYTXVaMkZ0WlM1cGJuQjFkQzV0WVhoUWIybHVkR1Z5Y3lBOUlERTdYRzRnSUNBZ0lDQWdJSFJvYVhNdVoyRnRaUzV6ZEdGMFpTNXpkR0Z5ZENnbmNISmxiRzloWkNjcE8xeHVJQ0FnSUgxY2JuMGlYWDA9IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG52YXIgX2dldCA9IGZ1bmN0aW9uIGdldChfeCwgX3gyLCBfeDMpIHsgdmFyIF9hZ2FpbiA9IHRydWU7IF9mdW5jdGlvbjogd2hpbGUgKF9hZ2FpbikgeyB2YXIgb2JqZWN0ID0gX3gsIHByb3BlcnR5ID0gX3gyLCByZWNlaXZlciA9IF94MzsgX2FnYWluID0gZmFsc2U7IGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyBfeCA9IHBhcmVudDsgX3gyID0gcHJvcGVydHk7IF94MyA9IHJlY2VpdmVyOyBfYWdhaW4gPSB0cnVlOyBkZXNjID0gcGFyZW50ID0gdW5kZWZpbmVkOyBjb250aW51ZSBfZnVuY3Rpb247IH0gfSBlbHNlIGlmICgndmFsdWUnIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9IH07XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7ICdkZWZhdWx0Jzogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICdmdW5jdGlvbicgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICcgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfY29tbW9uVXRpbHNKcyA9IHJlcXVpcmUoJy4uL2NvbW1vbi9VdGlscy5qcycpO1xuXG52YXIgX2NvbW1vblV0aWxzSnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY29tbW9uVXRpbHNKcyk7XG5cbnZhciBfcHJlZmFic1BsYXllcnNQbGF5ZXJGYWN0b3J5SnMgPSByZXF1aXJlKCcuLi9wcmVmYWJzL3BsYXllcnMvUGxheWVyRmFjdG9yeS5qcycpO1xuXG52YXIgX3ByZWZhYnNQbGF5ZXJzUGxheWVyRmFjdG9yeUpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ByZWZhYnNQbGF5ZXJzUGxheWVyRmFjdG9yeUpzKTtcblxudmFyIF9zb2NrZXRTb2NrZXRIYW5kbGVySnMgPSByZXF1aXJlKFwiLi4vc29ja2V0L1NvY2tldEhhbmRsZXIuanNcIik7XG5cbnZhciBfc29ja2V0U29ja2V0SGFuZGxlckpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NvY2tldFNvY2tldEhhbmRsZXJKcyk7XG5cbnZhciBHYW1lID0gKGZ1bmN0aW9uIChfUGhhc2VyJFN0YXRlKSB7XG4gICAgX2luaGVyaXRzKEdhbWUsIF9QaGFzZXIkU3RhdGUpO1xuXG4gICAgZnVuY3Rpb24gR2FtZSgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhbWUpO1xuXG4gICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEdhbWUucHJvdG90eXBlKSwgJ2NvbnN0cnVjdG9yJywgdGhpcykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoR2FtZSwgW3tcbiAgICAgICAga2V5OiAnY3JlYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICAgICAgICAgIC8vc3RhZ2VcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLnN0YXJ0U3lzdGVtKFBoYXNlci5QaHlzaWNzLkFSQ0FERSk7XG4gICAgICAgICAgICB0aGlzLmdhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gJyMyODI2MjYnO1xuICAgICAgICAgICAgLy9mYWN0b3JpZXNcbiAgICAgICAgICAgIHRoaXMucGxheWVyRmFjdG9yeSA9IG5ldyBfcHJlZmFic1BsYXllcnNQbGF5ZXJGYWN0b3J5SnMyWydkZWZhdWx0J10odGhpcy5nYW1lKTtcbiAgICAgICAgICAgIC8vcGxheWVyIGdyb3VwXG4gICAgICAgICAgICB2YXIgcGxheWVyc0dyb3VwID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xuICAgICAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5wbGF5ZXJzR3JvdXAgPSBwbGF5ZXJzR3JvdXA7XG4gICAgICAgICAgICAvL3BsYXllclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIgPSB0aGlzLnBsYXllckZhY3RvcnkuY3JlYXRlUGxheWVyKCk7XG4gICAgICAgICAgICB0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKHRoaXMucGxheWVyKTtcbiAgICAgICAgICAgIHBsYXllcnNHcm91cC5hZGQodGhpcy5wbGF5ZXIpO1xuICAgICAgICAgICAgLy9jYWNoZSBjdXJyZW50IHBsYXllclxuICAgICAgICAgICAgdGhpcy5nYW1lLmdlb3dhci5jdXJyZW50UGxheWVyID0gdGhpcy5wbGF5ZXI7XG4gICAgICAgICAgICAvL3NldCB1cCBzb2NrZXRcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5nZW93YXIuc29ja2V0SGFuZGxlciA9IG5ldyBfc29ja2V0U29ja2V0SGFuZGxlckpzMlsnZGVmYXVsdCddKGlvKCdodHRwOi8vbG9jYWxob3N0OjMwMDAnKSwgdGhpcy5nYW1lKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXBkYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS5jb2xsaWRlKHRoaXMuZ2FtZS5nZW93YXIucGxheWVyc0dyb3VwLCB0aGlzLmdhbWUuZ2Vvd2FyLnBsYXllcnNHcm91cCwgbnVsbCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gR2FtZTtcbn0pKFBoYXNlci5TdGF0ZSk7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IEdhbWU7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklrUTZMMkZ4ZFdFdloyVnZkMkZ5TDNOeVl5OXpkR0YwWlhNdlIyRnRaUzVxY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pT3pzN096czdPenM3T3pzN096czdPelpDUVVGclFpeHZRa0ZCYjBJN096czdOa05CUTFvc2NVTkJRWEZET3pzN08zRkRRVU55UXl3MFFrRkJORUk3T3pzN1NVRkZha01zU1VGQlNUdGpRVUZLTEVsQlFVazdPMkZCUVVvc1NVRkJTVHM0UWtGQlNpeEpRVUZKT3p0dFEwRkJTaXhKUVVGSk96czdhVUpCUVVvc1NVRkJTVHM3WlVGRlppeHJRa0ZCUnpzN1FVRkZUQ3huUWtGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1YwRkJWeXhEUVVGRExFMUJRVTBzUTBGQlF5eFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNN1FVRkRja1FzWjBKQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExHVkJRV1VzUjBGQlJ5eFRRVUZUTEVOQlFVTTdPMEZCUlRWRExHZENRVUZKTEVOQlFVTXNZVUZCWVN4SFFVRkhMQ3REUVVGclFpeEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN08wRkJSV3hFTEdkQ1FVRkpMRmxCUVZrc1IwRkJSeXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4TFFVRkxMRVZCUVVVc1EwRkJRenRCUVVONlF5eG5Ra0ZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zV1VGQldTeEhRVUZITEZsQlFWa3NRMEZCUXpzN1FVRkZOME1zWjBKQlFVa3NRMEZCUXl4TlFVRk5MRWRCUVVjc1NVRkJTU3hEUVVGRExHRkJRV0VzUTBGQlF5eFpRVUZaTEVWQlFVVXNRMEZCUXp0QlFVTm9SQ3huUWtGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXp0QlFVTndReXgzUWtGQldTeERRVUZETEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU03TzBGQlJUbENMR2RDUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4aFFVRmhMRWRCUVVjc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF6czdRVUZGTjBNc1owSkJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMR0ZCUVdFc1IwRkJSeXgxUTBGQmEwSXNSVUZCUlN4RFFVRkRMSFZDUVVGMVFpeERRVUZETEVWQlFVVXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRE8xTkJRemxHT3pzN1pVRkhTeXhyUWtGQlJ6dEJRVU5NTEdkQ1FVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNUMEZCVHl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEZsQlFWa3NSVUZCUlN4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFpRVUZaTEVWQlFVTXNTVUZCU1N4RlFVRkZMRWxCUVVrc1EwRkJReXhEUVVGRE8xTkJRemRIT3pzN1YwRjRRbWRDTEVsQlFVazdSMEZCVXl4TlFVRk5MRU5CUVVNc1MwRkJTenM3Y1VKQlFYcENMRWxCUVVraUxDSm1hV3hsSWpvaVJEb3ZZWEYxWVM5blpXOTNZWEl2YzNKakwzTjBZWFJsY3k5SFlXMWxMbXB6SWl3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaWFXMXdiM0owSUZWMGFXeHpJR1p5YjIwZ0p5NHVMMk52YlcxdmJpOVZkR2xzY3k1cWN5YzdYRzVwYlhCdmNuUWdVR3hoZVdWeVJtRmpkRzl5ZVNCbWNtOXRJQ2N1TGk5d2NtVm1ZV0p6TDNCc1lYbGxjbk12VUd4aGVXVnlSbUZqZEc5eWVTNXFjeWM3WEc1cGJYQnZjblFnVTI5amEyVjBTR0Z1Wkd4bGNpQm1jbTl0SUZ3aUxpNHZjMjlqYTJWMEwxTnZZMnRsZEVoaGJtUnNaWEl1YW5OY0lqdGNibHh1Wlhod2IzSjBJR1JsWm1GMWJIUWdZMnhoYzNNZ1IyRnRaU0JsZUhSbGJtUnpJRkJvWVhObGNpNVRkR0YwWlNCN1hHNWNiaUFnSUNCamNtVmhkR1VvS1NCN1hHNGdJQ0FnSUNBZ0lDOHZjM1JoWjJWY2JpQWdJQ0FnSUNBZ2RHaHBjeTVuWVcxbExuQm9lWE5wWTNNdWMzUmhjblJUZVhOMFpXMG9VR2hoYzJWeUxsQm9lWE5wWTNNdVFWSkRRVVJGS1R0Y2JpQWdJQ0FnSUNBZ2RHaHBjeTVuWVcxbExuTjBZV2RsTG1KaFkydG5jbTkxYm1SRGIyeHZjaUE5SUNjak1qZ3lOakkySnp0Y2JpQWdJQ0FnSUNBZ0x5OW1ZV04wYjNKcFpYTmNiaUFnSUNBZ0lDQWdkR2hwY3k1d2JHRjVaWEpHWVdOMGIzSjVJRDBnYm1WM0lGQnNZWGxsY2taaFkzUnZjbmtvZEdocGN5NW5ZVzFsS1R0Y2JpQWdJQ0FnSUNBZ0x5OXdiR0Y1WlhJZ1ozSnZkWEJjYmlBZ0lDQWdJQ0FnZG1GeUlIQnNZWGxsY25OSGNtOTFjQ0E5SUhSb2FYTXVaMkZ0WlM1aFpHUXVaM0p2ZFhBb0tUdGNiaUFnSUNBZ0lDQWdkR2hwY3k1bllXMWxMbWRsYjNkaGNpNXdiR0Y1WlhKelIzSnZkWEFnUFNCd2JHRjVaWEp6UjNKdmRYQTdYRzRnSUNBZ0lDQWdJQzh2Y0d4aGVXVnlYRzRnSUNBZ0lDQWdJSFJvYVhNdWNHeGhlV1Z5SUQwZ2RHaHBjeTV3YkdGNVpYSkdZV04wYjNKNUxtTnlaV0YwWlZCc1lYbGxjaWdwTzF4dUlDQWdJQ0FnSUNCMGFHbHpMbWRoYldVdVlXUmtMbVY0YVhOMGFXNW5LSFJvYVhNdWNHeGhlV1Z5S1R0Y2JpQWdJQ0FnSUNBZ2NHeGhlV1Z5YzBkeWIzVndMbUZrWkNoMGFHbHpMbkJzWVhsbGNpazdYRzRnSUNBZ0lDQWdJQzh2WTJGamFHVWdZM1Z5Y21WdWRDQndiR0Y1WlhKY2JpQWdJQ0FnSUNBZ2RHaHBjeTVuWVcxbExtZGxiM2RoY2k1amRYSnlaVzUwVUd4aGVXVnlJRDBnZEdocGN5NXdiR0Y1WlhJN1hHNGdJQ0FnSUNBZ0lDOHZjMlYwSUhWd0lITnZZMnRsZEZ4dUlDQWdJQ0FnSUNCMGFHbHpMbWRoYldVdVoyVnZkMkZ5TG5OdlkydGxkRWhoYm1Sc1pYSWdQU0J1WlhjZ1UyOWphMlYwU0dGdVpHeGxjaWhwYnlnbmFIUjBjRG92TDJ4dlkyRnNhRzl6ZERvek1EQXdKeWtzSUhSb2FYTXVaMkZ0WlNrN1hHNGdJQ0FnZlZ4dVhHNWNiaUFnSUNCMWNHUmhkR1VvS1NCN1hHNGdJQ0FnSUNBZ0lIUm9hWE11WjJGdFpTNXdhSGx6YVdOekxtRnlZMkZrWlM1amIyeHNhV1JsS0hSb2FYTXVaMkZ0WlM1blpXOTNZWEl1Y0d4aGVXVnljMGR5YjNWd0xDQjBhR2x6TG1kaGJXVXVaMlZ2ZDJGeUxuQnNZWGxsY25OSGNtOTFjQ3h1ZFd4c0xDQnVkV3hzS1R0Y2JpQWdJQ0I5WEc1Y2JuMGlYWDA9IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxudmFyIFByZWxvYWQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFByZWxvYWQoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcmVsb2FkKTtcblxuICAgICAgICB0aGlzLmFzc2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZWFkeSA9IGZhbHNlO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhQcmVsb2FkLCBbe1xuICAgICAgICBrZXk6ICdwcmVsb2FkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByZWxvYWQoKSB7fVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3JlYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzI4MjYyNic7XG4gICAgICAgICAgICB0aGlzLmFzc2V0ID0gdGhpcy5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53aWR0aCAvIDIsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyLCAncHJlbG9hZGVyJyk7XG4gICAgICAgICAgICB0aGlzLmFzc2V0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgICAgICB0aGlzLmFzc2V0LnNjYWxlLnNldFRvKDAuMywgMC4zKTtcblxuICAgICAgICAgICAgdGhpcy5sb2FkLm9uTG9hZENvbXBsZXRlLmFkZE9uY2UodGhpcy5vbkxvYWRDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuc2V0UHJlbG9hZFNwcml0ZSh0aGlzLmFzc2V0KTtcblxuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdwbGF5JywgJ2Fzc2V0cy9pbWFnZXMvcGxheS5wbmcnKTtcblxuICAgICAgICAgICAgLy9zdGFydCBsb2FkXG4gICAgICAgICAgICB0aGlzLmxvYWQuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAndXBkYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ3N0YXJ0U2NyZWVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ29uTG9hZENvbXBsZXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uTG9hZENvbXBsZXRlKCkge1xuICAgICAgICAgICAgdGhpcy5yZWFkeSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUHJlbG9hZDtcbn0pKCk7XG5cbmV4cG9ydHNbJ2RlZmF1bHQnXSA9IFByZWxvYWQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYklrUTZMMkZ4ZFdFdloyVnZkMkZ5TDNOeVl5OXpkR0YwWlhNdlVISmxiRzloWkM1cWN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaU96czdPenM3T3pzN08wbEJRWEZDTEU5QlFVODdRVUZGWWl4aFFVWk5MRTlCUVU4c1IwRkZWanM0UWtGR1J5eFBRVUZQT3p0QlFVZHdRaXhaUVVGSkxFTkJRVU1zUzBGQlN5eEhRVUZITEVsQlFVa3NRMEZCUXp0QlFVTnNRaXhaUVVGSkxFTkJRVU1zUzBGQlN5eEhRVUZITEV0QlFVc3NRMEZCUXp0TFFVTjBRanM3YVVKQlRHZENMRTlCUVU4N08yVkJUMnBDTEcxQ1FVRkhMRVZCUTFRN096dGxRVVZMTEd0Q1FVRkhPMEZCUTB3c1owSkJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMR1ZCUVdVc1IwRkJSeXhUUVVGVExFTkJRVU03UVVGRE5VTXNaMEpCUVVrc1EwRkJReXhMUVVGTExFZEJRVWNzU1VGQlNTeERRVUZETEVkQlFVY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVkQlFVY3NRMEZCUXl4RlFVRkZMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeEhRVUZITEVOQlFVTXNSVUZCUlN4WFFVRlhMRU5CUVVNc1EwRkJRenRCUVVOeVJpeG5Ra0ZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhOUVVGTkxFTkJRVU1zUzBGQlN5eERRVUZETEVkQlFVY3NSVUZCUlN4SFFVRkhMRU5CUVVNc1EwRkJRenRCUVVOc1F5eG5Ra0ZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhMUVVGTExFTkJRVU1zUzBGQlN5eERRVUZETEVkQlFVY3NSVUZCUlN4SFFVRkhMRU5CUVVNc1EwRkJRenM3UVVGRmFrTXNaMEpCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zWTBGQll5eERRVUZETEU5QlFVOHNRMEZCUXl4SlFVRkpMRU5CUVVNc1kwRkJZeXhGUVVGRkxFbEJRVWtzUTBGQlF5eERRVUZETzBGQlF6VkVMR2RDUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEdkQ1FVRm5RaXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXpzN1FVRkZka01zWjBKQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFMUJRVTBzUlVGQlF5eDNRa0ZCZDBJc1EwRkJReXhEUVVGRE96czdRVUZIYWtRc1owSkJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RlFVRkZMRU5CUVVNN1UwRkRja0k3T3p0bFFVVkxMR3RDUVVGSE96dEJRVVZNTEdkQ1FVRkpMRWxCUVVrc1EwRkJReXhMUVVGTExFVkJRVVU3UVVGRFdpeHZRa0ZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zUzBGQlN5eERRVUZETEdGQlFXRXNRMEZCUXl4RFFVRkRPMkZCUTNoRE8xTkJSVW83T3p0bFFVVmhMREJDUVVGSE8wRkJRMklzWjBKQlFVa3NRMEZCUXl4TFFVRkxMRWRCUVVjc1NVRkJTU3hEUVVGRE8xTkJRM0pDT3pzN1YwRnVRMmRDTEU5QlFVODdPenR4UWtGQlVDeFBRVUZQSWl3aVptbHNaU0k2SWtRNkwyRnhkV0V2WjJWdmQyRnlMM055WXk5emRHRjBaWE12VUhKbGJHOWhaQzVxY3lJc0luTnZkWEpqWlhORGIyNTBaVzUwSWpwYkltVjRjRzl5ZENCa1pXWmhkV3gwSUdOc1lYTnpJRkJ5Wld4dllXUWdlMXh1WEc0Z0lDQWdZMjl1YzNSeWRXTjBiM0lvS1NCN1hHNGdJQ0FnSUNBZ0lIUm9hWE11WVhOelpYUWdQU0J1ZFd4c08xeHVJQ0FnSUNBZ0lDQjBhR2x6TG5KbFlXUjVJRDBnWm1Gc2MyVTdYRzRnSUNBZ2ZWeHVYRzRnSUNBZ2NISmxiRzloWkNncElIdGNiaUFnSUNCOVhHNWNiaUFnSUNCamNtVmhkR1VvS1NCN1hHNGdJQ0FnSUNBZ0lIUm9hWE11WjJGdFpTNXpkR0ZuWlM1aVlXTnJaM0p2ZFc1a1EyOXNiM0lnUFNBbkl6STRNall5TmljN1hHNGdJQ0FnSUNBZ0lIUm9hWE11WVhOelpYUWdQU0IwYUdsekxtRmtaQzV6Y0hKcGRHVW9kR2hwY3k1bllXMWxMbmRwWkhSb0lDOGdNaXdnZEdocGN5NW5ZVzFsTG1obGFXZG9kQ0F2SURJc0lDZHdjbVZzYjJGa1pYSW5LVHRjYmlBZ0lDQWdJQ0FnZEdocGN5NWhjM05sZEM1aGJtTm9iM0l1YzJWMFZHOG9NQzQxTENBd0xqVXBPMXh1SUNBZ0lDQWdJQ0IwYUdsekxtRnpjMlYwTG5OallXeGxMbk5sZEZSdktEQXVNeXdnTUM0ektUdGNibHh1SUNBZ0lDQWdJQ0IwYUdsekxteHZZV1F1YjI1TWIyRmtRMjl0Y0d4bGRHVXVZV1JrVDI1alpTaDBhR2x6TG05dVRHOWhaRU52YlhCc1pYUmxMQ0IwYUdsektUdGNiaUFnSUNBZ0lDQWdkR2hwY3k1c2IyRmtMbk5sZEZCeVpXeHZZV1JUY0hKcGRHVW9kR2hwY3k1aGMzTmxkQ2s3WEc1Y2JpQWdJQ0FnSUNBZ2RHaHBjeTVzYjJGa0xtbHRZV2RsS0Nkd2JHRjVKeXduWVhOelpYUnpMMmx0WVdkbGN5OXdiR0Y1TG5CdVp5Y3BPMXh1WEc0Z0lDQWdJQ0FnSUM4dmMzUmhjblFnYkc5aFpGeHVJQ0FnSUNBZ0lDQjBhR2x6TG14dllXUXVjM1JoY25Rb0tUdGNiaUFnSUNCOVhHNWNiaUFnSUNCMWNHUmhkR1VvS1NCN1hHNWNiaUFnSUNBZ0lDQWdhV1lnS0hSb2FYTXVjbVZoWkhrcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUhSb2FYTXVaMkZ0WlM1emRHRjBaUzV6ZEdGeWRDZ25jM1JoY25SVFkzSmxaVzRuS1R0Y2JpQWdJQ0FnSUNBZ2ZWeHVYRzRnSUNBZ2ZWeHVYRzRnSUNBZ2IyNU1iMkZrUTI5dGNHeGxkR1VvS1NCN1hHNGdJQ0FnSUNBZ0lIUm9hWE11Y21WaFpIa2dQU0IwY25WbE8xeHVJQ0FnSUgxY2JuMGlYWDA9IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgndmFsdWUnIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbicpOyB9IH1cblxudmFyIFN0YXJ0U2NyZWVuID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGFydFNjcmVlbigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YXJ0U2NyZWVuKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU3RhcnRTY3JlZW4sIFt7XG4gICAgICAgIGtleTogJ2NyZWF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgICAgICAgICB0aGlzLmdhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gJyMyODI2MjYnO1xuICAgICAgICAgICAgdGhpcy5wbGF5ID0gdGhpcy5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53aWR0aCAvIDIsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyLCAncGxheScpO1xuICAgICAgICAgICAgdGhpcy5wbGF5LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgICAgICAgICB0aGlzLnBsYXkuc2NhbGUuc2V0VG8oMC4zLCAwLjMpO1xuICAgICAgICAgICAgdGhpcy5wbGF5LmlucHV0RW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBsYXkuZXZlbnRzLm9uSW5wdXREb3duLmFkZCh0aGlzLnN0YXJ0UGxheSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBsYXkuZXZlbnRzLm9uSW5wdXRPdmVyLmFkZCh0aGlzLm1vdXNlT3ZlciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBsYXkuZXZlbnRzLm9uSW5wdXRPdXQuYWRkKHRoaXMubW91c2VPdXQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzdGFydFBsYXknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnRQbGF5KCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zdGFydCgnZ2FtZScpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdtb3VzZU92ZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW91c2VPdmVyKCkge1xuICAgICAgICAgICAgdGhpcy5nYW1lLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ21vdXNlT3V0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vdXNlT3V0KCkge1xuICAgICAgICAgICAgdGhpcy5nYW1lLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU3RhcnRTY3JlZW47XG59KSgpO1xuXG5leHBvcnRzWydkZWZhdWx0J10gPSBTdGFydFNjcmVlbjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWtRNkwyRnhkV0V2WjJWdmQyRnlMM055WXk5emRHRjBaWE12VTNSaGNuUlRZM0psWlc0dWFuTWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklqczdPenM3T3pzN096dEpRVUZ4UWl4WFFVRlhPMkZCUVZnc1YwRkJWenM0UWtGQldDeFhRVUZYT3pzN2FVSkJRVmdzVjBGQlZ6czdaVUZEZEVJc2EwSkJRVWM3UVVGRFRDeG5Ra0ZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zWlVGQlpTeEhRVUZITEZOQlFWTXNRMEZCUXp0QlFVTTFReXhuUWtGQlNTeERRVUZETEVsQlFVa3NSMEZCUnl4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhEUVVGRExFVkJRVVVzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRWRCUVVjc1EwRkJReXhGUVVGRkxFMUJRVTBzUTBGQlF5eERRVUZETzBGQlF5OUZMR2RDUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhGUVVGRkxFZEJRVWNzUTBGQlF5eERRVUZETzBGQlEycERMR2RDUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhGUVVGRkxFZEJRVWNzUTBGQlF5eERRVUZETzBGQlEyaERMR2RDUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEZsQlFWa3NSMEZCUnl4SlFVRkpMRU5CUVVNN1FVRkRPVUlzWjBKQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExGZEJRVmNzUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1JVRkJSU3hKUVVGSkxFTkJRVU1zUTBGQlF6dEJRVU4yUkN4blFrRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNWMEZCVnl4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eEZRVUZGTEVsQlFVa3NRMEZCUXl4RFFVRkRPMEZCUTNaRUxHZENRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhWUVVGVkxFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4UlFVRlJMRVZCUVVVc1NVRkJTU3hEUVVGRExFTkJRVU03VTBGRGVFUTdPenRsUVVWUkxIRkNRVUZITzBGQlExSXNaMEpCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zUzBGQlN5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRPMU5CUXpWQ096czdaVUZGVVN4eFFrRkJSenRCUVVOU0xHZENRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhMUVVGTExFTkJRVU1zVFVGQlRTeEhRVUZITEZOQlFWTXNRMEZCUXp0VFFVTTNRenM3TzJWQlJVOHNiMEpCUVVjN1FVRkRVQ3huUWtGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRExFMUJRVTBzUjBGQlJ5eFRRVUZUTEVOQlFVTTdVMEZETjBNN096dFhRWFJDWjBJc1YwRkJWenM3TzNGQ1FVRllMRmRCUVZjaUxDSm1hV3hsSWpvaVJEb3ZZWEYxWVM5blpXOTNZWEl2YzNKakwzTjBZWFJsY3k5VGRHRnlkRk5qY21WbGJpNXFjeUlzSW5OdmRYSmpaWE5EYjI1MFpXNTBJanBiSW1WNGNHOXlkQ0JrWldaaGRXeDBJR05zWVhOeklGTjBZWEowVTJOeVpXVnVJSHRjYmlBZ0lDQmpjbVZoZEdVb0tTQjdYRzRnSUNBZ0lDQWdJSFJvYVhNdVoyRnRaUzV6ZEdGblpTNWlZV05yWjNKdmRXNWtRMjlzYjNJZ1BTQW5Jekk0TWpZeU5pYzdYRzRnSUNBZ0lDQWdJSFJvYVhNdWNHeGhlU0E5SUhSb2FYTXVZV1JrTG5Od2NtbDBaU2gwYUdsekxtZGhiV1V1ZDJsa2RHZ2dMeUF5TENCMGFHbHpMbWRoYldVdWFHVnBaMmgwSUM4Z01pd2dKM0JzWVhrbktUdGNiaUFnSUNBZ0lDQWdkR2hwY3k1d2JHRjVMbUZ1WTJodmNpNXpaWFJVYnlnd0xqVXNJREF1TlNrN1hHNGdJQ0FnSUNBZ0lIUm9hWE11Y0d4aGVTNXpZMkZzWlM1elpYUlVieWd3TGpNc0lEQXVNeWs3WEc0Z0lDQWdJQ0FnSUhSb2FYTXVjR3hoZVM1cGJuQjFkRVZ1WVdKc1pXUWdQU0IwY25WbE8xeHVJQ0FnSUNBZ0lDQjBhR2x6TG5Cc1lYa3VaWFpsYm5SekxtOXVTVzV3ZFhSRWIzZHVMbUZrWkNoMGFHbHpMbk4wWVhKMFVHeGhlU3dnZEdocGN5azdYRzRnSUNBZ0lDQWdJSFJvYVhNdWNHeGhlUzVsZG1WdWRITXViMjVKYm5CMWRFOTJaWEl1WVdSa0tIUm9hWE11Ylc5MWMyVlBkbVZ5TENCMGFHbHpLVHRjYmlBZ0lDQWdJQ0FnZEdocGN5NXdiR0Y1TG1WMlpXNTBjeTV2YmtsdWNIVjBUM1YwTG1Ga1pDaDBhR2x6TG0xdmRYTmxUM1YwTENCMGFHbHpLVHRjYmlBZ0lDQjlYRzVjYmlBZ0lDQnpkR0Z5ZEZCc1lYa29LU0I3WEc0Z0lDQWdJQ0FnSUhSb2FYTXVjM1JoZEdVdWMzUmhjblFvSjJkaGJXVW5LVHRjYmlBZ0lDQjlYRzVjYmlBZ0lDQnRiM1Z6WlU5MlpYSW9LU0I3WEc0Z0lDQWdJQ0FnSUhSb2FYTXVaMkZ0WlM1allXNTJZWE11YzNSNWJHVXVZM1Z5YzI5eUlEMGdKM0J2YVc1MFpYSW5PMXh1SUNBZ0lIMWNibHh1SUNBZ0lHMXZkWE5sVDNWMEtDa2dlMXh1SUNBZ0lDQWdJQ0IwYUdsekxtZGhiV1V1WTJGdWRtRnpMbk4wZVd4bExtTjFjbk52Y2lBOUlDZGtaV1poZFd4MEp6dGNiaUFnSUNCOVhHNWNibjBnSWwxOSIsIm1vZHVsZS5leHBvcnRzPXtcbiAgICBcImhlYWRcIjoge1xuICAgICAgICBcInN0eWxlXCI6IFwic3Ryb2tlXCIsXG4gICAgICAgIFwiY3R4UHJvcFwiIDoge1xuICAgICAgICAgICAgXCJsaW5lV2l0aFwiIDogXCIyXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJkcmF3XCI6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcImRyYXdUeXBlXCI6IFwibW92ZVwiLFxuICAgICAgICAgICAgICAgIFwieFwiOiBcIiR7Y2FudmFzLmhlaWdodH1cIixcbiAgICAgICAgICAgICAgICBcInlcIjogXCIke2NhbnZhcy5oZWlnaHQvMn1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcImRyYXdUeXBlXCI6IFwibGluZVwiLFxuICAgICAgICAgICAgICAgIFwieFwiOiBcIiR7Y2FudmFzLndpZHRofVwiLFxuICAgICAgICAgICAgICAgIFwieVwiOiBcIiR7Y2FudmFzLmhlaWdodC8yfVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9LFxuICAgIFwiYm9keVwiOiB7XG4gICAgICAgIFwic3R5bGVcIjogXCJmaWxsXCIsXG4gICAgICAgIFwiZHJhd1wiOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJkcmF3VHlwZVwiOiBcIm1vdmVcIixcbiAgICAgICAgICAgICAgICBcInhcIjogXCIwXCIsXG4gICAgICAgICAgICAgICAgXCJ5XCI6IFwiMFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZHJhd1R5cGVcIjogXCJsaW5lXCIsXG4gICAgICAgICAgICAgICAgXCJ4XCI6IFwiJHtjYW52YXMuaGVpZ2h0fVwiLFxuICAgICAgICAgICAgICAgIFwieVwiOiBcIiR7Y2FudmFzLmhlaWdodC8yfVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZHJhd1R5cGVcIjogXCJsaW5lXCIsXG4gICAgICAgICAgICAgICAgXCJ4XCI6IFwiMFwiLFxuICAgICAgICAgICAgICAgIFwieVwiOiBcIiR7Y2FudmFzLmhlaWdodH1cIlxuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzPXtcbiAgICBcImhlYWRcIjoge1xuICAgICAgICBcInN0eWxlXCI6IFwic3Ryb2tlXCIsXG4gICAgICAgIFwiY3R4UHJvcFwiIDoge1xuICAgICAgICAgICAgXCJsaW5lV2l0aFwiIDogXCIyXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJkcmF3XCI6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcImRyYXdUeXBlXCI6IFwibW92ZVwiLFxuICAgICAgICAgICAgICAgIFwieFwiOiBcIiR7Y2FudmFzLmhlaWdodH1cIixcbiAgICAgICAgICAgICAgICBcInlcIjogXCIke2NhbnZhcy5oZWlnaHQvMn1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcImRyYXdUeXBlXCI6IFwibGluZVwiLFxuICAgICAgICAgICAgICAgIFwieFwiOiBcIiR7Y2FudmFzLndpZHRofVwiLFxuICAgICAgICAgICAgICAgIFwieVwiOiBcIiR7Y2FudmFzLmhlaWdodC8yfVwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9LFxuICAgIFwiYm9keVwiOiB7XG4gICAgICAgIFwic3R5bGVcIjogXCJmaWxsXCIsXG4gICAgICAgIFwiZHJhd1wiOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJkcmF3VHlwZVwiOiBcImFyY1wiLFxuICAgICAgICAgICAgICAgIFwieFwiOiBcIjE1XCIsXG4gICAgICAgICAgICAgICAgXCJ5XCI6IFwiMTVcIixcbiAgICAgICAgICAgICAgICBcInJhZGl1c1wiIDogXCIxNFwiLFxuICAgICAgICAgICAgICAgIFwiYXJjXCIgOiBcIiR7MiAqIE1hdGguUEl9XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF1cbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHM9e1xuICAgIFwiaGVhZFwiOiB7XG4gICAgICAgIFwic3R5bGVcIjogXCJzdHJva2VcIixcbiAgICAgICAgXCJjdHhQcm9wXCIgOiB7XG4gICAgICAgICAgICBcImxpbmVXaXRoXCIgOiBcIjJcIlxuICAgICAgICB9LFxuICAgICAgICBcImRyYXdcIjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZHJhd1R5cGVcIjogXCJtb3ZlXCIsXG4gICAgICAgICAgICAgICAgXCJ4XCI6IFwiJHtjYW52YXMuaGVpZ2h0fVwiLFxuICAgICAgICAgICAgICAgIFwieVwiOiBcIiR7Y2FudmFzLmhlaWdodC8yfVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZHJhd1R5cGVcIjogXCJsaW5lXCIsXG4gICAgICAgICAgICAgICAgXCJ4XCI6IFwiJHtjYW52YXMud2lkdGh9XCIsXG4gICAgICAgICAgICAgICAgXCJ5XCI6IFwiJHtjYW52YXMuaGVpZ2h0LzJ9XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH0sXG4gICAgXCJib2R5XCI6IHtcbiAgICAgICAgXCJzdHlsZVwiOiBcImZpbGxcIixcbiAgICAgICAgXCJkcmF3XCI6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcImRyYXdUeXBlXCI6IFwibW92ZVwiLFxuICAgICAgICAgICAgICAgIFwieFwiOiBcIjBcIixcbiAgICAgICAgICAgICAgICBcInlcIjogXCIwXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJkcmF3VHlwZVwiOiBcImxpbmVcIixcbiAgICAgICAgICAgICAgICBcInhcIjogXCIke2NhbnZhcy5oZWlnaHR9XCIsXG4gICAgICAgICAgICAgICAgXCJ5XCI6IFwiMFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiZHJhd1R5cGVcIjogXCJsaW5lXCIsXG4gICAgICAgICAgICAgICAgXCJ4XCI6IFwiJHtjYW52YXMuaGVpZ2h0fVwiLFxuICAgICAgICAgICAgICAgIFwieVwiOiBcIiR7Y2FudmFzLmhlaWdodH1cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcImRyYXdUeXBlXCI6IFwibGluZVwiLFxuICAgICAgICAgICAgICAgIFwieFwiOiBcIjBcIixcbiAgICAgICAgICAgICAgICBcInlcIjogXCIke2NhbnZhcy5oZWlnaHR9XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH1cbn0iLCJtb2R1bGUuZXhwb3J0cz17XG4gICAgXCJib2R5XCI6IHtcbiAgICAgICAgXCJzdHlsZVwiOiBcImZpbGxcIixcbiAgICAgICAgXCJkcmF3XCI6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcImRyYXdUeXBlXCI6IFwibW92ZVwiLFxuICAgICAgICAgICAgICAgIFwieFwiOiBcIjBcIixcbiAgICAgICAgICAgICAgICBcInlcIjogXCIwXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJkcmF3VHlwZVwiOiBcImxpbmVcIixcbiAgICAgICAgICAgICAgICBcInhcIjogXCIxMlwiLFxuICAgICAgICAgICAgICAgIFwieVwiOiBcIjZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcImRyYXdUeXBlXCI6IFwibGluZVwiLFxuICAgICAgICAgICAgICAgIFwieFwiOiBcIjBcIixcbiAgICAgICAgICAgICAgICBcInlcIjogXCIxMlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHM9e1xuICAgIFwiYm9keVwiOiB7XG4gICAgICAgIFwic3R5bGVcIjogXCJmaWxsXCIsXG4gICAgICAgIFwiZHJhd1wiOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJkcmF3VHlwZVwiOiBcImFyY1wiLFxuICAgICAgICAgICAgICAgIFwieFwiOiBcIjZcIixcbiAgICAgICAgICAgICAgICBcInlcIjogXCI2XCIsXG4gICAgICAgICAgICAgICAgXCJyYWRpdXNcIiA6IFwiNlwiLFxuICAgICAgICAgICAgICAgIFwiYXJjXCIgOiBcIiR7MiAqIE1hdGguUEl9XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH1cbn0iXX0=
